import { ReplaySubject } from 'rxjs';
import { takeUntil } from 'rxjs/operators';
function componentDestroyed(component) {
    var modifiedComponent = component;
    if (modifiedComponent.__componentDestroyed$) {
        return modifiedComponent.__componentDestroyed$;
    }
    var oldNgOnDestroy = component.ngOnDestroy;
    var stop$ = new ReplaySubject();
    modifiedComponent.ngOnDestroy = function () {
        if (oldNgOnDestroy) {
            oldNgOnDestroy.apply(component);
        }
        stop$.next();
        stop$.complete();
    };
    return modifiedComponent.__componentDestroyed$ = stop$.asObservable();
}
export function untilComponentDestroyed(component) {
    return function (source) { return source.pipe(takeUntil(componentDestroyed(component))); };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50LWRlc3Ryb3llZC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BhbHlsZS91aS8iLCJzb3VyY2VzIjpbInNyYy9taW5pbWFsL2NvbXBvbmVudC1kZXN0cm95ZWQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFjLGFBQWEsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUNqRCxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFM0MsU0FBUyxrQkFBa0IsQ0FBQyxTQUFvQjtJQUM1QyxJQUFNLGlCQUFpQixHQUFHLFNBR3pCLENBQUM7SUFDRixJQUFJLGlCQUFpQixDQUFDLHFCQUFxQixFQUFFO1FBQ3pDLE9BQU8saUJBQWlCLENBQUMscUJBQXFCLENBQUM7S0FDbEQ7SUFDRCxJQUFNLGNBQWMsR0FBRyxTQUFTLENBQUMsV0FBVyxDQUFDO0lBQzdDLElBQU0sS0FBSyxHQUFHLElBQUksYUFBYSxFQUFRLENBQUM7SUFDeEMsaUJBQWlCLENBQUMsV0FBVyxHQUFHO1FBQzVCLElBQUksY0FBYyxFQUFFO1lBQ2xCLGNBQWMsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUM7U0FDakM7UUFDRCxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDYixLQUFLLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDckIsQ0FBQyxDQUFDO0lBQ0YsT0FBTyxpQkFBaUIsQ0FBQyxxQkFBcUIsR0FBRyxLQUFLLENBQUMsWUFBWSxFQUFFLENBQUM7QUFDMUUsQ0FBQztBQUVELE1BQU0sVUFBVSx1QkFBdUIsQ0FBSSxTQUFvQjtJQUMzRCxPQUFPLFVBQUMsTUFBcUIsSUFBSyxPQUFBLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLGtCQUFrQixDQUFDLFNBQXNCLENBQUMsQ0FBQyxDQUFDLEVBQWxFLENBQWtFLENBQUM7QUFDekcsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9uRGVzdHJveSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgUmVwbGF5U3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgdGFrZVVudGlsIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5mdW5jdGlvbiBjb21wb25lbnREZXN0cm95ZWQoY29tcG9uZW50OiBPbkRlc3Ryb3kpOiBPYnNlcnZhYmxlPHZvaWQ+IHtcbiAgICBjb25zdCBtb2RpZmllZENvbXBvbmVudCA9IGNvbXBvbmVudCBhcyB7XG4gICAgICBfX2NvbXBvbmVudERlc3Ryb3llZCQ/OiBPYnNlcnZhYmxlPHZvaWQ+XG4gICAgICBuZ09uRGVzdHJveT8oKTogdm9pZFxuICAgIH07XG4gICAgaWYgKG1vZGlmaWVkQ29tcG9uZW50Ll9fY29tcG9uZW50RGVzdHJveWVkJCkge1xuICAgICAgICByZXR1cm4gbW9kaWZpZWRDb21wb25lbnQuX19jb21wb25lbnREZXN0cm95ZWQkO1xuICAgIH1cbiAgICBjb25zdCBvbGROZ09uRGVzdHJveSA9IGNvbXBvbmVudC5uZ09uRGVzdHJveTtcbiAgICBjb25zdCBzdG9wJCA9IG5ldyBSZXBsYXlTdWJqZWN0PHZvaWQ+KCk7XG4gICAgbW9kaWZpZWRDb21wb25lbnQubmdPbkRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChvbGROZ09uRGVzdHJveSkge1xuICAgICAgICAgIG9sZE5nT25EZXN0cm95LmFwcGx5KGNvbXBvbmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgc3RvcCQubmV4dCgpO1xuICAgICAgICBzdG9wJC5jb21wbGV0ZSgpO1xuICAgIH07XG4gICAgcmV0dXJuIG1vZGlmaWVkQ29tcG9uZW50Ll9fY29tcG9uZW50RGVzdHJveWVkJCA9IHN0b3AkLmFzT2JzZXJ2YWJsZSgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdW50aWxDb21wb25lbnREZXN0cm95ZWQ8VD4oY29tcG9uZW50OiBPbkRlc3Ryb3kpOiAoc291cmNlOiBPYnNlcnZhYmxlPFQ+KSA9PiBPYnNlcnZhYmxlPFQ+IHtcbiAgICByZXR1cm4gKHNvdXJjZTogT2JzZXJ2YWJsZTxUPikgPT4gc291cmNlLnBpcGUodGFrZVVudGlsKGNvbXBvbmVudERlc3Ryb3llZChjb21wb25lbnQgYXMgT25EZXN0cm95KSkpO1xufVxuIl19