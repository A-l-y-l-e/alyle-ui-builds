{"version":3,"file":"alyle-ui-drawer.js.map","sources":["ng://@alyle/ui/drawer/drawer.ts","ng://@alyle/ui/drawer/drawer.module.ts"],"sourcesContent":["import {\n  Component,\n  Directive,\n  ElementRef,\n  Input,\n  ContentChildren,\n  ContentChild,\n  QueryList,\n  ChangeDetectionStrategy,\n  forwardRef,\n  HostBinding,\n  Optional,\n  Renderer2,\n  OnChanges,\n  SimpleChanges\n} from '@angular/core';\nimport { IsBoolean } from '@alyle/ui';\nimport { AnimationBuilder, trigger, state, animate, transition, style } from '@angular/animations';\nimport { BehaviorSubject } from 'rxjs';\nexport interface StyleMargin {\n  top?: string;\n  left?: string;\n  right?: string;\n  bottom?: string;\n}\n\n@Directive({\n  selector: 'ly-drawer-content'\n})\nexport class LyDrawerContent {\n  @HostBinding('style.margin') margin = '0 0 0 0';\n  _el: HTMLElement;\n  @HostBinding('class.ly--animation') _lyAnimation = true;\n  constructor(\n    public elementRef: ElementRef,\n    public renderer: Renderer2,\n  ) {\n    this._el = elementRef.nativeElement;\n  }\n\n  setContentStyle(margin: StyleMargin) {\n    const array = this.margin.split(' ');\n    if (margin.left) {\n      array[3] = `${margin.left}px`;\n    }\n    if (margin.right) {\n      array[1] = `${margin.right}px`;\n    }\n    if (margin.top) {\n      array[0] = `${margin.top}px`;\n    }\n    if (margin.bottom) {\n      array[2] = `${margin.bottom}px`;\n    }\n    this.margin = array.join(' ');\n    // const keys = Object.keys(margin);\n    // for (let i = 0; i < keys.length; i++) {\n    //   const keyName = keys[i];\n    //   this.renderer.setStyle(this._drawerContent.elementRef.nativeElement, `margin-${keyName}`, `${margin[keyName]}px`);\n    // }\n  }\n}\n\n@Component({\n  selector: 'ly-drawer-container',\n  styles: [`:host{display:block;overflow:hidden;-webkit-overflow-scrolling:touch;box-sizing:border-box;position:relative}:host ::ng-deep>ly-drawer-content{height:100%;overflow:auto;display:block}:host ::ng-deep>ly-drawer-content.ly--animation{transition:375ms cubic-bezier(.45,0,.25,1)}.ly-drawer-bg{position:absolute;top:0;left:0;right:0;bottom:0;opacity:.6;z-index:10;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ly-drawer-bg-opened{display:block}.ly-drawer-bg-closed{display:none}`],\n  animations: [\n    trigger('in', [\n      state('inactive, 0' , style({ opacity: '0', 'display': 'none' })),\n      state('active, 1' , style({ opacity: '.6' })),\n      transition('* => active', animate('375ms ease-in')),\n      transition('* => inactive', animate('375ms ease-out')),\n    ])\n  ],\n  template: `\n  <ng-content select=\"ly-drawer\"></ng-content>\n  <ng-content select=\"ly-drawer-content\"></ng-content>\n  <div\n  #bg\n  [class.ly-drawer-bg-opened]=\"isDrawerBg | async\"\n  [class.ly-drawer-bg-closed]=\"!(isDrawerBg | async)\"\n  [@in]=\"isDrawerBg | async\" class=\"ly-drawer-bg\"\n  bg=\"drawer:backdrop\"\n  (click)=\"_closeAllSideAndPush()\"\n  ></div>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  preserveWhitespaces: false,\n  exportAs: 'lyDrawerContainer'\n})\nexport class LyDrawerContainer {\n  isDrawerBg = new BehaviorSubject<'active' | 'inactive' | boolean>(false);\n  @ContentChildren(forwardRef(() => LyDrawer)) _drawers: QueryList<LyDrawer>;\n  @ContentChild(forwardRef(() => LyDrawerContent)) _drawerContent: LyDrawerContent;\n  constructor(\n    private renderer: Renderer2,\n    private elementRef: ElementRef,\n    private animationBuilder: AnimationBuilder\n  ) {}\n\n  _closeAllSideAndPush() {\n    this._drawers.forEach((drawer: LyDrawer) => {\n      if (drawer.mode === 'over' || drawer.mode === 'push') {\n        drawer.close();\n        this.isDrawerBg.next('inactive');\n      }\n    });\n  }\n\n  /** Close all open drawers */\n  closeAll() {\n    this._drawers.forEach((drawer: LyDrawer) => {\n      if (drawer.open) {\n        drawer.close();\n      }\n    });\n    this.isDrawerBg.next('inactive');\n  }\n}\n\n@Component({\n  selector: 'ly-nav, ly-drawer',\n  styles: [`:host{display:block;position:fixed;box-sizing:border-box;overflow:auto;z-index:11}:host[position=top]{top:0;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}:host[position=left]{left:0;-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}:host[position=right],:host[position=rtl]{right:0;-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}:host[position=bottom]{bottom:0;-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}:host.ly-show-drawer{-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}:host.ly-drawer-hidden{visibility:hidden}`],\n  animations: [\n    trigger('visibilityChanged', [\n      state('true, open' , style({ transform: 'translate3d(0, 0, 0)' })),\n      transition('* => open, * => close', [\n        animate('375ms cubic-bezier(.45, 0, .25, 1)')\n      ])\n    ])\n  ],\n  template: `<ng-content></ng-content>`,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  preserveWhitespaces: false,\n  exportAs: 'lyDrawer'\n})\nexport class LyDrawer implements OnChanges {\n  private _opened = false;\n  @Input() config: LyDrawerConfig = {\n    width: 200,\n    height: 200\n  };\n  @HostBinding('attr.mode') @Input() mode: 'side' | 'push' | 'over' = 'side';\n  @HostBinding('attr.position') @Input() position: 'top' | 'bottom' | 'left' | 'right' | 'rtl' = 'left';\n  @HostBinding('class.ly-show-drawer') isShowDrawer: boolean;\n  @HostBinding('@visibilityChanged')\n  isOpenDrawer: 'open' | 'close' | boolean = false;\n  @HostBinding('class.ly-drawer-hidden') isDrawerHidden = true;\n  @Input()\n  @IsBoolean()\n  set opened(val: boolean) {\n    this.isOpenDrawer = val;\n    this._opened = val;\n    val ? this.open(true) : this.close(false);\n  }\n  get opened(): boolean { return this._opened; }\n\n  constructor(\n    @Optional() private drawerContainer: LyDrawerContainer,\n    private elementRef: ElementRef,\n  ) { }\n\n  get _elementRect(): ClientRect {\n    return this.elementRef.nativeElement.getBoundingClientRect();\n  }\n\n  private updateDrawerMargin() {\n    if (this.mode === 'side' || this.mode === 'push') {\n      const width = this.config.width;\n      const height = this.config.height;\n      if (width !== 0 && this.position === 'left' || this.position === 'right') {\n        const margin = {};\n        margin[this.position] = width;\n        this.drawerContainer._drawerContent.setContentStyle(margin);\n      }\n      if (height !== 0 && this.position === 'top' || this.position === 'bottom') {\n        const margin = {};\n        margin[this.position] = height;\n        this.drawerContainer._drawerContent.setContentStyle(margin);\n      }\n    }\n  }\n\n  toBoolean(drawerState: boolean | 'open' | 'close'): boolean {\n    if (drawerState === true || drawerState === 'open') {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  toggle() {\n    this.toBoolean(this.isOpenDrawer) ? this.close() : this.open();\n  }\n\n  open(is?: true): 'open' | boolean {\n    this.toogleDrawer(is);\n    this.isDrawerHidden = false;\n    this.isOpenDrawer = is || 'open';\n    this.drawerContainer._drawerContent._lyAnimation = this.isOpenDrawer === 'open';\n    this.updateDrawerMargin();\n    this.setBgState(is || 'active');\n    return this.isOpenDrawer;\n  }\n  close(is?: false): 'close' | boolean {\n    this.toogleDrawer(is);\n    this.resetMargin();\n    this.isOpenDrawer = is === false || is === true ? false : 'close';\n    this.drawerContainer._drawerContent._lyAnimation = this.isOpenDrawer === 'close';\n    this.setBgState(is === false ? false : 'inactive');\n    return this.isOpenDrawer;\n  }\n\n  private toogleDrawer(status: boolean) {\n    this.isShowDrawer = this.toBoolean(status);\n  }\n\n  setBgState(bgState: boolean | 'active' | 'inactive') {\n    if (this.mode === 'over' || this.mode === 'push') {\n      this.drawerContainer.isDrawerBg.next(bgState);\n    }\n  }\n\n  resetMargin() {\n    const margin = {};\n    margin[this.position] = '0';\n    this.drawerContainer._drawerContent.setContentStyle(margin);\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    Object.keys(changes).forEach((key) => {\n      /**for `position` changes */\n      if (key === 'position' && changes[key].currentValue === 'rtl') {\n        this.position = 'right';\n      }\n\n      /** Update mode */\n      if (changes['mode'] && !changes[key].firstChange) {\n        this.toBoolean(this.isOpenDrawer) ? this.open(true) : this.close(false);\n      }\n    });\n  }\n\n}\n\nexport interface LyDrawerConfig {\n  width?: number;\n  height?: number;\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { LyDrawer, LyDrawerContainer, LyDrawerContent } from './drawer';\nimport { LyCommonModule } from '@alyle/ui';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    LyCommonModule\n  ],\n  exports: [LyDrawer, LyDrawerContainer, LyDrawerContent],\n  declarations: [LyDrawer, LyDrawerContainer, LyDrawerContent],\n})\nexport class LyDrawerModule {}\n"],"names":[],"mappings":"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"}
