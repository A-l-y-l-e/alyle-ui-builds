{"version":3,"file":"alyle-ui-snack-bar.js.map","sources":["ng://@alyle/ui/snack-bar/snack-bar.service.ts","ng://@alyle/ui/snack-bar/snack-bar-ref.ts","ng://@alyle/ui/snack-bar/snack-bar.ts","ng://@alyle/ui/snack-bar/snack-bar.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { LySnackBarRef } from './snack-bar-ref';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LySnackBarService {\n  _currentSnackBar: LySnackBarRef;\n}\n","import { EventEmitter } from '@angular/core';\nimport { Subject, Observable } from 'rxjs';\nimport { OverlayFromTemplateRef, LyTheme2 } from '@alyle/ui';\nimport { LySnackBarService } from './snack-bar.service';\nimport { LySnackBarDismiss } from './snack-bar';\n\nconst DEFAULT_DURATION = 6e3;\n/** @ignore */\nconst STYLE_PRIORITY = -2;\n\nexport class LySnackBarRef {\n  private _timer: any;\n  private _dismissedByAction = false;\n\n  /** Subject for notifying the user that the snack bar has been dismissed. */\n  private readonly _afterDismissed = new Subject<void>();\n\n  /** Gets an observable that is notified when the snack bar is finished closing. */\n  afterDismissed(): Observable<void> {\n    return this._afterDismissed.asObservable();\n  }\n  constructor(\n    private _snackBarService: LySnackBarService,\n    private _overlay: OverlayFromTemplateRef,\n    private _afterDismissedEventEmitter: EventEmitter<LySnackBarDismiss>,\n    duration: number,\n    private _theme: LyTheme2\n  ) {\n    this._timer = setTimeout(() => {\n      this.dismiss();\n    }, duration || DEFAULT_DURATION);\n  }\n\n  dismiss() {\n    const snackBar = this._overlay;\n    const timer = this._timer;\n    this._afterDismissedEventEmitter.emit({dismissedByAction: this._dismissedByAction});\n    this._afterDismissed.next();\n    this._afterDismissed.complete();\n    if (snackBar) {\n      if (timer) {\n        // clear previous timer\n        clearTimeout(timer);\n      }\n      this._theme.addStyle('SnackBar:close', ({\n        opacity: 0\n      }), snackBar.containerElement, undefined, STYLE_PRIORITY);\n      setTimeout(() => {\n        snackBar.destroy();\n      }, 350);\n      this._snackBarService._currentSnackBar = null;\n      this._overlay = null;\n    }\n  }\n  dismissWithAction() {\n    const snackBar = this._overlay;\n    if (snackBar) {\n      this._dismissedByAction = true;\n      this.dismiss();\n    }\n  }\n}\n","import { Directive, Input, TemplateRef, Output, EventEmitter } from '@angular/core';\nimport { LyTheme2, LyOverlay, ThemeVariables, shadowBuilder } from '@alyle/ui';\nimport { LySnackBarService } from './snack-bar.service';\nimport { LySnackBarRef } from './snack-bar-ref';\n\nconst STYLE_PRIORITY = -2;\nconst DEFAULT_HORIZONTAL_POSITION = 'end';\nconst DEFAULT_VERTICAL_POSITION = 'bottom';\n\n/** Event that is emitted when a snack bar is dismissed. */\nexport interface LySnackBarDismiss {\n  /** Whether the snack bar was dismissed using the action fn. */\n  dismissedByAction: boolean;\n}\n\n@Directive({\n  selector: 'ng-template[ly-snack-bar]',\n  exportAs: 'lySnackBar'\n})\nexport class LySnackBar {\n  @Input() duration: number;\n  @Input() horizontalPosition: 'start' | 'center' | 'end' | 'left' | 'right';\n  @Input() verticalPosition: 'top' | 'bottom';\n  @Output() afterDismissed = new EventEmitter<LySnackBarDismiss>();\n  constructor(\n    private _templateRef: TemplateRef<any>,\n    private _theme: LyTheme2,\n    private _overlay: LyOverlay,\n    private _snackBarService: LySnackBarService\n  ) { }\n\n  open() {\n    // close previous snackBar if exist\n    const sbrPrev = this._snackBarService._currentSnackBar;\n    if (sbrPrev) {\n      sbrPrev.dismiss();\n    }\n\n    const duration = this.duration;\n    const horizontalPosition = this.horizontalPosition || DEFAULT_HORIZONTAL_POSITION;\n    const verticalPosition = this.verticalPosition || DEFAULT_VERTICAL_POSITION;\n\n    const snackBar = this._overlay.create(this._templateRef, undefined, {\n      styles: {\n        // this remove previous style\n        justifyContent: null\n      },\n      classes: [\n        this._theme.addStyle('SnackBar', (theme: ThemeVariables) => ({\n          borderRadius: '4px',\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          margin: '8px',\n          padding: '0 16px',\n          minHeight: '48px',\n          minWidth: '256px',\n          opacity: 0,\n          transition: `opacity ${theme.animations.curves.standard} 350ms`,\n          fontSize: theme.pxToRem(theme.typography.fontSize),\n          boxShadow: shadowBuilder(4, theme.snackBar.root.background as string),\n          [theme.getBreakpoint('XSmall')]: {\n            width: 'calc(100% - 16px)'\n          },\n          ...theme.snackBar.root,\n        }), undefined, undefined, STYLE_PRIORITY),\n        this._theme.addStyle(`SnackBar.hp:${horizontalPosition}.vp:${verticalPosition}`, () => {\n          const __styles: {\n            marginLeft?: 'auto',\n            left?: 0,\n            marginRight?: 'auto',\n            right?: 0,\n          } = {\n            [verticalPosition]: 0\n          };\n          if (horizontalPosition === 'center') {\n            __styles.marginRight = __styles.marginLeft = 'auto';\n            __styles.left = __styles.right = 0;\n          } else {\n            __styles[horizontalPosition] = 0;\n          }\n          return __styles;\n        }, undefined, undefined, STYLE_PRIORITY)\n      ]\n    });\n    /**\n     * TODO: add support for `@keyframes`\n     */\n    getComputedStyle(snackBar.containerElement).getPropertyValue('opacity');\n\n    this._theme.addStyle('SnackBar:open', ({\n      opacity: 1\n    }), snackBar.containerElement, undefined, STYLE_PRIORITY);\n    const sbr = new LySnackBarRef(this._snackBarService, snackBar, this.afterDismissed, duration, this._theme);\n    this._snackBarService._currentSnackBar = sbr;\n    return sbr;\n  }\n\n  /** Dismiss snackBar */\n  dismiss() {\n    const sbr = this._snackBarService._currentSnackBar;\n    if (sbr) {\n      sbr.dismissWithAction();\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { LyOverlayModule } from '@alyle/ui';\nimport { LySnackBar } from './snack-bar';\n\n@NgModule({\n  imports: [LyOverlayModule],\n  declarations: [LySnackBar],\n  exports: [LySnackBar]\n})\nexport class LySnackBarModule {}\n"],"names":["STYLE_PRIORITY"],"mappings":"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"}
