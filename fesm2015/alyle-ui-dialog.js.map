{"version":3,"file":"alyle-ui-dialog.js","sources":["ng://@alyle/ui/dialog/dialog-ref.ts","ng://@alyle/ui/dialog/dialog-config.ts","ng://@alyle/ui/dialog/dialog-data.ts","ng://@alyle/ui/dialog/dialog-container.component.ts","ng://@alyle/ui/dialog/dynamic-injector.ts","ng://@alyle/ui/dialog/dialog.ts","ng://@alyle/ui/dialog/dialog-title.directive.ts","ng://@alyle/ui/dialog/dialog-content.directive.ts","ng://@alyle/ui/dialog/dialog-actions.directive.ts","ng://@alyle/ui/dialog/dialog.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { LyOverlayRef } from '@alyle/ui';\nimport { LyDialogContainer } from './dialog-container.component';\n\n@Injectable()\nexport class LyDialogRef {\n  private _result: any;\n  get afterOpened() {\n    return (\n      this._overlayRef.componentRef!.instance as LyDialogContainer\n    )._afterOpened.asObservable();\n  }\n  get beforeClosed() {\n    return (\n      this._overlayRef.componentRef!.instance as LyDialogContainer\n    )._beforeClosed.asObservable();\n  }\n  get afterClosed() {\n    return (\n      this._overlayRef.componentRef!.instance as LyDialogContainer\n    )._afterClosed.asObservable();\n  }\n\n  /**\n   * @internal\n   * @docs-private\n   */\n  get result() {\n    return this._result;\n  }\n  constructor(\n    private _overlayRef: LyOverlayRef\n  ) {\n\n  }\n  close(result?: any) {\n    const dialogContainer = (this._overlayRef.componentRef!.instance as LyDialogContainer);\n    dialogContainer._beforeClosed.next(result);\n    dialogContainer._beforeClosed.complete();\n    dialogContainer._startClose();\n    this._result = result;\n  }\n}\n","/**\n * Configuration for opening a modal dialog with the LyDialog service.\n */\nexport class LyDialogConfig<DATA = unknown> {\n\n  /** Data being injected into the child component. */\n  data?: DATA | null;\n\n  /** Width of the dialog. */\n  width?: number | string;\n\n  /** Height of the dialog. */\n  height?: number | string;\n\n  /**\n   * Max-height of the dialog. If a number is provided, pixel units are assumed.\n   * Defaults to calc(100vw - 90px)\n   */\n  maxHeight?: number | string | null = 'calc(100vh - 64px)';\n\n  /**\n   * Max-width of the dialog. If a number is provided, pixel units are assumed.\n   * Defaults to calc(100vw - 90px)\n   */\n  maxWidth?: number | string | null = 'calc(100vw - 64px)';\n\n  /** Min-height of the dialog. If a number is provided, pixel units are assumed. */\n  minHeight?: number | string;\n\n  /** Min-width of the dialog. If a number is provided, pixel units are assumed. */\n  minWidth?: number | string;\n\n  /** Whether the dialog has a backdrop. */\n  hasBackdrop?: boolean = true;\n\n  /**\n   * Custom class for the backdrop. Overrides the current style.\n   */\n  backdropClass?: string;\n\n  /**\n   * Custom class for the `<ly-dialog-container>`. Overwrite the current style.\n   */\n  containerClass?: string;\n\n  /**\n   * Whether the user can click on the backdrop to close the dialog.\n   */\n  disableClose?: boolean;\n}\n","import { InjectionToken } from '@angular/core';\n\nexport const LY_DIALOG_DATA = new InjectionToken('LyDialogData');\n","import {\n  OnInit,\n  Component,\n  ComponentFactory,\n  TemplateRef,\n  ViewChild,\n  ViewContainerRef,\n  Injector,\n  ApplicationRef,\n  ComponentRef,\n  EmbeddedViewRef,\n  ChangeDetectionStrategy,\n  Renderer2,\n  ElementRef,\n  ChangeDetectorRef,\n  DoCheck,\n  } from '@angular/core';\nimport { state, style, transition, animate, trigger, AnimationEvent } from '@angular/animations';\nimport { LyOverlayRef, LyTheme2, ThemeVariables, shadowBuilder } from '@alyle/ui';\nimport { Subject } from 'rxjs';\n\nimport { LyDialogRef } from './dialog-ref';\nimport { LyDialogConfig } from './dialog-config';\nimport { LY_DIALOG_DATA } from './dialog-data';\n\nconst STYLE_PRIORITY = -2;\n\n/** @docs-private */\nconst STYLES = (theme: ThemeVariables) => ({\n  root: {\n    display: 'flex',\n    position: 'relative',\n    backgroundColor: theme.background.primary.default,\n    borderRadius: '4px',\n    boxShadow: shadowBuilder(12),\n    overflow: 'auto',\n    '> :first-child': {\n      display: 'flex',\n      flexDirection: 'column',\n      width: '100%'\n    },\n    '&': theme.dialog ? theme.dialog.root : null\n  }\n});\n\n/** @docs-private */\n@Component({\n  selector: 'ly-dialog-container',\n  template: '<ng-template></ng-template>',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  animations: [\n    trigger('dialogContainer', [\n      state('void, exit', style({opacity: 0, transform: 'scale(0.7)'})),\n      state('enter', style({transform: 'none'})),\n      transition('* => enter', animate('150ms cubic-bezier(0, 0, 0.2, 1)',\n        style({transform: 'none', opacity: 1}))),\n      transition('* => void, * => exit',\n        animate('75ms cubic-bezier(0.4, 0.0, 0.2, 1)', style({opacity: 0})))\n    ])\n  ],\n  host: {\n    '[@dialogContainer]': '_state',\n    '(@dialogContainer.start)': '_onAnimationStart($event)',\n    '(@dialogContainer.done)': '_onAnimationDone($event)'\n  }\n})\nexport class LyDialogContainer implements OnInit, DoCheck {\n  /** @docs-private */\n  readonly classes = this._theme.addStyleSheet(STYLES, STYLE_PRIORITY);\n  private _embeddedViewRef: EmbeddedViewRef<any>;\n  private _componentRef: ComponentRef<any>;\n\n  /** @internal */\n  readonly _afterOpened = new Subject<void>();\n  /** @internal */\n  readonly _beforeClosed = new Subject<any>();\n  /** @internal */\n  readonly _afterClosed = new Subject<any>();\n\n  /**\n   * State of the dialog animation.\n   * @internal\n   */\n  _state: 'void' | 'enter' | 'exit' = 'enter';\n\n  /** @internal */\n  @ViewChild(TemplateRef, { read: ViewContainerRef, static: true }) private readonly viewContainerRef: ViewContainerRef;\n\n  /** @internal */\n  private _componentFactoryOrTemplate: ComponentFactory<any> | TemplateRef<any>;\n\n  private _newInjector: Injector;\n\n  constructor(\n    private _appRef: ApplicationRef,\n    private _overlayRef: LyOverlayRef,\n    private _theme: LyTheme2,\n    private _el: ElementRef<HTMLElement>,\n    private _cd: ChangeDetectorRef,\n    private _renderer: Renderer2\n  ) {\n    _renderer.addClass(_el.nativeElement, this.classes.root);\n  }\n  ngOnInit() {\n\n    if (this._componentFactoryOrTemplate instanceof TemplateRef) {\n\n      const context = new LyDialogContext(this._newInjector);\n\n      this._embeddedViewRef = this.viewContainerRef\n      .createEmbeddedView(this._componentFactoryOrTemplate, context);\n    } else {\n      this._componentRef = this.viewContainerRef\n          .createComponent(this._componentFactoryOrTemplate, undefined, this._newInjector);\n    }\n\n    // If exist dialogStyleBlock apply for this component, else do nothing.\n    const { containerClass } = this._newInjector.get(LyDialogConfig);\n    if (containerClass) {\n      this._renderer.addClass(this._el.nativeElement, containerClass);\n    }\n  }\n\n  ngDoCheck() {\n    this._overlayRef.onResizeScroll!();\n  }\n\n  /** @internal */\n  _init(componentFactoryOrTemplate: ComponentFactory<any> | TemplateRef<any>, newInjector: Injector) {\n    this._componentFactoryOrTemplate = componentFactoryOrTemplate;\n    this._newInjector = newInjector;\n  }\n\n  /**\n   * Start to close, starts the dialog exit animation.\n   * @internal\n   */\n  _startClose() {\n    this._state = 'exit';\n    this._cd.markForCheck();\n  }\n\n  _onAnimationStart(event: AnimationEvent) {\n    if (event.toState === 'enter') {\n      this._overlayRef!.onResizeScroll!();\n    }\n  }\n\n  /** @internal */\n  _onAnimationDone(event: AnimationEvent) {\n    if (event.toState === 'exit') {\n      const dialogRef = this._newInjector.get(LyDialogRef);\n      this._destroy();\n      this._overlayRef.destroy();\n      this._afterClosed.next(dialogRef.result);\n      this._afterClosed.complete();\n    } else if (event.toState === 'enter') {\n      this._afterOpened.next();\n      this._afterOpened.complete();\n    }\n  }\n\n  private _destroy() {\n    if (this._componentRef) {\n      this._appRef.detachView(this._componentRef.hostView);\n      this._componentRef.destroy();\n    } else {\n      this._appRef.detachView(this._embeddedViewRef);\n      this._embeddedViewRef.detach();\n      this._embeddedViewRef.destroy();\n    }\n  }\n\n  /** @internal */\n  _getHostElement() {\n    return this._el.nativeElement;\n  }\n}\n\nexport class LyDialogContext {\n  $implicit: any = this._injector.get(LyDialogRef);\n  dialogRef = this._injector.get(LyDialogRef);\n\n  get data() {\n    return this._injector.get(LY_DIALOG_DATA);\n  }\n\n  constructor(private _injector: Injector) { }\n}\n","import { Injector, Type, InjectionToken, InjectFlags } from '@angular/core';\n\nexport class DynamicInjector implements Injector {\n\n  constructor(private _newInjector: Injector, private _parentInjector: Injector) { }\n\n  get<T>(token: Type<T> | InjectionToken<T>, notFoundValue?: T, flags?: InjectFlags): T;\n  get(token: any, notFoundValue?: any);\n  get(token: any, notFoundValue?: any, _flags?: any) {\n    const value = this._newInjector.get(token, notFoundValue);\n\n    if (value) {\n      return value;\n    }\n\n    return this._parentInjector.get<any>(token, notFoundValue);\n  }\n}\n","import { Injectable, Type, TemplateRef, ComponentFactoryResolver, ComponentFactory, Injector, StaticProvider } from '@angular/core';\nimport { LyOverlay, LyOverlayRef, LyTheme2, STYLES_BACKDROP_DARK } from '@alyle/ui';\n\nimport { LyDialogContainer } from './dialog-container.component';\nimport { LyDialogRef } from './dialog-ref';\nimport { DynamicInjector } from './dynamic-injector';\nimport { LyDialogConfig } from './dialog-config';\nimport { LY_DIALOG_DATA } from './dialog-data';\n\n@Injectable()\nexport class LyDialog {\n\n  constructor(\n    private _overlay: LyOverlay,\n    private _componentFactoryResolver: ComponentFactoryResolver,\n    private _theme: LyTheme2,\n    private _injector: Injector\n  ) { }\n  open<T, DATA = unknown>(componentOrTemplateRef: Type<T> | TemplateRef<T>,\n                          config?: LyDialogConfig<DATA>): LyDialogRef {\n\n    // merge with default config\n    config = { ...new LyDialogConfig(), ...config };\n\n    let componentFactoryOrTemplate: ComponentFactory<any> | TemplateRef<any>;\n    if (componentOrTemplateRef instanceof TemplateRef) {\n      componentFactoryOrTemplate = componentOrTemplateRef;\n    } else {\n      componentFactoryOrTemplate = this._componentFactoryResolver.resolveComponentFactory(componentOrTemplateRef);\n    }\n\n    const onReziseScroll = () => {\n      // I would have used FlexBox to position, but not,\n      // because it creates a blurring effect in the text\n      // when the `dialog` is opened\n      const dialogContainerElement = overlayRef.containerElement;\n      const x = window.innerWidth / 2 - dialogContainerElement.offsetWidth / 2;\n      const y = window.innerHeight / 2 - dialogContainerElement.offsetHeight / 2;\n      dialogContainerElement.style.transform = `translate3d(${Math.round(x)}px, ${Math.round(y)}px, 0)`;\n    };\n\n    const overlayRef = this._overlay.create(LyDialogContainer, null, {\n      styles: {\n        top: 0,\n        left: 0\n      },\n      hasBackdrop: config.hasBackdrop,\n      onResizeScroll: onReziseScroll,\n      disableClose: config.disableClose,\n      backdropClass: config.backdropClass || this._theme.style(STYLES_BACKDROP_DARK),\n      fnDestroy: () => {\n        dialogRef.close();\n      }\n    });\n\n    const instance: LyDialogContainer = overlayRef.componentRef!.instance;\n    const dialogContainerStyle = instance._getHostElement().style;\n\n    dialogContainerStyle.width = toPx(config.width);\n    dialogContainerStyle.maxWidth = toPx(config.maxWidth);\n    dialogContainerStyle.minWidth = toPx(config.minWidth);\n    dialogContainerStyle.height = toPx(config.height);\n    dialogContainerStyle.maxHeight = toPx(config.maxHeight);\n    dialogContainerStyle.minHeight = toPx(config.minHeight);\n\n    const providers: StaticProvider[] = [\n      {\n        provide: LyDialogRef,\n        useValue: new LyDialogRef(overlayRef.componentRef!.injector.get(LyOverlayRef))\n      },\n      {\n        provide: LyDialogConfig,\n        useValue: config\n      }\n    ];\n\n    if (config.data != null) {\n      providers.push({\n        provide: LY_DIALOG_DATA,\n        useValue: config.data\n      });\n    }\n\n    const newInjector = new DynamicInjector(\n        Injector.create(providers, overlayRef.componentRef!.injector), this._injector);\n    instance._init(componentFactoryOrTemplate, newInjector);\n    const dialogRef = newInjector.get(LyDialogRef);\n    return dialogRef;\n  }\n}\n\n/**\n * convert number to px\n */\nfunction toPx(val: string | number | undefined | null): string | null {\n  if (typeof val === 'number') {\n    return `${val}px`;\n  } else if (val) {\n    return val;\n  }\n\n  return null;\n}\n","import { Directive, ElementRef, OnInit, Renderer2 } from '@angular/core';\nimport { LyTheme2, ThemeVariables } from '@alyle/ui';\n\n/** @docs-private */\nconst STYLE_PRIORITY = -2;\n\n/** @docs-private */\nconst STYLES_DIALOG_TITLE = (theme: ThemeVariables) => ({\n  display: 'block',\n  flex: '0 0 auto',\n  margin: '20px 0 16px',\n  padding: '0 24px',\n  fontSize: `20px`,\n  lineHeight: '24px',\n  fontWeight: 500,\n  fontFamily: theme.typography.fontFamily\n});\n\n@Directive({\n  selector: '[ly-dialog-title], [lyDialogTitle]',\n  exportAs: 'lyDialogTitle'\n})\nexport class LyDialogTitle implements OnInit {\n  constructor(\n    private _renderer: Renderer2,\n    private _el: ElementRef<HTMLElement>,\n    private _theme: LyTheme2) { }\n\n  ngOnInit() {\n    this._renderer.addClass(\n      this._el.nativeElement, this._theme.style(STYLES_DIALOG_TITLE, STYLE_PRIORITY));\n  }\n}\n","import { Directive, ElementRef, OnInit, Renderer2 } from '@angular/core';\nimport { LyTheme2 } from '@alyle/ui';\n\n/** @docs-private */\nconst STYLE_PRIORITY = -2;\n\n/** @docs-private */\nconst STYLES_DIALOG_CONTENT = ({\n  display: 'block',\n  overflowY: 'auto',\n  flex: '1 1 auto',\n  padding: '0 24px 24px',\n  '-webkit-overflow-scrolling': 'touch'\n});\n\n@Directive({\n  selector: 'ly-dialog-content, [ly-dialog-content], [lyDialogContent]',\n  exportAs: 'lyDialogContent'\n})\nexport class LyDialogContent implements OnInit {\n  constructor(\n    private _renderer: Renderer2,\n    private _el: ElementRef<HTMLElement>,\n    private _theme: LyTheme2) { }\n\n  ngOnInit() {\n    this._renderer.addClass(\n      this._el.nativeElement, this._theme.style(STYLES_DIALOG_CONTENT, STYLE_PRIORITY));\n  }\n}\n","import { Directive, ElementRef, OnInit, Renderer2 } from '@angular/core';\nimport { LyTheme2 } from '@alyle/ui';\n\n/** @docs-private */\nconst STYLE_PRIORITY = -2;\n\n/** @docs-private */\nconst STYLES_DIALOG_ACTIONS = ({\n  display: 'flex',\n  flex: '0 0 auto',\n  padding: '8px',\n  flexWrap: 'wrap',\n  minHeight: '52px',\n  alignItems: 'center'\n});\n\n@Directive({\n  selector: 'ly-dialog-actions, [ly-dialog-actions], [lyDialogActions]',\n  exportAs: 'lyDialogActions'\n})\nexport class LyDialogActions implements OnInit {\n  constructor(\n    private _renderer: Renderer2,\n    private _el: ElementRef<HTMLElement>,\n    private _theme: LyTheme2) { }\n\n  ngOnInit() {\n    this._renderer.addClass(\n      this._el.nativeElement, this._theme.style(STYLES_DIALOG_ACTIONS, STYLE_PRIORITY));\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { LyCommonModule, LyOverlayModule } from '@alyle/ui';\n\nimport { LyDialogContainer } from './dialog-container.component';\nimport { LyDialog } from './dialog';\nimport { LyDialogTitle } from './dialog-title.directive';\nimport { LyDialogContent } from './dialog-content.directive';\nimport { LyDialogActions } from './dialog-actions.directive';\n\n@NgModule({\n  entryComponents: [\n    LyDialogContainer\n  ],\n  declarations: [\n    LyDialogContainer,\n    LyDialogTitle,\n    LyDialogContent,\n    LyDialogActions\n  ],\n  imports: [\n    CommonModule,\n    LyCommonModule,\n    LyOverlayModule\n  ],\n  exports: [\n    LyCommonModule,\n    LyDialogContainer,\n    LyDialogTitle,\n    LyDialogContent,\n    LyDialogActions\n  ],\n  providers: [\n    LyDialog\n  ]\n})\nexport class LyDialogModule { }\n"],"names":["tslib_1.__decorate","STYLE_PRIORITY"],"mappings":"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"}