{"version":3,"file":"alyle-ui-badge.js","sources":["ng://@alyle/ui/badge/badge.ts","ng://@alyle/ui/badge/badge.module.ts"],"sourcesContent":["import {\n  Directive,\n  ElementRef,\n  Input,\n  OnChanges,\n  OnInit,\n  Renderer2,\n  OnDestroy\n  } from '@angular/core';\nimport {\n  LyTheme2,\n  mixinBg,\n  mixinColor,\n  mixinDisabled,\n  mixinElevation,\n  mixinOutlined,\n  mixinRaised,\n  mixinShadowColor,\n  mixinStyleUpdater,\n  ThemeVariables\n  } from '@alyle/ui';\n\nconst STYLE_PRIORITY = -2;\nconst DEFAULT_POSITION = 'startTop';\nconst DEFAULT_BG = 'primary';\nconst DEFAULT_POSITION_VALUE = {\n  after: '-11px',\n  above: '-11px'\n};\nexport const STYLES = (theme: ThemeVariables) => ({\n  $priority: STYLE_PRIORITY,\n  root: {\n    position: 'absolute',\n    display: 'flex',\n    width: '22px',\n    height: '22px',\n    borderRadius: '100%',\n    overflow: 'hidden',\n    whiteSpace: 'nowrap',\n    textOverflow: 'ellipsis',\n    pointerEvents: 'none',\n    zIndex: 1,\n    fontSize: theme.pxToRem(12),\n    fontFamily: theme.typography.fontFamily,\n    justifyContent: 'center',\n    alignItems: 'center',\n    boxSizing: 'border-box',\n    '&': theme.badge ? theme.badge.root : null\n  },\n  relative: {\n    position: 'relative'\n  }\n});\n\n/** @docs-private */\nexport class LyBadgeBase {\n  constructor(\n    public _theme: LyTheme2\n  ) { }\n}\n\n/** @docs-private */\nexport const LyBadgeMixinBase = mixinStyleUpdater(\nmixinBg(\n  mixinColor(\n    mixinRaised(\n      mixinDisabled(\n        mixinOutlined(\n          mixinElevation(\n            mixinShadowColor(LyBadgeBase))))))));\n\n@Directive({\n  selector: 'ly-badge, [lyBadge]',\n  inputs: [\n    'bg',\n    'color',\n    'raised',\n    'disabled',\n    'outlined',\n    'elevation',\n    'shadowColor'\n  ]\n})\nexport class LyBadge extends LyBadgeMixinBase implements OnChanges, OnInit, OnDestroy {\n  /**\n   * Styles\n   * @docs-private\n   */\n  readonly classes = this._theme.addStyleSheet(STYLES);\n  private _content: string | number;\n  private _position: string;\n  private _positionClass: string;\n  private _elContainer: any;\n  private _badgeElementRef: any;\n  private _lyBadgeBgClass: string;\n\n  /** The content for the badge */\n  @Input('lyBadge')\n  set content(val: string | number) {\n    if (val !== this.content) {\n      this._content = val;\n      this._createBadge();\n    }\n  }\n  get content(): string | number {\n    return this._content;\n  }\n\n  /** The position for the badge */\n  @Input('lyBadgePosition')\n  set position(val: string) {\n    if (val !== this.position) {\n      this._position = val;\n      this._positionClass = this._theme.addStyle(`ly-badge.position:${val}`, (theme: ThemeVariables) => {\n        const sty = theme.badge!.position && theme.badge!.position![val] || val === DEFAULT_POSITION ? DEFAULT_POSITION_VALUE : null;\n        if (sty) {\n          return sty;\n        } else {\n          throw new Error(`LyBadge.position \\`${val}\\` not found in \\`ThemeVariables\\``);\n        }\n      },\n      this._badgeElementRef, this._positionClass, STYLE_PRIORITY);\n    }\n\n  }\n  get position() {\n    return this._position;\n  }\n\n  /** The color of the badge */\n  @Input()\n  get lyBadgeBg() {\n    return this._lyBadgeBg;\n  }\n  set lyBadgeBg(val: string) {\n    if (val !== this.lyBadgeBg) {\n      this._lyBadgeBg = val;\n      this._lyBadgeBgClass = this._theme.addStyle(`ly-badge.bg:${val}`, (theme: ThemeVariables) => ({\n        backgroundColor: theme.colorOf(val),\n        color: theme.colorOf(`${val}:contrast`)\n      }),\n      this._badgeElementRef, this._lyBadgeBgClass, STYLE_PRIORITY);\n    }\n  }\n  private _lyBadgeBg: string;\n\n  constructor(\n    private _el: ElementRef,\n    _theme: LyTheme2,\n    private _renderer: Renderer2\n  ) {\n    super(_theme);\n    this.setAutoContrast();\n    this._badgeElementRef = this._el.nativeElement;\n  }\n\n  ngOnChanges() {\n    if (!this.content) {\n      this.updateStyle(this._el);\n    }\n  }\n\n  ngOnInit() {\n\n    /** Add root styles */\n    this._renderer.addClass(this._badgeElementRef, this.classes.root);\n\n    /** Set default position */\n    if (!this.position) {\n      this.position = DEFAULT_POSITION;\n    }\n\n    /** Set default bg */\n    if (this.content && !this.lyBadgeBg) {\n      this.lyBadgeBg = DEFAULT_BG;\n    }\n  }\n\n  ngOnDestroy() {\n    if (this._elContainer) {\n      this._renderer.removeChild(this._el.nativeElement, this._elContainer);\n    }\n  }\n\n  private _createBadge() {\n    if (!this._elContainer) {\n      const container = this._elContainer = this._renderer.createElement('div');\n      this._renderer.appendChild(this._el.nativeElement, container);\n      this._badgeElementRef = container;\n\n      /** Add position relative */\n      this._renderer.addClass(this._el.nativeElement, this.classes.relative);\n    }\n    this._elContainer.textContent = `${this.content}`;\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { LyCommonModule } from '@alyle/ui';\nimport { LyBadge } from './badge';\n\n@NgModule({\n  exports: [LyBadge, LyCommonModule],\n  declarations: [LyBadge]\n})\nexport class LyBadgeModule { }\n"],"names":["tslib_1.__extends","tslib_1.__decorate"],"mappings":"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"}