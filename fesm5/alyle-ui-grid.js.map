{"version":3,"file":"alyle-ui-grid.js.map","sources":["ng://@alyle/ui/grid/grid.ts","ng://@alyle/ui/grid/grid.module.ts"],"sourcesContent":["import { Directive, ElementRef, Input, Optional, Inject, OnInit } from '@angular/core';\nimport { LyTheme2, eachMedia } from '@alyle/ui';\nimport { LY_MEDIA_QUERIES } from '@alyle/ui/responsive';\n\nconst COL_VALUES = { };\n\nconst styles = ({\n  root: {\n    width: '100%',\n    display: 'flex',\n    flexWrap: 'wrap',\n    boxSizing: 'border-box'\n  }\n});\n\n/**\n * example:\n * <ly-grid container [spacing]=\"'16 8@XSmall'\">\n *   <ly-grid item [col]=\"'6 12@XSmall'\">\n *     <div>6 12@XSmall</div>\n *   </ly-grid>\n *   <ly-grid item [col]=\"'6 12@XSmall'\">\n *     <div>6 12@XSmall</div>\n *   </ly-grid>\n * </ly-grid>\n */\n@Directive({\n  selector: 'ly-grid[container]'\n})\nexport class LyGrid {\n  /**\n   * Styles\n   * @ignore\n   */\n  classes = this.theme.addStyleSheet(styles, 'lyGrid');\n  private _spacing: string | number;\n  private _spacingClass: string;\n  private _negativeMarginClass: string;\n\n  /**\n   * Defines the space between the component with the `item` attribute.\n   */\n  @Input()\n  get spacing(): string | number {\n    return this._spacing;\n  }\n  set spacing(val: string | number) {\n    if (val !== this.spacing) {\n      this._spacing = val;\n      this._spacingClass = this.theme.addStyle(`lyGrid-spacing:${val}`, () => {\n        if (typeof val === 'number') {\n          return `padding:${val / 2}px;`;\n        } else {\n          const spacingStyles: {\n            padding?: string\n          } = {};\n          eachMedia(val, (value, media, len) => {\n            const padding = `${(+value) / 2}px`;\n            if (len) {\n              spacingStyles[`@media ${this.mediaQueries[media]}`] = {\n                padding\n              };\n            } else {\n              spacingStyles.padding = padding;\n            }\n          });\n          return spacingStyles as any;\n        }\n      });\n      this._negativeMarginClass = this.theme.addStyle(`lyGrid-negative-margin:${val}`, () => {\n        if (typeof val === 'number') {\n          return `margin:${val / -2}px;width: calc(100% + ${val}px);`;\n        } else {\n          let negativeMarginStyles: {\n            margin?: string\n            width?: string\n          };\n          eachMedia(val, (value, media, len) => {\n            const negativeMarginstyles = {\n              margin: `${(-value) / 2}px`,\n              width: `calc(100% + ${value}px)`\n            };\n            if (len) {\n              if (!negativeMarginStyles) {\n                negativeMarginStyles = {};\n              }\n              negativeMarginStyles[`@media ${this.mediaQueries[media]}`] = negativeMarginstyles;\n            } else {\n              negativeMarginStyles = negativeMarginstyles;\n            }\n          });\n          return negativeMarginStyles as any;\n        }\n      }, this.elementRef.nativeElement, this._negativeMarginClass);\n    }\n  }\n\n  get spacingClass() {\n    return this._spacingClass;\n  }\n\n  constructor(\n    @Optional() @Inject(LY_MEDIA_QUERIES) private mediaQueries: any,\n    private theme: LyTheme2,\n    private elementRef: ElementRef,\n  ) {\n    this.elementRef.nativeElement.classList.add(this.classes.root);\n  }\n}\n\n@Directive({\n  selector: 'ly-grid[item]'\n})\nexport class LyGridCol implements OnInit {\n  private _col: string | number;\n  private _colClass: string;\n\n  @Input()\n  get col(): string | number {\n    return this._col;\n  }\n  set col(val: string | number) {\n    if (val !== this.col) {\n      this._colClass = this.theme.addStyle(`lyGrid-negative-margin:${val}`, () => {\n        if (typeof val === 'number') {\n          return getColStyle(val);\n        } else {\n          let colStyles: {\n            maxWidth?: string | number\n            flexBasis?: string | number\n            flexGrow?: number\n          };\n          eachMedia(val, (value, media, len) => {\n            const newColStyles = getColStyle(+value);\n            if (len) {\n              if (!colStyles) {\n                colStyles = {};\n              }\n              colStyles[`@media ${this.mediaQueries[media]}`] = newColStyles;\n            } else {\n              colStyles = newColStyles;\n            }\n          });\n          return colStyles as any;\n        }\n      }, this.el.nativeElement, this._colClass);\n    }\n  }\n\n  constructor(\n    @Optional() @Inject(LY_MEDIA_QUERIES) private mediaQueries: any,\n    private gridContainer: LyGrid,\n    private el: ElementRef,\n    private theme: LyTheme2\n  ) {\n    if (!gridContainer) {\n      throw new Error(`Rquire`);\n    }\n  }\n\n  ngOnInit() {\n    this._updateSpacing();\n  }\n\n  private _updateSpacing() {\n    if (this.gridContainer.spacingClass) {\n      this.el.nativeElement.classList.add(this.gridContainer.spacingClass);\n    }\n  }\n\n}\n\nfunction getColStyle(val: number) {\n  return {\n    maxWidth: val ? getColVal(val) : '100%',\n    flexBasis: val ? getColVal(val) : 0,\n    flexGrow: val ? 0 : 1\n  };\n}\n\nfunction getColVal(val: string | number): string {\n  return val in COL_VALUES\n              ? COL_VALUES[val]\n              : COL_VALUES[val] = `${+val * 100 / 12}%`;\n}\n","import { NgModule } from '@angular/core';\nimport { LyGrid, LyGridCol } from './grid';\n\n@NgModule({\n  exports: [LyGrid, LyGridCol],\n  declarations: [LyGrid, LyGridCol]\n})\nexport class LyGridModule { }\n"],"names":[],"mappings":"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"}
