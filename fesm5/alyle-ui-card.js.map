{"version":3,"file":"alyle-ui-card.js","sources":["ng://@alyle/ui/card/card.directive.ts","ng://@alyle/ui/card/card.module.ts"],"sourcesContent":["import {\n  Directive,\n  ElementRef,\n  Input,\n  NgZone,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Renderer2\n  } from '@angular/core';\nimport {\n  LyTheme2,\n  mixinBg,\n  mixinColor,\n  mixinDisabled,\n  mixinDisableRipple,\n  mixinElevation,\n  mixinOutlined,\n  mixinRaised,\n  mixinShadowColor,\n  mixinStyleUpdater,\n  ThemeVariables,\n  toBoolean\n  } from '@alyle/ui';\n\nexport const STYLES = (theme: ThemeVariables) => ({\n  $priority: STYLE_PRIORITY,\n  root: {\n    display: 'block',\n    overflow: 'hidden',\n    borderRadius: '2px',\n    '&': theme.card ? theme.card.root : null\n  },\n  content: {\n    display: 'block',\n    padding: '16px 24px',\n    [theme.getBreakpoint('XSmall')]: {\n      padding: '16px 16px'\n    }\n  },\n  actions: {\n    display: 'block',\n    padding: '8px 12px',\n    [theme.getBreakpoint('XSmall')]: {\n      padding: '8px 4px'\n    }\n  },\n  actionsItem: {\n    margin: '0 4px'\n  }\n});\n\nconst DEFAULT_ASPECT_RATIO = '16:9';\n\nconst STYLE_PRIORITY = -1;\n\n/** @docs-private */\nexport class LyCardBase {\n  constructor(\n    public _theme: LyTheme2,\n    public _ngZone: NgZone\n  ) { }\n}\n\n/** @docs-private */\nexport const LyCardMixinBase = mixinStyleUpdater(\nmixinBg(\n  mixinColor(\n    mixinRaised(\n      mixinDisabled(\n        mixinOutlined(\n          mixinElevation(\n            mixinShadowColor(\n              mixinDisableRipple(LyCardBase)))))))));\n\n@Directive({\n  selector: 'ly-card',\n  inputs: [\n    'bg',\n    'color',\n    'raised',\n    'outlined',\n    'elevation',\n    'shadowColor',\n    'disableRipple',\n  ]\n})\nexport class LyCard extends LyCardMixinBase implements OnChanges, OnInit, OnDestroy {\n  /**\n   * styles\n   * @docs-private\n   */\n  readonly classes = this.theme.addStyleSheet(STYLES);\n  constructor(\n    private theme: LyTheme2,\n    private _el: ElementRef,\n    private renderer: Renderer2,\n    ngZone: NgZone\n  ) {\n    super(theme, ngZone);\n    this.setAutoContrast();\n  }\n\n  ngOnChanges() {\n    this.updateStyle(this._el);\n  }\n\n  ngOnInit() {\n    let requireOnChanges: boolean | undefined;\n    if (!this.bg) {\n      this.bg = 'background:primary';\n      requireOnChanges = true;\n    }\n    if (!this.elevation) {\n      this.elevation = 2;\n      requireOnChanges = true;\n    }\n    if (requireOnChanges) {\n      this.updateStyle(this._el);\n    }\n    this.renderer.addClass(this._el.nativeElement, this.classes.root);\n  }\n\n  ngOnDestroy() {\n    this._removeRippleEvents();\n  }\n}\n\n@Directive({\n  selector: 'ly-card-content'\n})\nexport class LyCardContent implements OnInit {\n\n  constructor(\n    private el: ElementRef,\n    private renderer: Renderer2,\n    private card: LyCard\n  ) { }\n\n  ngOnInit() {\n    this.renderer.addClass(this.el.nativeElement, this.card.classes.content);\n  }\n}\n\n@Directive({\n  selector: 'ly-card-actions'\n})\nexport class LyCardActions implements OnInit {\n  @Input() disableActionSpacing: boolean;\n  constructor(\n    private el: ElementRef,\n    private renderer: Renderer2,\n    private card: LyCard\n  ) { }\n  ngOnInit() {\n    this.renderer.addClass(this.el.nativeElement, this.card.classes.actions);\n    if (!toBoolean(this.disableActionSpacing)) {\n      this.el.nativeElement.childNodes.forEach(element => {\n        this.renderer.addClass(element, this.card.classes.actionsItem);\n      });\n    }\n  }\n}\n\n@Directive({\n  selector: 'ly-card-media'\n})\nexport class LyCardMedia implements OnInit {\n  private _bgImg: string;\n  private _bgImgClass: string;\n\n  private _ratio: string;\n  private _ratioClass: string;\n\n  @Input()\n  set bgImg(val: string) {\n    if (val !== this.bgImg) {\n      this._bgImgClass = this._createBgImgClass(val, this._bgImgClass);\n    }\n  }\n  get bgImg() {\n    return this._bgImg;\n  }\n\n  /** Aspect ratio */\n  @Input()\n  set ratio(val: string) {\n    if (val !== this.ratio) {\n      this._createAspectRatioClass(val);\n    }\n  }\n  get ratio() {\n    return this._ratio;\n  }\n\n  constructor(\n    private el: ElementRef,\n    private renderer: Renderer2,\n    private theme: LyTheme2\n  ) { }\n\n  ngOnInit() {\n    if (!this.ratio) {\n      this.ratio = DEFAULT_ASPECT_RATIO;\n    }\n  }\n\n  private _createBgImgClass(val: string, instance: string) {\n    this._bgImg = val;\n    this.renderer.setStyle(this.el.nativeElement, `background-image`, `url(\"${val}\")`);\n    return this.theme.addStyle(\n      `lyCard-media:${val}`,\n      (\n        `display:block;` +\n        `background-size: cover;` +\n        `background-repeat: no-repeat;` +\n        `background-position: center;`\n      ),\n      this.el.nativeElement,\n      instance,\n      STYLE_PRIORITY\n    );\n  }\n\n  private _createAspectRatioClass(val: string) {\n    this._ratio = val;\n    this._ratioClass = this.theme.addStyle(\n      `lyCard-media-ar:${val}`, ({\n        '&:before': val.split(':').reduce((valorAnterior, valorActual) => {\n          return ({\n            paddingTop: `${+valorActual / +valorAnterior * 100}%`,\n            content: `\\'\\'`,\n            display: 'block'\n          }) as any;\n        })\n      }),\n      this.el.nativeElement,\n      this._ratioClass,\n      STYLE_PRIORITY\n    );\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { LyCard, LyCardContent, LyCardActions, LyCardMedia } from './card.directive';\nimport { LyCommonModule } from '@alyle/ui';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ],\n  exports: [LyCard, LyCardContent, LyCardActions, LyCardMedia, LyCommonModule],\n  declarations: [LyCard, LyCardContent, LyCardActions, LyCardMedia]\n})\nexport class LyCardModule { }\n"],"names":["tslib_1.__extends","tslib_1.__decorate"],"mappings":"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"}