import * as tslib_1 from "tslib";
import { Injectable, ElementRef, Optional } from '@angular/core';
import { LyTheme2, ThemeRef } from '../theme/theme2.service';
import { LyHostClass } from './host-class';
import { TypeStyle } from '../theme/style';
let StyleRenderer = class StyleRenderer {
    constructor(_el, _theme, _hostClass) {
        this._theme = _theme;
        this._hostClass = _hostClass;
    }
    /**
     * Build multiple styles and render them in the DOM
     */
    addSheet(styles) {
        return this._theme._createStyleContent2(styles, null, null, TypeStyle.Multiple);
    }
    add(id, style, priority, oldClass) {
        const args = arguments;
        /** Class name or keyframe name */
        let className;
        let len = args.length;
        // clean
        if (len === 4 && args[3] == null) {
            len -= 1;
        }
        if (len === 3 && args[2] == null) {
            len -= 1;
        }
        if (len === 1) {
            className = this._theme._createStyleContent2(id, null, null, TypeStyle.LylStyle);
        }
        else if (len === 2) {
            if (typeof id === 'string') {
                className = this._theme._createStyleContent2(style, id, null, TypeStyle.LylStyle);
            }
            else if (typeof style === 'number') {
                className = this._theme._createStyleContent2(id, null, style, TypeStyle.LylStyle);
            }
            else {
                className = this._theme._createStyleContent2(id, null, null, TypeStyle.LylStyle);
                oldClass = style;
            }
        }
        else if (len === 3) {
            if (typeof id === 'string') {
                if (typeof priority === 'number') {
                    // (id, style, priority)
                    className = this._theme._createStyleContent2(style, id, priority, TypeStyle.LylStyle);
                }
                else {
                    // (id, style, oldClass)
                    className = this._theme._createStyleContent2(style, id, null, TypeStyle.LylStyle);
                    oldClass = priority;
                }
            }
            else {
                // (style, priority, oldClass)
                className = this._theme._createStyleContent2(id, null, style, TypeStyle.LylStyle);
                oldClass = priority;
            }
        }
        else if (len === 4) {
            className = this._theme._createStyleContent2(style, id, priority, TypeStyle.LylStyle);
        }
        if (this._hostClass) {
            return this._hostClass.update(className, oldClass);
        }
        throw new Error(`LyHostClass is required `
            + `to update classes.\n\n`
            + `Add LyHostClass to Component or Directive:\n\n`
            + `e.g:\n\n`
            + `@Component({\n`
            + `  providers: [ LyHostClass ]\n`
            + `})\n`);
    }
};
StyleRenderer.ctorParameters = () => [
    { type: ElementRef },
    { type: LyTheme2 },
    { type: LyHostClass, decorators: [{ type: Optional }] }
];
StyleRenderer = tslib_1.__decorate([
    Injectable(),
    tslib_1.__param(2, Optional())
], StyleRenderer);
export { StyleRenderer };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVuZGVyZXItc3R5bGUuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AYWx5bGUvdWkvIiwic291cmNlcyI6WyJzcmMvbWluaW1hbC9yZW5kZXJlci1zdHlsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxVQUFVLEVBQUUsUUFBUSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ2pFLE9BQU8sRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFFN0QsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLGNBQWMsQ0FBQztBQUMzQyxPQUFPLEVBQUUsU0FBUyxFQUF1QixNQUFNLGdCQUFnQixDQUFDO0FBR2hFLElBQWEsYUFBYSxHQUExQixNQUFhLGFBQWE7SUFDeEIsWUFDRSxHQUFlLEVBQ1AsTUFBZ0IsRUFDSixVQUF1QjtRQURuQyxXQUFNLEdBQU4sTUFBTSxDQUFVO1FBQ0osZUFBVSxHQUFWLFVBQVUsQ0FBYTtJQUN6QyxDQUFDO0lBRUw7O09BRUc7SUFDSCxRQUFRLENBQUksTUFBb0I7UUFDOUIsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLG9CQUFvQixDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUNsRixDQUFDO0lBeUNELEdBQUcsQ0FDRCxFQUEyRCxFQUMzRCxLQUF3RSxFQUN4RSxRQUE2QyxFQUM3QyxRQUFvQztRQUVwQyxNQUFNLElBQUksR0FBRyxTQUFTLENBQUM7UUFDdkIsa0NBQWtDO1FBQ2xDLElBQUksU0FBNkIsQ0FBQztRQUNsQyxJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO1FBRXRCLFFBQVE7UUFDUixJQUFJLEdBQUcsS0FBSyxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksRUFBRTtZQUNoQyxHQUFHLElBQUksQ0FBQyxDQUFDO1NBQ1Y7UUFDRCxJQUFJLEdBQUcsS0FBSyxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksRUFBRTtZQUNoQyxHQUFHLElBQUksQ0FBQyxDQUFDO1NBQ1Y7UUFFRCxJQUFJLEdBQUcsS0FBSyxDQUFDLEVBQUU7WUFDYixTQUFTLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxvQkFBb0IsQ0FBQyxFQUFFLEVBQzdDLElBQUksRUFDSixJQUFJLEVBQ0osU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQ3ZCO2FBQU0sSUFBSSxHQUFHLEtBQUssQ0FBQyxFQUFFO1lBQ3BCLElBQUksT0FBTyxFQUFFLEtBQUssUUFBUSxFQUFFO2dCQUMxQixTQUFTLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxvQkFBb0IsQ0FBQyxLQUFxRCxFQUNoRyxFQUFFLEVBQ0YsSUFBSSxFQUNKLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQzthQUN2QjtpQkFBTSxJQUFJLE9BQU8sS0FBSyxLQUFLLFFBQVEsRUFBRTtnQkFDcEMsU0FBUyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsb0JBQW9CLENBQUMsRUFBa0QsRUFDN0YsSUFBSSxFQUNKLEtBQUssRUFDTCxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUM7YUFDdkI7aUJBQU07Z0JBQ0wsU0FBUyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsb0JBQW9CLENBQUMsRUFBa0QsRUFDN0YsSUFBSSxFQUNKLElBQUksRUFDSixTQUFTLENBQUMsUUFBUSxDQUFDLENBQUM7Z0JBQ3BCLFFBQVEsR0FBRyxLQUFlLENBQUM7YUFDOUI7U0FDRjthQUFNLElBQUksR0FBRyxLQUFLLENBQUMsRUFBRTtZQUNwQixJQUFJLE9BQU8sRUFBRSxLQUFLLFFBQVEsRUFBRTtnQkFDMUIsSUFBSSxPQUFPLFFBQVEsS0FBSyxRQUFRLEVBQUU7b0JBQ2hDLHdCQUF3QjtvQkFDeEIsU0FBUyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsb0JBQW9CLENBQUMsS0FBcUQsRUFDbEcsRUFBRSxFQUNGLFFBQVEsRUFDUixTQUFTLENBQUMsUUFBUSxDQUFDLENBQUM7aUJBQ3JCO3FCQUFNO29CQUNMLHdCQUF3QjtvQkFDeEIsU0FBUyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsb0JBQW9CLENBQUMsS0FBcUQsRUFDbEcsRUFBRSxFQUNGLElBQUksRUFDSixTQUFTLENBQUMsUUFBUSxDQUFDLENBQUM7b0JBQ3BCLFFBQVEsR0FBRyxRQUFRLENBQUM7aUJBQ3JCO2FBQ0Y7aUJBQU07Z0JBQ0wsOEJBQThCO2dCQUM5QixTQUFTLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxvQkFBb0IsQ0FBQyxFQUFrRCxFQUM3RixJQUFJLEVBQ0osS0FBZSxFQUNmLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQztnQkFDdEIsUUFBUSxHQUFHLFFBQWtCLENBQUM7YUFDL0I7U0FDRjthQUFNLElBQUksR0FBRyxLQUFLLENBQUMsRUFBRTtZQUNwQixTQUFTLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxvQkFBb0IsQ0FBQyxLQUFxRCxFQUNoRyxFQUFZLEVBQ1osUUFBa0IsRUFDbEIsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQ3ZCO1FBQ0QsSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFO1lBQ25CLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsU0FBVSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1NBQ3JEO1FBQ0QsTUFBTSxJQUFJLEtBQUssQ0FDYiwwQkFBMEI7Y0FDeEIsd0JBQXdCO2NBQ3hCLGdEQUFnRDtjQUNoRCxVQUFVO2NBQ1YsZ0JBQWdCO2NBQ2hCLGdDQUFnQztjQUNoQyxNQUFNLENBQ1QsQ0FBQztJQUNKLENBQUM7Q0FDRixDQUFBOztZQXhJUSxVQUFVO1lBQ0MsUUFBUTtZQUNRLFdBQVcsdUJBQTFDLFFBQVE7O0FBSkEsYUFBYTtJQUR6QixVQUFVLEVBQUU7SUFLUixtQkFBQSxRQUFRLEVBQUUsQ0FBQTtHQUpGLGFBQWEsQ0EwSXpCO1NBMUlZLGFBQWEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlLCBFbGVtZW50UmVmLCBPcHRpb25hbCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTHlUaGVtZTIsIFRoZW1lUmVmIH0gZnJvbSAnLi4vdGhlbWUvdGhlbWUyLnNlcnZpY2UnO1xuaW1wb3J0IHsgU3R5bGVUZW1wbGF0ZSB9IGZyb20gJy4uL3BhcnNlJztcbmltcG9ydCB7IEx5SG9zdENsYXNzIH0gZnJvbSAnLi9ob3N0LWNsYXNzJztcbmltcG9ydCB7IFR5cGVTdHlsZSwgTHlTdHlsZXMsIEx5Q2xhc3NlcyB9IGZyb20gJy4uL3RoZW1lL3N0eWxlJztcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIFN0eWxlUmVuZGVyZXIge1xuICBjb25zdHJ1Y3RvcihcbiAgICBfZWw6IEVsZW1lbnRSZWYsXG4gICAgcHJpdmF0ZSBfdGhlbWU6IEx5VGhlbWUyLFxuICAgIEBPcHRpb25hbCgpIHByaXZhdGUgX2hvc3RDbGFzczogTHlIb3N0Q2xhc3NcbiAgKSB7IH1cblxuICAvKipcbiAgICogQnVpbGQgbXVsdGlwbGUgc3R5bGVzIGFuZCByZW5kZXIgdGhlbSBpbiB0aGUgRE9NXG4gICAqL1xuICBhZGRTaGVldDxUPihzdHlsZXM6IFQgJiBMeVN0eWxlcyk6IEx5Q2xhc3NlczxUPiB7XG4gICAgcmV0dXJuIHRoaXMuX3RoZW1lLl9jcmVhdGVTdHlsZUNvbnRlbnQyKHN0eWxlcywgbnVsbCwgbnVsbCwgVHlwZVN0eWxlLk11bHRpcGxlKTtcbiAgfVxuXG4gIGFkZChcbiAgICBzdHlsZTogKHRoZW1lOiBhbnksIHJlZjogVGhlbWVSZWYpID0+IFN0eWxlVGVtcGxhdGVcbiAgKTogc3RyaW5nO1xuICBhZGQoXG4gICAgc3R5bGU6ICh0aGVtZTogYW55LCByZWY6IFRoZW1lUmVmKSA9PiBTdHlsZVRlbXBsYXRlLFxuICAgIHByaW9yaXR5OiBudW1iZXJcbiAgKTogc3RyaW5nO1xuICBhZGQoXG4gICAgc3R5bGU6ICh0aGVtZTogYW55LCByZWY6IFRoZW1lUmVmKSA9PiBTdHlsZVRlbXBsYXRlLFxuICAgIG9sZENsYXNzOiBzdHJpbmdcbiAgKTogc3RyaW5nO1xuICBhZGQoXG4gICAgaWQ6IHN0cmluZyxcbiAgICBzdHlsZTogKHRoZW1lOiBhbnksIHJlZjogVGhlbWVSZWYpID0+IFN0eWxlVGVtcGxhdGVcbiAgKTogc3RyaW5nO1xuXG4gIGFkZChcbiAgICBzdHlsZTogKHRoZW1lOiBhbnksIHJlZjogVGhlbWVSZWYpID0+IFN0eWxlVGVtcGxhdGUsXG4gICAgcHJpb3JpdHk6IG51bWJlcixcbiAgICBvbGRDbGFzczogc3RyaW5nIHwgbnVsbFxuICApOiBzdHJpbmc7XG4gIGFkZChcbiAgICBpZDogc3RyaW5nLFxuICAgIHN0eWxlOiAodGhlbWU6IGFueSwgcmVmOiBUaGVtZVJlZikgPT4gU3R5bGVUZW1wbGF0ZSxcbiAgICBwcmlvcml0eTogbnVtYmVyXG4gICk6IHN0cmluZztcbiAgYWRkKFxuICAgIGlkOiBzdHJpbmcsXG4gICAgc3R5bGU6ICh0aGVtZTogYW55LCByZWY6IFRoZW1lUmVmKSA9PiBTdHlsZVRlbXBsYXRlLFxuICAgIG9sZENsYXNzOiBzdHJpbmcgfCBudWxsXG4gICk6IHN0cmluZztcblxuICBhZGQoXG4gICAgaWQ6IHN0cmluZyxcbiAgICBzdHlsZTogKHRoZW1lOiBhbnksIHJlZjogVGhlbWVSZWYpID0+IFN0eWxlVGVtcGxhdGUsXG4gICAgcHJpb3JpdHk6IG51bWJlcixcbiAgICBvbGRDbGFzczogc3RyaW5nIHwgbnVsbFxuICApOiBzdHJpbmc7XG5cbiAgYWRkKFxuICAgIGlkOiBzdHJpbmcgfCAoKHRoZW1lOiBhbnksIHJlZjogVGhlbWVSZWYpID0+IFN0eWxlVGVtcGxhdGUpLFxuICAgIHN0eWxlPzogKCh0aGVtZTogYW55LCByZWY6IFRoZW1lUmVmKSA9PiBTdHlsZVRlbXBsYXRlKSB8IG51bWJlciB8IHN0cmluZyxcbiAgICBwcmlvcml0eT86IG51bWJlciB8IHN0cmluZyB8IHVuZGVmaW5lZCB8IG51bGwsXG4gICAgb2xkQ2xhc3M/OiBzdHJpbmcgfCB1bmRlZmluZWQgfCBudWxsXG4gICk6IHN0cmluZyB7XG4gICAgY29uc3QgYXJncyA9IGFyZ3VtZW50cztcbiAgICAvKiogQ2xhc3MgbmFtZSBvciBrZXlmcmFtZSBuYW1lICovXG4gICAgbGV0IGNsYXNzTmFtZTogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgIGxldCBsZW4gPSBhcmdzLmxlbmd0aDtcblxuICAgIC8vIGNsZWFuXG4gICAgaWYgKGxlbiA9PT0gNCAmJiBhcmdzWzNdID09IG51bGwpIHtcbiAgICAgIGxlbiAtPSAxO1xuICAgIH1cbiAgICBpZiAobGVuID09PSAzICYmIGFyZ3NbMl0gPT0gbnVsbCkge1xuICAgICAgbGVuIC09IDE7XG4gICAgfVxuXG4gICAgaWYgKGxlbiA9PT0gMSkge1xuICAgICAgY2xhc3NOYW1lID0gdGhpcy5fdGhlbWUuX2NyZWF0ZVN0eWxlQ29udGVudDIoaWQsXG4gICAgICAgIG51bGwsXG4gICAgICAgIG51bGwsXG4gICAgICAgIFR5cGVTdHlsZS5MeWxTdHlsZSk7XG4gICAgfSBlbHNlIGlmIChsZW4gPT09IDIpIHtcbiAgICAgIGlmICh0eXBlb2YgaWQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGNsYXNzTmFtZSA9IHRoaXMuX3RoZW1lLl9jcmVhdGVTdHlsZUNvbnRlbnQyKHN0eWxlIGFzICh0aGVtZTogYW55LCByZWY6IFRoZW1lUmVmKSA9PiBTdHlsZVRlbXBsYXRlLFxuICAgICAgICAgIGlkLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgVHlwZVN0eWxlLkx5bFN0eWxlKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHN0eWxlID09PSAnbnVtYmVyJykge1xuICAgICAgICBjbGFzc05hbWUgPSB0aGlzLl90aGVtZS5fY3JlYXRlU3R5bGVDb250ZW50MihpZCBhcyAodGhlbWU6IGFueSwgcmVmOiBUaGVtZVJlZikgPT4gU3R5bGVUZW1wbGF0ZSxcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIHN0eWxlLFxuICAgICAgICAgIFR5cGVTdHlsZS5MeWxTdHlsZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjbGFzc05hbWUgPSB0aGlzLl90aGVtZS5fY3JlYXRlU3R5bGVDb250ZW50MihpZCBhcyAodGhlbWU6IGFueSwgcmVmOiBUaGVtZVJlZikgPT4gU3R5bGVUZW1wbGF0ZSxcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgVHlwZVN0eWxlLkx5bFN0eWxlKTtcbiAgICAgICAgICBvbGRDbGFzcyA9IHN0eWxlIGFzIHN0cmluZztcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGxlbiA9PT0gMykge1xuICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwcmlvcml0eSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAvLyAoaWQsIHN0eWxlLCBwcmlvcml0eSlcbiAgICAgICAgICBjbGFzc05hbWUgPSB0aGlzLl90aGVtZS5fY3JlYXRlU3R5bGVDb250ZW50MihzdHlsZSBhcyAodGhlbWU6IGFueSwgcmVmOiBUaGVtZVJlZikgPT4gU3R5bGVUZW1wbGF0ZSxcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBwcmlvcml0eSxcbiAgICAgICAgICBUeXBlU3R5bGUuTHlsU3R5bGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIChpZCwgc3R5bGUsIG9sZENsYXNzKVxuICAgICAgICAgIGNsYXNzTmFtZSA9IHRoaXMuX3RoZW1lLl9jcmVhdGVTdHlsZUNvbnRlbnQyKHN0eWxlIGFzICh0aGVtZTogYW55LCByZWY6IFRoZW1lUmVmKSA9PiBTdHlsZVRlbXBsYXRlLFxuICAgICAgICAgIGlkLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgVHlwZVN0eWxlLkx5bFN0eWxlKTtcbiAgICAgICAgICBvbGRDbGFzcyA9IHByaW9yaXR5O1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyAoc3R5bGUsIHByaW9yaXR5LCBvbGRDbGFzcylcbiAgICAgICAgY2xhc3NOYW1lID0gdGhpcy5fdGhlbWUuX2NyZWF0ZVN0eWxlQ29udGVudDIoaWQgYXMgKHRoZW1lOiBhbnksIHJlZjogVGhlbWVSZWYpID0+IFN0eWxlVGVtcGxhdGUsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBzdHlsZSBhcyBudW1iZXIsXG4gICAgICAgICAgVHlwZVN0eWxlLkx5bFN0eWxlKTtcbiAgICAgICAgb2xkQ2xhc3MgPSBwcmlvcml0eSBhcyBzdHJpbmc7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChsZW4gPT09IDQpIHtcbiAgICAgIGNsYXNzTmFtZSA9IHRoaXMuX3RoZW1lLl9jcmVhdGVTdHlsZUNvbnRlbnQyKHN0eWxlIGFzICh0aGVtZTogYW55LCByZWY6IFRoZW1lUmVmKSA9PiBTdHlsZVRlbXBsYXRlLFxuICAgICAgICBpZCBhcyBzdHJpbmcsXG4gICAgICAgIHByaW9yaXR5IGFzIG51bWJlcixcbiAgICAgICAgVHlwZVN0eWxlLkx5bFN0eWxlKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2hvc3RDbGFzcykge1xuICAgICAgcmV0dXJuIHRoaXMuX2hvc3RDbGFzcy51cGRhdGUoY2xhc3NOYW1lISwgb2xkQ2xhc3MpO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgTHlIb3N0Q2xhc3MgaXMgcmVxdWlyZWQgYFxuICAgICAgKyBgdG8gdXBkYXRlIGNsYXNzZXMuXFxuXFxuYFxuICAgICAgKyBgQWRkIEx5SG9zdENsYXNzIHRvIENvbXBvbmVudCBvciBEaXJlY3RpdmU6XFxuXFxuYFxuICAgICAgKyBgZS5nOlxcblxcbmBcbiAgICAgICsgYEBDb21wb25lbnQoe1xcbmBcbiAgICAgICsgYCAgcHJvdmlkZXJzOiBbIEx5SG9zdENsYXNzIF1cXG5gXG4gICAgICArIGB9KVxcbmBcbiAgICApO1xuICB9XG59XG5cbiJdfQ==