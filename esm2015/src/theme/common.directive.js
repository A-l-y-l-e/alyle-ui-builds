/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
import { Directive, Input, ElementRef } from '@angular/core';
import { LyTheme2 } from './theme2.service';
import { toBoolean } from '../minimal';
import { shadowBuilder } from '../shadow';
/** @type {?} */
const DEFAULT_VALUE = '';
export class LyCommon {
    /**
     * @param {?} theme
     * @param {?} elementRef
     */
    constructor(theme, elementRef) {
        this.theme = theme;
        this.elementRef = elementRef;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set raised(val) { this._raised = toBoolean(val); }
    /**
     * @return {?}
     */
    get raised() { return this._raised; }
    /**
     * @param {?} val
     * @return {?}
     */
    set disabled(val) { this._disabled = toBoolean(val); }
    /**
     * @return {?}
     */
    get disabled() { return this._disabled; }
    /**
     * @param {?} val
     * @return {?}
     */
    set outlined(val) { this._outlined = toBoolean(val); }
    /**
     * @return {?}
     */
    get outlined() { return this._outlined; }
    /**
     * @return {?}
     */
    setAutoContrast() {
        this._autoContrast = true;
    }
    /**
     * @return {?}
     */
    ngOnChanges() {
        this._isContrast = this._autoContrast && !this.color || this.color === 'auto';
        /** @type {?} */
        const newKey = `common----:${this.bg || DEFAULT_VALUE}·${this.color || DEFAULT_VALUE}·${this.raised || DEFAULT_VALUE}·${this.elevation || DEFAULT_VALUE}·${this.disabled || DEFAULT_VALUE}·${this.outlined || DEFAULT_VALUE}·${this.shadowColor || DEFAULT_VALUE}·${this._isContrast || DEFAULT_VALUE}`;
        this._className = this.theme.addStyle(newKey, (theme) => {
            /** @type {?} */
            const style = {};
            if (this.outlined) {
                style.border = '1px solid currentColor';
            }
            if (this.disabled) {
                style.color = theme.text.disabled;
                style.pointerEvents = 'none';
                if (this.bg) {
                    style.background = theme.button.disabled;
                }
            }
            else {
                if (this.bg) {
                    style.background = theme.colorOf(this.bg);
                    if (this._isContrast) {
                        style.color = theme.colorOf(`${this.bg}:contrast`);
                    }
                }
                if (!style.color && this.color) {
                    style.color = theme.colorOf(this.color);
                }
                if (this.raised || this.elevation) {
                    /** @type {?} */
                    const shadowColor = (this.shadowColor && theme.colorOf(this.shadowColor)) || style.background || style.color || theme.colorShadow;
                    if (!this.bg) {
                        style.background = theme.background.primary;
                    }
                    style.boxShadow = shadowBuilder(this.elevation || 3, shadowColor);
                    if (!this.elevation) {
                        style['&:active'] = {
                            boxShadow: shadowBuilder(8, shadowColor)
                        };
                    }
                }
            }
            return /** @type {?} */ (style);
        }, this._getHostElement(), this._className);
    }
    /**
     * @return {?}
     */
    _getHostElement() {
        return this.elementRef.nativeElement;
    }
}
LyCommon.decorators = [
    { type: Directive, args: [{
                selector: `
            [bg],
            [color],
            [raised],
            [raised][shadowColor],
            [ly-button][outlined],
            [elevation],
            [elevation][shadowColor],
            [disabled],
            ly-card
            `
            },] },
];
/** @nocollapse */
LyCommon.ctorParameters = () => [
    { type: LyTheme2 },
    { type: ElementRef }
];
LyCommon.propDecorators = {
    bg: [{ type: Input }],
    color: [{ type: Input }],
    raised: [{ type: Input }],
    disabled: [{ type: Input }],
    outlined: [{ type: Input }],
    elevation: [{ type: Input }],
    shadowColor: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    LyCommon.prototype._raised;
    /** @type {?} */
    LyCommon.prototype._outlined;
    /** @type {?} */
    LyCommon.prototype._disabled;
    /** @type {?} */
    LyCommon.prototype._className;
    /** @type {?} */
    LyCommon.prototype._autoContrast;
    /** @type {?} */
    LyCommon.prototype._isContrast;
    /** @type {?} */
    LyCommon.prototype.bg;
    /** @type {?} */
    LyCommon.prototype.color;
    /** @type {?} */
    LyCommon.prototype.elevation;
    /** @type {?} */
    LyCommon.prototype.shadowColor;
    /** @type {?} */
    LyCommon.prototype.theme;
    /** @type {?} */
    LyCommon.prototype.elementRef;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tbW9uLmRpcmVjdGl2ZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BhbHlsZS91aS8iLCJzb3VyY2VzIjpbInNyYy90aGVtZS9jb21tb24uZGlyZWN0aXZlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBYSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDeEUsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQzVDLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxZQUFZLENBQUM7QUFDdkMsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLFdBQVcsQ0FBQzs7QUFFMUMsTUFBTSxhQUFhLEdBQUcsRUFBRSxDQUFDO0FBZXpCLE1BQU07Ozs7O0lBdUJKLFlBQ1UsT0FDQTtRQURBLFVBQUssR0FBTCxLQUFLO1FBQ0wsZUFBVSxHQUFWLFVBQVU7S0FDaEI7Ozs7O0lBZEosSUFBYSxNQUFNLENBQUMsR0FBWSxJQUFJLElBQUksQ0FBQyxPQUFPLEdBQUcsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUU7Ozs7SUFDcEUsSUFBSSxNQUFNLEtBQUssT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUU7Ozs7O0lBRXJDLElBQWEsUUFBUSxDQUFDLEdBQVksSUFBSSxJQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFOzs7O0lBQ3hFLElBQUksUUFBUSxLQUFLLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFOzs7OztJQUV6QyxJQUFhLFFBQVEsQ0FBQyxHQUFZLElBQUksSUFBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRTs7OztJQUN4RSxJQUFJLFFBQVEsS0FBSyxPQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRTs7OztJQVNsQyxlQUFlO1FBQ3BCLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxD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QztLQUM3Qzs7OztJQUVPLGVBQWU7UUFDckIsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLGFBQWEsQ0FBQzs7OztZQTNHeEMsU0FBUyxTQUFDO2dCQUNULFFBQVEsRUFBRTs7Ozs7Ozs7OzthQVVDO2FBQ1o7Ozs7WUFsQlEsUUFBUTtZQURxQixVQUFVOzs7aUJBNEI3QyxLQUFLO29CQUVMLEtBQUs7cUJBRUwsS0FBSzt1QkFHTCxLQUFLO3VCQUdMLEtBQUs7d0JBR0wsS0FBSzswQkFDTCxLQUFLIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGlyZWN0aXZlLCBJbnB1dCwgT25DaGFuZ2VzLCBFbGVtZW50UmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBMeVRoZW1lMiB9IGZyb20gJy4vdGhlbWUyLnNlcnZpY2UnO1xuaW1wb3J0IHsgdG9Cb29sZWFuIH0gZnJvbSAnLi4vbWluaW1hbCc7XG5pbXBvcnQgeyBzaGFkb3dCdWlsZGVyIH0gZnJvbSAnLi4vc2hhZG93JztcblxuY29uc3QgREVGQVVMVF9WQUxVRSA9ICcnO1xuXG5ARGlyZWN0aXZlKHtcbiAgc2VsZWN0b3I6IGBcbiAgICAgICAgICAgIFtiZ10sXG4gICAgICAgICAgICBbY29sb3JdLFxuICAgICAgICAgICAgW3JhaXNlZF0sXG4gICAgICAgICAgICBbcmFpc2VkXVtzaGFkb3dDb2xvcl0sXG4gICAgICAgICAgICBbbHktYnV0dG9uXVtvdXRsaW5lZF0sXG4gICAgICAgICAgICBbZWxldmF0aW9uXSxcbiAgICAgICAgICAgIFtlbGV2YXRpb25dW3NoYWRvd0NvbG9yXSxcbiAgICAgICAgICAgIFtkaXNhYmxlZF0sXG4gICAgICAgICAgICBseS1jYXJkXG4gICAgICAgICAgICBgXG59KVxuZXhwb3J0IGNsYXNzIEx5Q29tbW9uIGltcGxlbWVudHMgT25DaGFuZ2VzIHtcbiAgcHJpdmF0ZSBfcmFpc2VkOiBib29sZWFuO1xuICBwcml2YXRlIF9vdXRsaW5lZDogYm9vbGVhbjtcbiAgcHJpdmF0ZSBfZGlzYWJsZWQ6IGJvb2xlYW47XG4gIHByaXZhdGUgX2NsYXNzTmFtZTogc3RyaW5nO1xuICBwcml2YXRlIF9hdXRvQ29udHJhc3Q6IGJvb2xlYW47XG4gIHByaXZhdGUgX2lzQ29udHJhc3Q6IGJvb2xlYW47XG5cbiAgQElucHV0KCkgYmc6IHN0cmluZztcblxuICBASW5wdXQoKSBjb2xvcjogc3RyaW5nO1xuXG4gIEBJbnB1dCgpIHNldCByYWlzZWQodmFsOiBib29sZWFuKSB7IHRoaXMuX3JhaXNlZCA9IHRvQm9vbGVhbih2YWwpOyB9XG4gIGdldCByYWlzZWQoKSB7IHJldHVybiB0aGlzLl9yYWlzZWQ7IH1cblxuICBASW5wdXQoKSBzZXQgZGlzYWJsZWQodmFsOiBib29sZWFuKSB7IHRoaXMuX2Rpc2FibGVkID0gdG9Cb29sZWFuKHZhbCk7IH1cbiAgZ2V0IGRpc2FibGVkKCkgeyByZXR1cm4gdGhpcy5fZGlzYWJsZWQ7IH1cblxuICBASW5wdXQoKSBzZXQgb3V0bGluZWQodmFsOiBib29sZWFuKSB7IHRoaXMuX291dGxpbmVkID0gdG9Cb29sZWFuKHZhbCk7IH1cbiAgZ2V0IG91dGxpbmVkKCkgeyByZXR1cm4gdGhpcy5fb3V0bGluZWQ7IH1cblxuICBASW5wdXQoKSBlbGV2YXRpb246IG51bWJlcjtcbiAgQElucHV0KCkgc2hhZG93Q29sb3I6IHN0cmluZztcbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSB0aGVtZTogTHlUaGVtZTIsXG4gICAgcHJpdmF0ZSBlbGVtZW50UmVmOiBFbGVtZW50UmVmXG4gICkge31cblxuICBwdWJsaWMgc2V0QXV0b0NvbnRyYXN0KCkge1xuICAgIHRoaXMuX2F1dG9Db250cmFzdCA9IHRydWU7XG4gIH1cblxuICBuZ09uQ2hhbmdlcygpIHtcbiAgICB0aGlzLl9pc0NvbnRyYXN0ID0gdGhpcy5fYXV0b0NvbnRyYXN0ICYmICF0aGlzLmNvbG9yIHx8IHRoaXMuY29sb3IgPT09ICdhdXRvJztcbiAgICBjb25zdCBuZXdLZXkgPSBgY29tbW9uLS0tLToke1xuICAgICAgdGhpcy5iZyB8fCBERUZBVUxUX1ZBTFVFfcK3JHtcbiAgICAgICAgdGhpcy5jb2xvciB8fCBERUZBVUxUX1ZBTFVFfcK3JHtcbiAgICAgICAgICB0aGlzLnJhaXNlZCB8fCBERUZBVUxUX1ZBTFVFfcK3JHtcbiAgICAgICAgICAgIHRoaXMuZWxldmF0aW9uIHx8IERFRkFVTFRfVkFMVUV9wrcke1xuICAgICAgICAgICAgICB0aGlzLmRpc2FibGVkIHx8IERFRkFVTFRfVkFMVUV9wrcke1xuICAgICAgICAgICAgICAgIHRoaXMub3V0bGluZWQgfHwgREVGQVVMVF9WQUxVRX3CtyR7XG4gICAgICAgICAgICAgICAgICB0aGlzLnNoYWRvd0NvbG9yIHx8IERFRkFVTFRfVkFMVUV9wrcke1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pc0NvbnRyYXN0IHx8IERFRkFVTFRfVkFMVUV9YDtcbiAgICB0aGlzLl9jbGFzc05hbWUgPSB0aGlzLnRoZW1lLmFkZFN0eWxlKG5ld0tleSwgKHRoZW1lKSA9PiB7XG4gICAgICBjb25zdCBzdHlsZToge1xuICAgICAgICBib3JkZXI/OiBzdHJpbmcsXG4gICAgICAgIGJhY2tncm91bmQ/OiBzdHJpbmcsXG4gICAgICAgIGNvbG9yPzogc3RyaW5nLFxuICAgICAgICBib3hTaGFkb3c/OiBzdHJpbmcsXG4gICAgICAgIHBvaW50ZXJFdmVudHM/OiAnbm9uZSc7XG4gICAgICAgICcmOmhvdmVyJz86IHtcbiAgICAgICAgICBib3hTaGFkb3c/OiBzdHJpbmdcbiAgICAgICAgfSxcbiAgICAgICAgJyY6YWN0aXZlJz86IHtcbiAgICAgICAgICBib3hTaGFkb3c/OiBzdHJpbmdcbiAgICAgICAgfVxuICAgICAgfSA9IHt9O1xuICAgICAgaWYgKHRoaXMub3V0bGluZWQpIHtcbiAgICAgICAgc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCBjdXJyZW50Q29sb3InO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgc3R5bGUuY29sb3IgPSB0aGVtZS50ZXh0LmRpc2FibGVkO1xuICAgICAgICBzdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xuICAgICAgICBpZiAodGhpcy5iZykge1xuICAgICAgICAgIHN0eWxlLmJhY2tncm91bmQgPSB0aGVtZS5idXR0b24uZGlzYWJsZWQ7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGlzLmJnKSB7XG4gICAgICAgICAgc3R5bGUuYmFja2dyb3VuZCA9IHRoZW1lLmNvbG9yT2YodGhpcy5iZyk7XG4gICAgICAgICAgaWYgKHRoaXMuX2lzQ29udHJhc3QpIHtcbiAgICAgICAgICAgIHN0eWxlLmNvbG9yID0gdGhlbWUuY29sb3JPZihgJHt0aGlzLmJnfTpjb250cmFzdGApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXN0eWxlLmNvbG9yICYmIHRoaXMuY29sb3IpIHtcbiAgICAgICAgICBzdHlsZS5jb2xvciA9IHRoZW1lLmNvbG9yT2YodGhpcy5jb2xvcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucmFpc2VkIHx8IHRoaXMuZWxldmF0aW9uKSB7XG4gICAgICAgICAgY29uc3Qgc2hhZG93Q29sb3IgPSAodGhpcy5zaGFkb3dDb2xvciAmJiB0aGVtZS5jb2xvck9mKHRoaXMuc2hhZG93Q29sb3IpKSB8fCBzdHlsZS5iYWNrZ3JvdW5kIHx8IHN0eWxlLmNvbG9yIHx8IHRoZW1lLmNvbG9yU2hhZG93O1xuICAgICAgICAgIGlmICghdGhpcy5iZykge1xuICAgICAgICAgICAgc3R5bGUuYmFja2dyb3VuZCA9IHRoZW1lLmJhY2tncm91bmQucHJpbWFyeTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc3R5bGUuYm94U2hhZG93ID0gc2hhZG93QnVpbGRlcih0aGlzLmVsZXZhdGlvbiB8fCAzLCBzaGFkb3dDb2xvcik7XG4gICAgICAgICAgaWYgKCF0aGlzLmVsZXZhdGlvbikge1xuICAgICAgICAgICAgc3R5bGVbJyY6YWN0aXZlJ10gPSB7XG4gICAgICAgICAgICAgIGJveFNoYWRvdzogc2hhZG93QnVpbGRlcig4LCBzaGFkb3dDb2xvcilcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gc3R5bGUgYXMgYW55O1xuICAgIH0sIHRoaXMuX2dldEhvc3RFbGVtZW50KCksIHRoaXMuX2NsYXNzTmFtZSk7XG4gIH1cblxuICBwcml2YXRlIF9nZXRIb3N0RWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQ7XG4gIH1cbn1cbiJdfQ==