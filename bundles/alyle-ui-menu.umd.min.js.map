{"version":3,"sources":["ng://@alyle/ui/menu/menu.ts","ng://@alyle/ui/menu/menu.module.ts"],"names":["Origin","LyTemplateMenu","_viewContainerRef","this","prototype","ngOnInit","tmpl","template","_vcr","createEmbeddedView","ngOnDestroy","console","log","Component","args","selector","styles","ViewContainerRef","ViewChild","read","LyMenuDeprecated","elementRef","domService","cd","sanitizer","top","left","horizontal","vertical","BehaviorSubject","EventEmitter","ngOnChanges","changes","Promise","resolve","then","updateTargetPosition","_targetOrigin","menuStyle","bypassSecurityTrustStyle","_targetPosition","next","target","_element","element","width","offsetWidth","height","offsetHeight","Object","defineProperty","_anchorOrigin","rootMenu","positionFinal","toggleMenu","opened","showMenu","hiddeMenu","menuAnimationsState","menuContentRef","attach","templateRef","stateBg","open","emit","close","_destroyMenu","destroyRef","ngAfterViewInit","Platform","isBrowser","animations","trigger","transition","animate","style","opacity","state","exportAs","preserveWhitespaces","ElementRef","DomService","ChangeDetectorRef","DomSanitizer","Input","TemplateRef","Output","menuStyles","theme","root","background","primary","borderRadius","boxShadow","shadowBuilder","display","paddingTop","paddingBottom","transformOrigin","LyMenu","_el","addStyleSheet","nativeElement","classList","add","classes","endAnimation","e","toState","ref","destroy","keyframes","transform","LyTheme2","HostBinding","HostListener","menuItemStyles","minHeight","LyMenuItem","_menu","el","addStyle","undefined","_click","_menuRef","detach","Directive","decorators","type","Optional","LyMenuTriggerFor","_injector","overlay","targetPosition","getBoundingClientRect","_handleClick","lyMenuTriggerFor","rect","create","$implicit","right","bottom","fnDestroy","bind","host","remove","(click)","Injector","LyOverlay","LyMenuModule","NgModule","imports","CommonModule","FormsModule","LyCommonModule","LxDomModule","LyOverlayModule","exports","declarations"],"mappings":"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","sourcesContent":["import { BehaviorSubject } from 'rxjs';\nimport {\n  Component,\n  ElementRef,\n  Input,\n  Output,\n  Directive,\n  OnChanges,\n  OnInit,\n  TemplateRef,\n  ViewChild,\n  ViewContainerRef,\n  AfterViewInit,\n  EventEmitter,\n  OnDestroy,\n  ChangeDetectorRef,\n  SimpleChanges,\n  Optional,\n  Injector,\n  HostListener,\n  HostBinding\n} from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport {\n  trigger,\n  state,\n  style,\n  animate,\n  transition,\n  keyframes,\n} from '@angular/animations';\nimport { DomService, Platform, LyOverlay, OverlayFromTemplateRef, LyTheme2, shadowBuilder } from '@alyle/ui';\n\nexport type position = 'left' | 'right' | 'top' | 'bottom' | 'center' | 'middle';\nexport class Origin {\n  horizontal: position;\n  vertical: position;\n}\n\n@Component({\n  selector: 'ly-template-menu',\n  template: `\n  <div #container></div>\n  `,\n  styles: [`\n    :host {\n      position: absolute;\n      display: block;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n    }\n  `]\n})\nexport class LyTemplateMenu implements OnInit, OnDestroy {\n  @ViewChild('container', { read: ViewContainerRef }) _vcr: ViewContainerRef;\n  constructor(public _viewContainerRef: ViewContainerRef) { }\n\n  ngOnInit() {\n  }\n  tmpl(template: TemplateRef<any>) {\n    this._vcr.createEmbeddedView(template);\n  }\n  ngOnDestroy() {\n    console.log('desst');\n  }\n}\n\n@Component({\n  selector: 'ly-menu-deprecated',\n  styles: [`.ly-menu{display:inline-block;position:fixed;padding:8px 0;max-height:248px;overflow:auto;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1000;opacity:0;min-width:84px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;-webkit-transform:scale3d(0,0,0);transform:scale3d(0,0,0);box-shadow:rgba(0,0,0,.15) 0 2px 6px,rgba(0,0,0,.15) 0 1px 4px;border-radius:2px;transition:transform 175ms cubic-bezier(.23,1,.32,1),opacity 275ms ease-in,-webkit-transform 175ms cubic-bezier(.23,1,.32,1);will-change:opacity,transform;font-family:Roboto,\"Helvetica Neue\",sans-serif}.ly-list-x{z-index:0;max-height:100%}.ly-menu /deep/ ly-menu{position:absolute}.ly-menu.ly-list{position:relative;-webkit-transform:scale3d(1,1,1);transform:scale3d(1,1,1);transition:linear}:host.ly-list .ly-menu{position:relative;-webkit-transform:scale(1,1);transform:scale(1,1);transition:linear;opacity:1}:host.ly-list .ly-background-menu{pointer-events:none}.ly-menu.ly-menu-opened{-webkit-transform:scale3d(1,1,1);transform:scale3d(1,1,1);opacity:1}.ly-background-menu{position:absolute;top:0;bottom:0;left:0;right:0;background:rgba(0,0,0,0);z-index:999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none}.ly-background-on{pointer-events:all!important;pointer-events:auto!important}::ng-deep button[ly-menu-item]{display:block;min-height:48px;border-radius:0;width:100%}`],\n  animations: [\n    trigger('menu', [\n      transition(':leave', animate('150ms 50ms linear', style({opacity: 0}))),\n      state('in', style({\n        opacity: 1\n      })),\n      transition(':enter', animate('100ms linear'))\n    ])\n  ],\n  template: `\n  <ng-template>\n    <div #_menu [@menu]=\"menuAnimationsState\"\n      class=\"ly-menu\"\n      bg=\"menu:bg\"\n      color=\"colorText\"\n      [style.transform-origin]=\"targetOrigin\"\n      [style.top.px]=\"rootStyle.top + rootStylePosition.top\"\n      [style.left.px]=\"rootStyle.left + rootStylePosition.left\"\n      [style.transform]=\"_targetPosition | async\">\n      <div class=\"ly-menu-content\">\n        <ng-content></ng-content>\n      </div>\n    </div>\n    <div\n    class=\"ly-background-menu ly-background-on\"\n    (click)=\"hiddeMenu()\"></div>\n  </ng-template>\n  `,\n  exportAs: 'lyMenuDeprecated',\n  preserveWhitespaces: false\n})\nexport class LyMenuDeprecated implements OnChanges, AfterViewInit, OnInit, OnDestroy {\n  isIni = false;\n  _color: string;\n  stateBg = false;\n  widthTarget = 0;\n  heightTarget = 0;\n\n  rootMenu: any = {\n    top: 0,\n    left: 0,\n  };\n  xtemplateRef: any;\n  menuAnimationsState;\n  @Input() opened = false;\n  // tslint:disable-next-line:no-input-rename\n  @Input('anchor-origin') _anchorOrigin: Origin = {horizontal: 'left', vertical: 'top'};\n  // tslint:disable-next-line:no-input-rename\n  @Input('target-origin') _targetOrigin: Origin = {horizontal: 'left', vertical: 'top'};\n  @ViewChild('_menu') _menuElement: ElementRef;\n  @ViewChild(TemplateRef) templateRef: TemplateRef<any>;\n  _targetPosition: BehaviorSubject<string> = new BehaviorSubject<string>(null);\n\n  @Output() open: EventEmitter<any> = new EventEmitter();\n  @Output() close: EventEmitter<any> = new EventEmitter();\n  private menuContentElement: HTMLElement;\n  private menuContentRef;\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes['_targetOrigin']) {\n      Promise.resolve(null).then(() => {\n        if (true) {\n          // console.log('changes[target-origin]', changes['_targetOrigin']);\n        }\n      });\n    }\n  }\n\n  updateTargetPosition() {\n    let vertical = '0%',\n    horizontal = '0%';\n    if (this._targetOrigin.horizontal === 'middle') {\n      horizontal = '-50%';\n    } else if (this._targetOrigin.horizontal === 'right') {\n      horizontal = '-100%';\n    }\n    if (this._targetOrigin.vertical === 'center') {\n      vertical = '-50%';\n    } else if (this._targetOrigin.vertical === 'bottom') {\n      vertical = '-100%';\n    }\n    const menuStyle = this.sanitizer.bypassSecurityTrustStyle(`translate3d(${horizontal}, ${vertical}, 0) scale3d(1, 1, 1)`);\n    this._targetPosition.next(menuStyle as string);\n  }\n  // get size\n  target(_element: any) {\n    const element: HTMLElement = _element;\n    return {\n      'width': element.offsetWidth || 0,\n      'height': element.offsetHeight || 0,\n      'left': element.offsetWidth || 0,\n      'top': 0,\n    };\n  }\n  get rootStylePosition() {\n    let top: any = 0;\n    let left: any = 0;\n    // let topTarget: any = 0;\n    // let leftTarget: any = 0;\n\n    // for _anchorOrigin\n    if (this._anchorOrigin.vertical === 'center') {\n      // anchor origin\n      top = (this.rootMenu.height / 2);\n    } else if (this._anchorOrigin.vertical === 'bottom') {\n      top = (this.rootMenu.height);\n    }\n    if (this._anchorOrigin.horizontal === 'middle') {\n      // anchor origin\n      left = (this.rootMenu.width / 2);\n    } else if (this._anchorOrigin.horizontal === 'right') {\n      left = (this.rootMenu.width);\n    }\n\n    // // for target origing\n    // if (this._targetOrigin.vertical == 'center') {\n    //   // anchor origin\n    //   topTarget = -(this.heightTarget / 2);\n    // } else if (this._targetOrigin.vertical == 'bottom') {\n    //   topTarget = -(this.heightTarget);\n    // }\n    // if (this._targetOrigin.horizontal == 'middle') {\n    //   // leftTarget = (this.target(this._menuElement).width / 2);\n    //   leftTarget = -(this.widthTarget / 2);\n    // } else if (this._targetOrigin.horizontal == 'right') {\n    //   // leftTarget = (this.target(this._menuElement).width);\n    //   leftTarget = -(this.widthTarget);\n    // }\n    return {\n      top: top,\n      left: left,\n      // topTarget: topTarget,\n      // leftTarget: leftTarget,\n    };\n  }\n  get rootStyle(): any {\n    const menuPosition: any = this.rootMenu;\n    const positionFinal: any = menuPosition;\n\n    if (this._anchorOrigin) {\n\n\n    }\n\n    return positionFinal;\n  }\n  get targetOrigin(): string {\n    return `${\n      this._targetOrigin.horizontal === 'middle' ? 'center' : this._targetOrigin.horizontal\n    } ${this._targetOrigin.vertical} 0`;\n  }\n  toggleMenu() {\n    this.opened === false ? this.showMenu() : this.hiddeMenu();\n  }\n  showMenu() {\n    this.menuAnimationsState = 'in';\n    this.menuContentRef = this.domService.attach<LyTemplateMenu>(this._viewContainerRef, LyTemplateMenu, this.templateRef);\n    // this.menuContentElement = this.domService.getDomElementFromComponentRef(this.menuContentRef);\n    // this.domService.addChild(this.menuContentElement);\n    this.updateTargetPosition();\n    this.opened = true;\n    this.stateBg = true;\n    this.open.emit(null);\n  }\n  hiddeMenu() {\n    this.close.emit(null);\n    this.opened = false;\n    this.stateBg = false;\n    // this.menuAnimationsState = 'end';\n    this._destroyMenu();\n  }\n\n  private _destroyMenu(): void {\n    // if (this.menuContentRef) {\n      this.domService.destroyRef(this.menuContentRef, 0);\n    // }\n  }\n\n  constructor(\n    private elementRef: ElementRef,\n    private _viewContainerRef: ViewContainerRef,\n    private domService: DomService,\n    private cd: ChangeDetectorRef,\n    private sanitizer: DomSanitizer\n  ) { }\n  ngOnInit() {\n\n  }\n\n  ngAfterViewInit() {\n\n  }\n  ngOnDestroy() {\n    if (Platform.isBrowser) {\n      this._destroyMenu();\n    }\n  }\n\n}\n\nconst menuStyles = theme => ({\n  root: {\n    background: theme.background.primary,\n    borderRadius: '2px',\n    boxShadow: shadowBuilder(4),\n    display: 'inline-block',\n    paddingTop: '8px',\n    paddingBottom: '8px',\n    transformOrigin: 'left top 0px'\n  }\n});\n\n/** Menu container */\n@Component({\n  selector: 'ly-menu',\n  animations: [\n    trigger('menuEnter', [\n      transition(':enter', [\n        animate('120ms cubic-bezier(0, 0, 0.2, 1)', keyframes([\n          style({\n            opacity: 0,\n            transform: 'scale(0.8)'\n          }),\n          style({\n            opacity: 1,\n            transform: 'scale(1)'\n          })\n        ]))\n      ]),\n    ]),\n    trigger('menuLeave', [\n      transition('* => void', animate('100ms 25ms linear', style({ opacity: 0 })))\n    ])\n  ],\n  styles: [':host {display: block; pointer-events: all;}'],\n  template: '<ng-content></ng-content>',\n  exportAs: 'lyMenu'\n})\nexport class LyMenu {\n  classes = this.theme.addStyleSheet(menuStyles, 'lyMenu');\n  /** Destroy menu */\n  destroy: () => void;\n  @Input() ref: LyMenuTriggerFor;\n  @HostBinding('@menuEnter') menuEnter;\n  @HostBinding('@menuLeave') menuLeave2;\n  @HostListener('@menuLeave.done', ['$event']) endAnimation(e) {\n    if (e.toState === 'void') {\n      this.ref.destroy();\n    }\n  }\n  constructor(\n    private theme: LyTheme2,\n    private _el: ElementRef\n    // private _viewContainer: ViewContainerRef,\n    // private _injector: Injector,\n    // private hj: LyMenuTriggerFor\n    // @Inject(ProviderMenu) providerMenu: ProviderMenu\n  ) {\n    this._el.nativeElement.classList.add(this.classes.root);\n  }\n\n}\n\nconst menuItemStyles = ({\n  display: 'block',\n  minHeight: '48px',\n  borderRadius: 0,\n  width: '100%'\n});\n\n@Directive({\n  selector: '[ly-menu-item]'\n})\nexport class LyMenuItem {\n  @HostListener('click') _click() {\n    if (this._menu.ref) {\n      this._menu.ref._menuRef.detach();\n    }\n  }\n  constructor(\n    @Optional() private _menu: LyMenu,\n    el: ElementRef,\n    theme: LyTheme2\n  ) {\n    theme.addStyle('lyMenuItem', menuItemStyles, el.nativeElement, undefined, 0.1);\n  }\n}\n\n@Directive({\n  selector: '[lyMenuTriggerFor]',\n  // tslint:disable-next-line:use-host-property-decorator\n  host: {\n    '(click)': '_handleClick($event)'\n  }\n})\nexport class LyMenuTriggerFor implements OnDestroy {\n  /** Current menuRef */\n  _menuRef: OverlayFromTemplateRef;\n  @Input() lyMenuTriggerFor: LyMenu | LyMenuDeprecated | TemplateRef<any>;\n  constructor(\n    private elementRef: ElementRef,\n    private _injector: Injector,\n    private overlay: LyOverlay\n  ) {}\n\n  targetPosition() {\n    const element: HTMLElement = this.elementRef.nativeElement;\n    const rect: ClientRect = element.getBoundingClientRect();\n    return rect;\n  }\n\n  _handleClick(e: Event) {\n    /** @deprecated */\n    if (this.lyMenuTriggerFor instanceof LyMenuDeprecated) {\n      this.lyMenuTriggerFor.rootMenu = this.targetPosition();\n      this.lyMenuTriggerFor.toggleMenu();\n    } else {\n      if (this._menuRef) {\n        this._menuRef.detach();\n      } else {\n        const rect = this.targetPosition();\n        this._menuRef = this.overlay.create(this.lyMenuTriggerFor as TemplateRef<any>, {\n          $implicit: this\n        }, {\n          styles: {\n            top: rect.top,\n            left: rect.left,\n            right: null,\n            bottom: null,\n          },\n          fnDestroy: this.detach.bind(this),\n          host: this.elementRef.nativeElement\n        });\n      }\n    }\n  }\n\n  detach() {\n    this._menuRef.detach();\n  }\n\n  destroy() {\n    if (this._menuRef) {\n      this._menuRef.remove();\n      this._menuRef = null;\n    }\n  }\n\n  ngOnDestroy() {\n    if (this._menuRef) {\n      this._menuRef.detach();\n    }\n  }\n\n}\n\n\n/**\n * @example\n * <ng-template #menu let-M>\n *   <ly-menu [ref]=\"M\">\n *     <button ly-menu-item >opt 1</button>\n *     <button ly-menu-item [lyMenuTriggerFor]=\"subMenu\">opt 2</button>\n *   </ly-menu>\n * </ng-template>\n * <ng-template #subMenu>\n *   <ly-menu>\n *     <button ly-menu-item>opt 1</button>\n *     <button ly-menu-item>opt 2</button>\n *   </ly-menu>\n * </ng-template>\n * <button ly-button [lyMenuTriggerFor]=\"menu\">toggle menu</button>\n */\n","import { LyMenu, LyMenuDeprecated, LyMenuTriggerFor, LyTemplateMenu, LyMenuItem } from './menu';\nimport { LyCommonModule, LxDomModule, LyOverlayModule } from '@alyle/ui';\nimport { FormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\n@NgModule({\n  imports: [CommonModule, FormsModule, LyCommonModule, LxDomModule, LyOverlayModule],\n  exports: [LyMenu, LyMenuItem, LyMenuDeprecated, LyMenuTriggerFor],\n  declarations: [LyMenu, LyMenuItem, LyMenuDeprecated, LyMenuTriggerFor, LyTemplateMenu],\n})\nexport class LyMenuModule { }\n"]}