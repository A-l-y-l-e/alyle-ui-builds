!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@alyle/ui"),require("@angular/common")):"function"==typeof define&&define.amd?define("@alyle/ui/drawer",["exports","@angular/core","@alyle/ui","@angular/common"],t):t((e.ly=e.ly||{},e.ly.drawer={}),e.ng.core,e.ly.core,e.ng.common)}(this,function(e,t,u,r){"use strict";var n=function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=u.XPosition.before,i=function(e){return{drawerContainer:{display:"block",position:"relative",overflow:"hidden","-webkit-overflow-scrolling":"touch"},drawer:{display:"block",position:"fixed",zIndex:e.zIndex.drawer,overflow:"auto",visibility:"hidden"},drawerContent:{display:"block"},drawerOpened:{transform:"translate(0px, 0px)",visibility:"visible"},backdrop:n({},u.LY_COMMON_STYLES.fill,{backgroundColor:e.drawer.backdrop}),transition:{transition:e.animations.durations.complex+"ms "+e.animations.curves.deceleration,transitionProperty:"transform, margin, visibility"}}},s=function(){function e(e,t,r){this._theme=e,this._renderer=t,this._el=r,this.classes=this._theme.addStyleSheet(i,1.9-2),this._openDrawers=0,this._renderer.addClass(this._el.nativeElement,this.classes.drawerContainer)}return e.decorators=[{type:t.Directive,args:[{selector:"ly-drawer-container"}]}],e.ctorParameters=function(){return[{type:u.LyTheme2},{type:t.Renderer2},{type:t.ElementRef}]},e.propDecorators={_drawerContent:[{type:t.ContentChild,args:[t.forwardRef(function(){return a})]}]},e}(),a=function(){function e(e,t,r){this._renderer=e,this._el=t,this._renderer.addClass(this._el.nativeElement,r.classes.drawerContent)}return e.prototype._getHostElement=function(){return this._el.nativeElement},e.decorators=[{type:t.Directive,args:[{selector:"ly-drawer-content"}]}],e.ctorParameters=function(){return[{type:t.Renderer2},{type:t.ElementRef},{type:s}]},e}(),d=function(){function e(e,t,r,n,i){this._theme=e,this._renderer=t,this._el=r,this._drawerContainer=n,this._vcr=i,this.classes=this._drawerContainer.classes,this._position=o,this.mode="side",this._renderer.addClass(this._el.nativeElement,n.classes.drawer)}return Object.defineProperty(e.prototype,"opened",{get:function(){return this._opened},set:function(e){e!==this.opened&&(this._opened=u.toBoolean(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasBackdrop",{get:function(){return this._hasBackdrop},set:function(e){this._hasBackdrop=null==e?null:u.toBoolean(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._position},set:function(t){t!==this.position&&(this._position=t,this._theme.addStyle("drawer.position:"+t,function(){var e;return(e={})[t]=0,e},this._el.nativeElement,this._positionClass,-2))},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(){this._updateBackdrop(),this._updateAnimations(),this._forceModeOver&&!this._fromToggle&&this._resetForceModeOver();var p=this.mode,c=this._forceModeOver,e=this.opened,t=this.width,r=this.height,n=this.position,i=this.spacingAbove,o=this.spacingBelow,s=this.spacingBefore,f=this.spacingAfter;if(t&&r)throw new Error("`width` and `height` are defined, you can only define one");if(t||r||(t="230px"),e)if(this._drawerClass=this._theme.updateClass(this._el.nativeElement,this._renderer,this._drawerContainer.classes.drawerOpened,this._drawerClass),"side"===p){var a="ly-drawer-content----:"+(e||"")+"·"+(t||"")+"·"+(n||"");this._drawerContentClass=this._theme.addStyle(a,function(o){var s={},a="margin-"+n;return u.eachMedia(e,function(){}),t&&u.eachMedia(t,function(e,t,r){var n=_(e);if(r){var i=o.getBreakpoint(t);m(s,i)[a]=n}else s[a]=n}),s},this._drawerContainer._drawerContent._getHostElement(),this._drawerContentClass)}else this._renderer.removeClass(this._drawerContainer._drawerContent._getHostElement(),this._drawerContentClass),this._drawerContentClass=null;else this._renderer.removeClass(this._drawerContainer._drawerContent._getHostElement(),this._drawerContentClass),this._drawerContentClass=null,this._renderer.removeClass(this._el.nativeElement,this._drawerClass),this._drawerClass=null;this._drawerRootClass=this._theme.addStyle("ly-drawer-root:"+t+"·"+r+"·"+i+"·"+o+"·"+s+"·"+f+"·"+n+"·"+p+"·"+c,function(a){var d={},e=a.getDirection(n),l="above"===n?"-":"+";if(t){var h=e===u.DirPosition.left?"-":"+";u.eachMedia(t,function(e,t,r){if("over"!==p&&!c||"0"!==e){var n=_(e),i="translateX("+(h+_(e))+")";if(r){var o=a.getBreakpoint(t),s=m(d,o);s.width=n,s.transform=i}else d.width=n,d.transform=i}})}else r&&u.eachMedia(r,function(e,t,r){var n=_(e),i="translateY("+(l+_(e))+")";if(r){var o=a.getBreakpoint(t),s=m(d,o);s.height=n,s.transform=i}else d.height=n,d.transform=i});return"before"===n||"after"===n?(u.eachMedia(i,function(e,t,r){var n=_(e||0);if(r){var i=a.getBreakpoint(t);m(d,i).top=n}else d.top=n}),u.eachMedia(o,function(e,t,r){var n=_(e||0);if(r){var i=a.getBreakpoint(t);m(d,i).bottom=n}else d.bottom=n})):n!==u.YPosition.above&&n!==u.YPosition.below||(u.eachMedia(s,function(e,t,r){var n=_(e||0);if(r){var i=a.getBreakpoint(t);m(d,i).before=n}else d.before=n}),u.eachMedia(f,function(e,t,r){var n=_(e||0);if(r){var i=a.getBreakpoint(t);m(d,i).after=n}else d.after=n})),d},this._el.nativeElement,this._drawerRootClass,"side"===p?-2:-1),this._fromToggle=!1},e.prototype.toggle=function(){var e=getComputedStyle(this._el.nativeElement).width;this._fromToggle=!0,"0px"===e?(this._forceModeOver=!0,this.opened=!0):this._forceModeOver&&this.opened?this._resetForceModeOver():this.opened=!this.opened,this.ngOnChanges()},e.prototype._resetForceModeOver=function(){this._forceModeOver=!1,this.opened=!1},e.prototype._updateBackdrop=function(){this.opened&&(null!=this.hasBackdrop?this.hasBackdrop:"over"===this.mode||this._forceModeOver)?this._viewRef||(this._drawerContainer._openDrawers++,this._viewRef=this._vcr.createEmbeddedView(this._backdrop),this._viewRef.rootNodes[0].style.zIndex=""+this._drawerContainer._openDrawers):this._viewRef&&(this._drawerContainer._openDrawers--,this._vcr.clear(),this._viewRef=null)},e.prototype._updateAnimations=function(){this._fromToggle&&!this._isAnimation?(this._renderer.addClass(this._el.nativeElement,this.classes.transition),this._renderer.addClass(this._drawerContainer._drawerContent._getHostElement(),this.classes.transition),this._isAnimation=!0):!this._fromToggle&&this._isAnimation&&(this._renderer.removeClass(this._el.nativeElement,this.classes.transition),this._renderer.removeClass(this._drawerContainer._drawerContent._getHostElement(),this.classes.transition),this._isAnimation=!1)},e.decorators=[{type:t.Component,args:[{selector:"ly-drawer",template:'<ng-content></ng-content>\n<ng-template>\n  <div [className]="classes.backdrop" (click)="toggle()"></div>\n</ng-template>',changeDetection:t.ChangeDetectionStrategy.OnPush,exportAs:"lyDrawer"}]}],e.ctorParameters=function(){return[{type:u.LyTheme2},{type:t.Renderer2},{type:t.ElementRef},{type:s},{type:t.ViewContainerRef}]},e.propDecorators={_backdrop:[{type:t.ViewChild,args:[t.TemplateRef]}],opened:[{type:t.Input}],mode:[{type:t.Input}],spacingAbove:[{type:t.Input}],spacingBelow:[{type:t.Input}],spacingBefore:[{type:t.Input}],spacingAfter:[{type:t.Input}],width:[{type:t.Input}],height:[{type:t.Input}],hasBackdrop:[{type:t.Input}],position:[{type:t.Input}]},e}();function _(e){return"number"==typeof e?e+"px":e}function m(e,t,r){return t in e?e[t]:e[t]=r||{}}var l=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[r.CommonModule,u.LyCommonModule],exports:[d,s,a],declarations:[d,s,a]}]}],e}();e.LyDrawerContainer=s,e.LyDrawerContent=a,e.LyDrawer=d,e.LyDrawerModule=l,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=alyle-ui-drawer.umd.min.js.map