!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@alyle/ui")):"function"==typeof define&&define.amd?define("@alyle/ui/drawer",["exports","@angular/core","@angular/common","@alyle/ui"],t):t((e.ly=e.ly||{},e.ly.drawer={}),e.ng.core,e.ng.common,e.ly.core)}(this,function(e,t,r,f){"use strict";var n=function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},d=f.XPosition.before,i=function(e){return{drawerContainer:{display:"block",position:"relative",overflow:"hidden","-webkit-overflow-scrolling":"touch"},drawer:{display:"block",position:"fixed",zIndex:e.zIndex.drawer,overflow:"auto",visibility:"hidden"},drawerContent:{display:"block"},drawerOpened:{transform:"translate(0px, 0px)",visibility:"visible"},drawerClosed:null,backdrop:n({},f.LY_COMMON_STYLES.fill,{backgroundColor:e.drawer.backdrop}),transition:{transition:e.animations.durations.complex+"ms "+e.animations.curves.deceleration,transitionProperty:"transform, margin, visibility"}}},o=function(){function e(e,t,r){this._theme=e,this._renderer=t,this._el=r,this.classes=this._theme.addStyleSheet(i,1.9-2),this._openDrawers=0,this._renderer.addClass(this._el.nativeElement,this.classes.drawerContainer)}return e.prototype._getHostElement=function(){return this._el.nativeElement},e.decorators=[{type:t.Directive,args:[{selector:"ly-drawer-container"}]}],e.ctorParameters=function(){return[{type:f.LyTheme2},{type:t.Renderer2},{type:t.ElementRef}]},e.propDecorators={_drawerContent:[{type:t.ContentChild,args:[t.forwardRef(function(){return s})]}]},e}(),s=function(){function e(e,t,r){this._renderer=e,this._el=t,this._renderer.addClass(this._el.nativeElement,r.classes.drawerContent)}return e.prototype._getHostElement=function(){return this._el.nativeElement},e.decorators=[{type:t.Directive,args:[{selector:"ly-drawer-content"}]}],e.ctorParameters=function(){return[{type:t.Renderer2},{type:t.ElementRef},{type:o}]},e}(),a=function(){function e(e,t,r,n,i,o,s,a){this._theme=e,this._renderer=t,this._el=r,this._drawerContainer=n,this._vcr=i,this._winResize=o,this._cd=s,this._zone=a,this.classes=this._drawerContainer.classes,this._position=d,this.mode="side",this._renderer.addClass(this._el.nativeElement,n.classes.drawer)}return Object.defineProperty(e.prototype,"opened",{get:function(){return this._opened},set:function(e){e!==this.opened&&(this._opened=f.toBoolean(e),this._isOpen=this._opened)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasBackdrop",{get:function(){return this._hasBackdrop},set:function(e){this._hasBackdrop=null==e?null:f.toBoolean(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._position},set:function(t){t!==this.position&&(this._position=t,this._theme.addStyle("drawer.position:"+t,function(){var e;return(e={})[t]=0,e},this._el.nativeElement,this._positionClass,-2))},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(){this._updateBackdrop(),this._updateAnimations();var l=this.mode,p=this._forceModeOverOpened,e=this.opened,t=this.width,r=this.height,n=this.position,i=this.spacingAbove,o=this.spacingBelow,c=this.spacingBefore,_=this.spacingAfter;if(t&&r)throw new Error("`width` and `height` are defined, you can only define one");if(t||r||(t="230px"),this._isOpen&&e||this._isOpen||p)if(this._drawerClass=this._theme.updateClass(this._el.nativeElement,this._renderer,this._drawerContainer.classes.drawerOpened,this._drawerClass),"side"===l){var s="ly-drawer-content----:"+(t||"")+"·"+(n||"");this._drawerContentClass=this._theme.addStyle(s,function(i){var o={},s="margin-"+n;return t&&f.eachMedia(t,function(e,t){var r="over"===e?"0px":u(e);if(t){var n=i.getBreakpoint(t);m(o,n)[s]=r}else o[s]=r}),o},this._drawerContainer._drawerContent._getHostElement(),this._drawerContentClass)}else this._drawerContentClass&&(this._renderer.removeClass(this._drawerContainer._drawerContent._getHostElement(),this._drawerContentClass),this._drawerContentClass=undefined);else this._drawerContentClass&&(this._renderer.removeClass(this._drawerContainer._drawerContent._getHostElement(),this._drawerContentClass),this._drawerContentClass=undefined),this._drawerClass&&(this._renderer.removeClass(this._el.nativeElement,this._drawerClass),this._drawerClass=undefined);this._drawerRootClass=this._theme.addStyle("ly-drawer-root:"+t+"·"+r+"·"+i+"·"+o+"·"+c+"·"+_+"·"+n+"·"+l+"·"+p,function(a){var d={},e=a.getDirection(n),s="above"===n?"-":"+";if(t){var h=e===f.DirPosition.left?"-":"+";f.eachMedia(t,function(e,t){if("over"!==l&&!p||"0"!==e&&"over"!==e){var r="over"===e?"0px":u(e),n=r,i="translateX("+(h+r)+")";if(t){var o=a.getBreakpoint(t),s=m(d,o);s.width=n,s.transform=i}else d.width=n,d.transform=i}})}else r&&f.eachMedia(r,function(e,t){var r=u(e),n="translateY("+(s+u(e))+")";if(t){var i=a.getBreakpoint(t),o=m(d,i);o.height=r,o.transform=n}else d.height=r,d.transform=n});return"before"===n||"after"===n?(f.eachMedia(i,function(e,t){var r=u(e||0);if(t){var n=a.getBreakpoint(t);m(d,n).top=r}else d.top=r}),f.eachMedia(o,function(e,t){var r=u(e||0);if(t){var n=a.getBreakpoint(t);m(d,n).bottom=r}else d.bottom=r})):n!==f.YPosition.above&&n!==f.YPosition.below||(f.eachMedia(c,function(e,t){var r=u(e||0);if(t){var n=a.getBreakpoint(t);m(d,n).before=r}else d.before=r}),f.eachMedia(_,function(e,t){var r=u(e||0);if(t){var n=a.getBreakpoint(t);m(d,n).after=r}else d.after=r})),d},this._el.nativeElement,this._drawerRootClass,"side"===l?-2:-1),this._fromToggle=!1},e.prototype.ngAfterViewInit=function(){var e=this;f.Platform.isBrowser&&(this._tabResizeSub=this._winResize.resize$.subscribe(function(){e.ngOnChanges()}))},e.prototype.ngOnDestroy=function(){this._tabResizeSub&&this._tabResizeSub.unsubscribe()},e.prototype.toggle=function(){var e=getComputedStyle(this._el.nativeElement).width;this._fromToggle=!0,"0px"===e?(this._forceModeOverOpened=!0,this._isOpen=!0):this._forceModeOverOpened?(this._forceModeOverOpened=!1,this._isOpen=this.opened):this._isOpen=!this._isOpen,this.ngOnChanges()},e.prototype._contentHasMargin=function(){var e=this._drawerContainer._drawerContent._getHostElement(),t=this._drawerContainer._getHostElement();return e.offsetWidth===t.offsetWidth},e.prototype._updateBackdrop=function(){var e=this;(this._isOpen&&this.opened||this._isOpen)&&(null!=this.hasBackdrop?this.hasBackdrop:"over"===this.mode||this._forceModeOverOpened&&this._contentHasMargin())?this._viewRef||this._zone.run(function(){e._drawerContainer._openDrawers++,e._viewRef=e._vcr.createEmbeddedView(e._backdrop),e._cd.markForCheck(),e._viewRef.rootNodes[0].style.zIndex=""+e._drawerContainer._openDrawers}):this._viewRef&&this._zone.run(function(){e._drawerContainer._openDrawers--,e._vcr.clear(),e._viewRef=undefined,e._cd.markForCheck(),e._forceModeOverOpened&&(e._forceModeOverOpened=!1,e._isOpen=e.opened)})},e.prototype._updateAnimations=function(){this._fromToggle&&!this._isAnimation?(this._renderer.addClass(this._el.nativeElement,this.classes.transition),this._renderer.addClass(this._drawerContainer._drawerContent._getHostElement(),this.classes.transition),this._isAnimation=!0):!this._fromToggle&&this._isAnimation&&(this._renderer.removeClass(this._el.nativeElement,this.classes.transition),this._renderer.removeClass(this._drawerContainer._drawerContent._getHostElement(),this.classes.transition),this._isAnimation=!1)},e.decorators=[{type:t.Component,args:[{selector:"ly-drawer",template:'<ng-content></ng-content>\n<ng-template>\n  <div [className]="classes.backdrop" (click)="toggle()"></div>\n</ng-template>',changeDetection:t.ChangeDetectionStrategy.OnPush,exportAs:"lyDrawer"}]}],e.ctorParameters=function(){return[{type:f.LyTheme2},{type:t.Renderer2},{type:t.ElementRef},{type:o},{type:t.ViewContainerRef},{type:f.WinResize},{type:t.ChangeDetectorRef},{type:t.NgZone}]},e.propDecorators={_backdrop:[{type:t.ViewChild,args:[t.TemplateRef]}],opened:[{type:t.Input}],mode:[{type:t.Input}],spacingAbove:[{type:t.Input}],spacingBelow:[{type:t.Input}],spacingBefore:[{type:t.Input}],spacingAfter:[{type:t.Input}],width:[{type:t.Input}],height:[{type:t.Input}],hasBackdrop:[{type:t.Input}],position:[{type:t.Input}]},e}();function u(e){return"number"==typeof e?e+"px":e}function m(e,t,r){return t in e?e[t]:e[t]=r||{}}var h=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[r.CommonModule,f.LyCommonModule],exports:[a,o,s],declarations:[a,o,s]}]}],e}();e.STYLES=i,e.LyDrawerContainer=o,e.LyDrawerContent=s,e.LyDrawer=a,e.LyDrawerModule=h,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=alyle-ui-drawer.umd.min.js.map