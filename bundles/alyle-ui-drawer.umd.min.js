!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@alyle/ui"),require("@angular/common")):"function"==typeof define&&define.amd?define("@alyle/ui/drawer",["exports","@angular/core","@alyle/ui","@angular/common"],t):t(((e=e||self).ly=e.ly||{},e.ly.drawer={}),e.ng.core,e.ly.core,e.ng.common)}(this,function(e,t,n,r){"use strict";var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function o(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function s(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}var a="side",d=-2,l=n.XPosition.before,p=function(e){return{drawerContainer:{display:"block",position:"relative",overflow:"hidden","-webkit-overflow-scrolling":"touch"},drawer:{display:"block",position:"fixed",zIndex:e.zIndex.drawer,overflow:"auto",visibility:"hidden"},drawerContent:{display:"block"},drawerOpened:{transform:"translate(0px, 0px)",visibility:"visible"},drawerClosed:null,backdrop:i({},n.LY_COMMON_STYLES.fill,{backgroundColor:e.drawer.backdrop}),transition:{transition:e.animations.durations.complex+"ms "+e.animations.curves.deceleration,transitionProperty:"transform, margin, visibility"}}},h=function(){function e(e,t,n){this._renderer=e,this._el=t,this._renderer.addClass(this._el.nativeElement,n.classes.drawerContent)}var n,r;return e.prototype._getHostElement=function(){return this._el.nativeElement},e=o([t.Directive({selector:"ly-drawer-content"}),(n=2,r=t.Inject(t.forwardRef(function(){return c})),function(e,t){r(e,t,n)}),s("design:paramtypes",[t.Renderer2,t.ElementRef,Object])],e)}(),c=function(){function e(e,t,n){this._theme=e,this._renderer=t,this._el=n,this.classes=this._theme.addStyleSheet(p,d+1.9),this._openDrawers=0,this._renderer.addClass(this._el.nativeElement,this.classes.drawerContainer)}return e.prototype._getHostElement=function(){return this._el.nativeElement},o([t.ContentChild(t.forwardRef(function(){return h}),{"static":!0}),s("design:type",h)],e.prototype,"_drawerContent",void 0),e=o([t.Directive({selector:"ly-drawer-container"}),s("design:paramtypes",[n.LyTheme2,t.Renderer2,t.ElementRef])],e)}(),f=function(){function e(e,t,n,r,i,o,s,d){this._theme=e,this._renderer=t,this._el=n,this._drawerContainer=r,this._vcr=i,this._winResize=o,this._cd=s,this._zone=d,this.classes=this._drawerContainer.classes,this._position=l,this.mode=a,this._renderer.addClass(this._el.nativeElement,r.classes.drawer)}return Object.defineProperty(e.prototype,"opened",{get:function(){return this._opened},set:function(e){e!==this.opened&&(this._opened=n.toBoolean(e),this._isOpen=this._opened)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasBackdrop",{get:function(){return this._hasBackdrop},set:function(e){this._hasBackdrop=null==e?null:n.toBoolean(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._position},set:function(e){e!==this.position&&(this._position=e,this._theme.addStyle("drawer.position:"+e,function(){var t;return(t={})[e]=0,t},this._el.nativeElement,this._positionClass,d))},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(){this._updateBackdrop(),this._updateAnimations();var e=this.mode,t=this._forceModeOverOpened,r=this.opened,i=this.width,o=this.height,s=this.position,a=this.spacingAbove,l=this.spacingBelow,p=this.spacingBefore,h=this.spacingAfter;if(i&&o)throw new Error("`width` and `height` are defined, you can only define one");if(i||o||(i="230px"),this._isOpen&&r||this._isOpen||t)if(this._drawerClass=this._theme.updateClass(this._el.nativeElement,this._renderer,this._drawerContainer.classes.drawerOpened,this._drawerClass),"side"===e){var c="ly-drawer-content----:"+(i||"")+"·"+(s||"");this._drawerContentClass=this._theme.addStyle(c,function(e){var t={},r="margin-"+s;return i&&n.eachMedia(i,function(n,i){var o="over"===n?"0px":_(n);if(i){var s=e.getBreakpoint(i);u(t,s)[r]=o}else t[r]=o}),t},this._drawerContainer._drawerContent._getHostElement(),this._drawerContentClass)}else this._drawerContentClass&&(this._renderer.removeClass(this._drawerContainer._drawerContent._getHostElement(),this._drawerContentClass),this._drawerContentClass=undefined);else this._drawerContentClass&&(this._renderer.removeClass(this._drawerContainer._drawerContent._getHostElement(),this._drawerContentClass),this._drawerContentClass=undefined),this._drawerClass&&(this._renderer.removeClass(this._el.nativeElement,this._drawerClass),this._drawerClass=undefined);this._drawerRootClass=this._theme.addStyle("ly-drawer-root:"+i+"·"+o+"·"+a+"·"+l+"·"+p+"·"+h+"·"+s+"·"+e+"·"+t,function(r){var d={},c=r.getDirection(s),f="above"===s?"-":"+";if(i){var g=c===n.DirPosition.left?"-":"+";n.eachMedia(i,function(n,i){if("over"!==e&&!t||"0"!==n&&"over"!==n){var o="over"===n?"0px":_(n),s=o,a="translateX("+(g+o)+")";if(i){var l=r.getBreakpoint(i),p=u(d,l);p.width=s,p.transform=a}else d.width=s,d.transform=a}})}else o&&n.eachMedia(o,function(e,t){var n=_(e),i="translateY("+(f+_(e))+")";if(t){var o=r.getBreakpoint(t),s=u(d,o);s.height=n,s.transform=i}else d.height=n,d.transform=i});return"before"===s||"after"===s?(n.eachMedia(a,function(e,t){var n=_(e||0);if(t){var i=r.getBreakpoint(t);u(d,i).top=n}else d.top=n}),n.eachMedia(l,function(e,t){var n=_(e||0);if(t){var i=r.getBreakpoint(t);u(d,i).bottom=n}else d.bottom=n})):s!==n.YPosition.above&&s!==n.YPosition.below||(n.eachMedia(p,function(e,t){var n=_(e||0);if(t){var i=r.getBreakpoint(t);u(d,i).before=n}else d.before=n}),n.eachMedia(h,function(e,t){var n=_(e||0);if(t){var i=r.getBreakpoint(t);u(d,i).after=n}else d.after=n})),d},this._el.nativeElement,this._drawerRootClass,"side"===e?d:d+1),this._fromToggle=!1},e.prototype.ngAfterViewInit=function(){var e=this;n.Platform.isBrowser&&(this._tabResizeSub=this._winResize.resize$.subscribe(function(){e.ngOnChanges()}))},e.prototype.ngOnDestroy=function(){this._tabResizeSub&&this._tabResizeSub.unsubscribe()},e.prototype.toggle=function(){var e=getComputedStyle(this._el.nativeElement).width;this._fromToggle=!0,"0px"===e?(this._forceModeOverOpened=!0,this._isOpen=!0):this._forceModeOverOpened?(this._forceModeOverOpened=!1,this._isOpen=this.opened):this._isOpen=!this._isOpen,this.ngOnChanges()},e.prototype._contentHasMargin=function(){var e=this._drawerContainer._drawerContent._getHostElement(),t=this._drawerContainer._getHostElement();return e.offsetWidth===t.offsetWidth},e.prototype._updateBackdrop=function(){var e=this;(this._isOpen&&this.opened||this._isOpen)&&(null!=this.hasBackdrop?this.hasBackdrop:"over"===this.mode||this._forceModeOverOpened&&this._contentHasMargin())?this._viewRef||this._zone.run(function(){e._drawerContainer._openDrawers++,e._viewRef=e._vcr.createEmbeddedView(e._backdrop),e._cd.markForCheck(),e._viewRef.rootNodes[0].style.zIndex=""+e._drawerContainer._openDrawers}):this._viewRef&&this._zone.run(function(){e._drawerContainer._openDrawers--,e._vcr.clear(),e._viewRef=undefined,e._cd.markForCheck(),e._forceModeOverOpened&&(e._forceModeOverOpened=!1,e._isOpen=e.opened)})},e.prototype._updateAnimations=function(){this._fromToggle&&!this._isAnimation?(this._renderer.addClass(this._el.nativeElement,this.classes.transition),this._renderer.addClass(this._drawerContainer._drawerContent._getHostElement(),this.classes.transition),this._isAnimation=!0):!this._fromToggle&&this._isAnimation&&(this._renderer.removeClass(this._el.nativeElement,this.classes.transition),this._renderer.removeClass(this._drawerContainer._drawerContent._getHostElement(),this.classes.transition),this._isAnimation=!1)},o([t.ViewChild(t.TemplateRef,{"static":!1}),s("design:type",t.TemplateRef)],e.prototype,"_backdrop",void 0),o([t.Input(),s("design:type",Boolean),s("design:paramtypes",[Boolean])],e.prototype,"opened",null),o([t.Input(),s("design:type",String)],e.prototype,"mode",void 0),o([t.Input(),s("design:type",Object)],e.prototype,"spacingAbove",void 0),o([t.Input(),s("design:type",Object)],e.prototype,"spacingBelow",void 0),o([t.Input(),s("design:type",Object)],e.prototype,"spacingBefore",void 0),o([t.Input(),s("design:type",Object)],e.prototype,"spacingAfter",void 0),o([t.Input(),s("design:type",Object)],e.prototype,"width",void 0),o([t.Input(),s("design:type",Object)],e.prototype,"height",void 0),o([t.Input(),s("design:type",Object),s("design:paramtypes",[Object])],e.prototype,"hasBackdrop",null),o([t.Input(),s("design:type",String),s("design:paramtypes",[String])],e.prototype,"position",null),e=o([t.Component({selector:"ly-drawer",template:'<ng-content></ng-content>\n<ng-template>\n  <div [className]="classes.backdrop" (click)="toggle()"></div>\n</ng-template>',changeDetection:t.ChangeDetectionStrategy.OnPush,exportAs:"lyDrawer"}),s("design:paramtypes",[n.LyTheme2,t.Renderer2,t.ElementRef,c,t.ViewContainerRef,n.WinResize,t.ChangeDetectorRef,t.NgZone])],e)}();function _(e){return"number"==typeof e?e+"px":e}function u(e,t,n){return t in e?e[t]:e[t]=n||{}}var g=function(){function e(){}return e=o([t.NgModule({imports:[r.CommonModule,n.LyCommonModule],exports:[f,c,h],declarations:[f,c,h]})],e)}();e.LyDrawer=f,e.LyDrawerContainer=c,e.LyDrawerContent=h,e.LyDrawerModule=g,e.STYLES=p,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=alyle-ui-drawer.umd.min.js.map