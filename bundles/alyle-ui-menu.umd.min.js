!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("rxjs"),require("@angular/core"),require("@angular/platform-browser"),require("@angular/animations"),require("@alyle/ui"),require("@angular/forms"),require("@angular/common")):"function"==typeof define&&define.amd?define("@alyle/ui/menu",["exports","rxjs","@angular/core","@angular/platform-browser","@angular/animations","@alyle/ui","@angular/forms","@angular/common"],t):t((e.alyle=e.alyle||{},e.alyle.ui=e.alyle.ui||{},e.alyle.ui.menu={}),e.rxjs,e.ng.core,e.ng.platformBrowser,e.ng.animations,e.alyle.ui,e.ng.forms,e.ng.common)}(this,function(e,r,s,t,n,i,o,a){"use strict";var l=function f(){},u=function(){function e(e){this._viewContainerRef=e}return e.prototype.ngOnInit=function(){},e.prototype.tmpl=function(e){this._vcr.createEmbeddedView(e)},e.prototype.ngOnDestroy=function(){console.log("desst")},e.decorators=[{type:s.Component,args:[{selector:"ly-template-menu",template:"\n  <div #container></div>\n  ",styles:["\n    :host {\n      position: absolute;\n      display: block;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n    }\n  "]}]}],e.ctorParameters=function(){return[{type:s.ViewContainerRef}]},e.propDecorators={_vcr:[{type:s.ViewChild,args:["container",{read:s.ViewContainerRef}]}]},e}(),c=function(){function e(e,t,n,i,o){this.elementRef=e,this._viewContainerRef=t,this.domService=n,this.cd=i,this.sanitizer=o,this.isIni=!1,this.stateBg=!1,this.widthTarget=0,this.heightTarget=0,this.rootMenu={top:0,left:0},this.opened=!1,this._anchorOrigin={horizontal:"left",vertical:"top"},this._targetOrigin={horizontal:"left",vertical:"top"},this._targetPosition=new r.BehaviorSubject(null),this.open=new s.EventEmitter,this.close=new s.EventEmitter}return e.prototype.ngOnChanges=function(e){e._targetOrigin&&Promise.resolve(null).then(function(){})},e.prototype.updateTargetPosition=function(){var e="0%",t="0%";"middle"===this._targetOrigin.horizontal?t="-50%":"right"===this._targetOrigin.horizontal&&(t="-100%"),"center"===this._targetOrigin.vertical?e="-50%":"bottom"===this._targetOrigin.vertical&&(e="-100%");var n=this.sanitizer.bypassSecurityTrustStyle("translate3d("+t+", "+e+", 0) scale3d(1, 1, 1)");this._targetPosition.next(n)},e.prototype.target=function(e){var t=e;return{width:t.offsetWidth||0,height:t.offsetHeight||0,left:t.offsetWidth||0,top:0}},Object.defineProperty(e.prototype,"rootStylePosition",{get:function(){var e=0,t=0;return"center"===this._anchorOrigin.vertical?e=this.rootMenu.height/2:"bottom"===this._anchorOrigin.vertical&&(e=this.rootMenu.height),"middle"===this._anchorOrigin.horizontal?t=this.rootMenu.width/2:"right"===this._anchorOrigin.horizontal&&(t=this.rootMenu.width),{top:e,left:t}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rootStyle",{get:function(){var e=this.rootMenu;return this._anchorOrigin,e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"targetOrigin",{get:function(){return("middle"===this._targetOrigin.horizontal?"center":this._targetOrigin.horizontal)+" "+this._targetOrigin.vertical+" 0"},enumerable:!0,configurable:!0}),e.prototype.toggleMenu=function(){!1===this.opened?this.showMenu():this.hiddeMenu()},e.prototype.showMenu=function(){this.menuAnimationsState="in",this.menuContentRef=this.domService.attach(this._viewContainerRef,u,this.templateRef),this.updateTargetPosition(),this.opened=!0,this.stateBg=!0,this.open.emit(null)},e.prototype.hiddeMenu=function(){this.close.emit(null),this.opened=!1,this.stateBg=!1,this._destroyMenu()},e.prototype._destroyMenu=function(){this.domService.destroyRef(this.menuContentRef,0)},e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){},e.prototype.ngOnDestroy=function(){i.Platform.isBrowser&&this._destroyMenu()},e.decorators=[{type:s.Component,args:[{selector:"ly-menu-deprecated",styles:['.ly-menu{display:inline-block;position:fixed;padding:8px 0;max-height:248px;overflow:auto;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1000;opacity:0;min-width:84px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;-webkit-transform:scale3d(0,0,0);transform:scale3d(0,0,0);box-shadow:rgba(0,0,0,.15) 0 2px 6px,rgba(0,0,0,.15) 0 1px 4px;border-radius:2px;transition:transform 175ms cubic-bezier(.23,1,.32,1),opacity 275ms ease-in,-webkit-transform 175ms cubic-bezier(.23,1,.32,1);will-change:opacity,transform;font-family:Roboto,"Helvetica Neue",sans-serif}.ly-list-x{z-index:0;max-height:100%}.ly-menu /deep/ ly-menu{position:absolute}.ly-menu.ly-list{position:relative;-webkit-transform:scale3d(1,1,1);transform:scale3d(1,1,1);transition:linear}:host.ly-list .ly-menu{position:relative;-webkit-transform:scale(1,1);transform:scale(1,1);transition:linear;opacity:1}:host.ly-list .ly-background-menu{pointer-events:none}.ly-menu.ly-menu-opened{-webkit-transform:scale3d(1,1,1);transform:scale3d(1,1,1);opacity:1}.ly-background-menu{position:absolute;top:0;bottom:0;left:0;right:0;background:rgba(0,0,0,0);z-index:999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none}.ly-background-on{pointer-events:all!important;pointer-events:auto!important}::ng-deep button[ly-menu-item]{display:block;min-height:48px;border-radius:0;width:100%}'],animations:[n.trigger("menu",[n.transition(":leave",n.animate("150ms 50ms linear",n.style({opacity:0}))),n.state("in",n.style({opacity:1})),n.transition(":enter",n.animate("100ms linear"))])],template:'\n  <ng-template>\n    <div #_menu [@menu]="menuAnimationsState"\n      class="ly-menu"\n      bg="menu:bg"\n      color="colorText"\n      [style.transform-origin]="targetOrigin"\n      [style.top.px]="rootStyle.top + rootStylePosition.top"\n      [style.left.px]="rootStyle.left + rootStylePosition.left"\n      [style.transform]="_targetPosition | async">\n      <div class="ly-menu-content">\n        <ng-content></ng-content>\n      </div>\n    </div>\n    <div\n    class="ly-background-menu ly-background-on"\n    (click)="hiddeMenu()"></div>\n  </ng-template>\n  ',exportAs:"lyMenuDeprecated",preserveWhitespaces:!1}]}],e.ctorParameters=function(){return[{type:s.ElementRef},{type:s.ViewContainerRef},{type:i.DomService},{type:s.ChangeDetectorRef},{type:t.DomSanitizer}]},e.propDecorators={opened:[{type:s.Input}],_anchorOrigin:[{type:s.Input,args:["anchor-origin"]}],_targetOrigin:[{type:s.Input,args:["target-origin"]}],_menuElement:[{type:s.ViewChild,args:["_menu"]}],templateRef:[{type:s.ViewChild,args:[s.TemplateRef]}],open:[{type:s.Output}],close:[{type:s.Output}]},e}(),p=function(e){return{root:{background:e.background.primary,borderRadius:"2px",boxShadow:i.shadowBuilder(4),display:"inline-block",paddingTop:"8px",paddingBottom:"8px",transformOrigin:"left top 0px"}}},m=function(){function e(e,t){this.theme=e,this._el=t,this.classes=this.theme.addStyleSheet(p,"lyMenu"),this._el.nativeElement.classList.add(this.classes.root)}return e.prototype.endAnimation=function(e){"void"===e.toState&&this.ref.destroy()},e.decorators=[{type:s.Component,args:[{selector:"ly-menu",animations:[n.trigger("menuEnter",[n.transition(":enter",[n.animate("120ms cubic-bezier(0, 0, 0.2, 1)",n.keyframes([n.style({opacity:0,transform:"scale(0.8)"}),n.style({opacity:1,transform:"scale(1)"})]))])]),n.trigger("menuLeave",[n.transition("* => void",n.animate("100ms 25ms linear",n.style({opacity:0})))])],styles:[":host {display: block; pointer-events: all;}"],template:"<ng-content></ng-content>",exportAs:"lyMenu"}]}],e.ctorParameters=function(){return[{type:i.LyTheme2},{type:s.ElementRef}]},e.propDecorators={ref:[{type:s.Input}],menuEnter:[{type:s.HostBinding,args:["@menuEnter"]}],menuLeave2:[{type:s.HostBinding,args:["@menuLeave"]}],endAnimation:[{type:s.HostListener,args:["@menuLeave.done",["$event"]]}]},e}(),h={display:"block",minHeight:"48px",borderRadius:0,width:"100%"},y=function(){function e(e,t,n){this._menu=e,n.addStyle("lyMenuItem",h,t.nativeElement,undefined,.1)}return e.prototype._click=function(){this._menu.ref&&this._menu.ref._menuRef.detach()},e.decorators=[{type:s.Directive,args:[{selector:"[ly-menu-item]"}]}],e.ctorParameters=function(){return[{type:m,decorators:[{type:s.Optional}]},{type:s.ElementRef},{type:i.LyTheme2}]},e.propDecorators={_click:[{type:s.HostListener,args:["click"]}]},e}(),g=function(){function e(e,t,n){this.elementRef=e,this._injector=t,this.overlay=n}return e.prototype.targetPosition=function(){return this.elementRef.nativeElement.getBoundingClientRect()},e.prototype._handleClick=function(e){if(this.lyMenuTriggerFor instanceof c)this.lyMenuTriggerFor.rootMenu=this.targetPosition(),this.lyMenuTriggerFor.toggleMenu();else if(this._menuRef)this._menuRef.detach();else{var t=this.targetPosition();this._menuRef=this.overlay.create(this.lyMenuTriggerFor,{$implicit:this},{styles:{top:t.top,left:t.left,right:null,bottom:null},fnDestroy:this.detach.bind(this),host:this.elementRef.nativeElement})}},e.prototype.detach=function(){this._menuRef.detach()},e.prototype.destroy=function(){this._menuRef&&(this._menuRef.remove(),this._menuRef=null)},e.prototype.ngOnDestroy=function(){this._menuRef&&this._menuRef.detach()},e.decorators=[{type:s.Directive,args:[{selector:"[lyMenuTriggerFor]",host:{"(click)":"_handleClick($event)"}}]}],e.ctorParameters=function(){return[{type:s.ElementRef},{type:s.Injector},{type:i.LyOverlay}]},e.propDecorators={lyMenuTriggerFor:[{type:s.Input}]},e}(),d=function(){function e(){}return e.decorators=[{type:s.NgModule,args:[{imports:[a.CommonModule,o.FormsModule,i.LyCommonModule,i.LxDomModule,i.LyOverlayModule],exports:[m,y,c,g],declarations:[m,y,c,g,u]}]}],e}();e.Origin=l,e.LyTemplateMenu=u,e.LyMenuDeprecated=c,e.LyMenu=m,e.LyMenuItem=y,e.LyMenuTriggerFor=g,e.LyMenuModule=d,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=alyle-ui-menu.umd.min.js.map