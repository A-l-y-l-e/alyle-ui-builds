!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/animations"),require("@alyle/ui"),require("@angular/forms"),require("@angular/common")):"function"==typeof define&&define.amd?define("@alyle/ui/menu",["exports","@angular/core","@angular/animations","@alyle/ui","@angular/forms","@angular/common"],t):t((e.ly=e.ly||{},e.ly.menu={}),e.ng.core,e.ng.animations,e.ly.core,e.ng.forms,e.ng.common)}(this,function(e,t,n,c,i,o){"use strict";var r=function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=c.YPosition.below,a=c.XPosition.after,l=function(e){return{container:r({background:e.background.primary["default"],borderRadius:"2px",boxShadow:c.shadowBuilder(4),display:"inline-block",paddingTop:"8px",paddingBottom:"8px",transformOrigin:"inherit",pointerEvents:"all"},e.menu.root)}},u=function(){function e(e,t,n){this._theme=e,this._el=t,this._renderer=n,this.classes=this._theme.addStyleSheet(l,-1)}return e.prototype.endAnimation=function(e){"void"===e.toState&&this.ref.destroy()},e.prototype.ngOnInit=function(){this.placement||this.xPosition||this.yPosition||(this.xPosition=a,this.placement=s)},e.prototype.ngAfterViewInit=function(){this._updatePlacement()},e.prototype._updatePlacement=function(){var e=this._el.nativeElement.getBoundingClientRect(),t=this.ref._targetPosition(),n=this.placement,i=this.xPosition,o=this.yPosition;if(i&&o)throw new Error("You can not use `xPosition` and `yPosition` together, use only one of them.");if((i||o)&&!n)throw new Error("`placement` is required.");var r=0,s=0,a="center",l="center";if(n||i||o){if(n)if(n===c.YPosition.above)r=(t.width-e.width)/2,s=-e.height,l="bottom";else if(n===c.YPosition.below)r=(t.width-e.width)/2,s=t.height,l="top";else{(u=this._theme.config.getDirection(n))===c.DirPosition.left?(a="100%",r=-e.width,s=(t.height-e.height)/2):u===c.DirPosition.right&&(a="0%",r=t.width,s=(t.height-e.height)/2)}var u;if(i)(u=this._theme.config.getDirection(i))===c.DirPosition.right?(a="0%",r=0):u===c.DirPosition.left&&(a="100%",r=t.width-e.width);else o&&(o===c.YPosition.above?(s=0,l="0%"):o===c.YPosition.below&&(s=t.height-e.height,l="100%"))}this._setTransform("translate3d("+Math.round(r)+"px, "+Math.round(s)+"px, 0)"),this._renderer.setStyle(this._el.nativeElement,"transform-origin",a+" "+l+" 0")},e.prototype._setTransform=function(e){this._renderer.setStyle(this._el.nativeElement,"transform",e)},e.decorators=[{type:t.Component,args:[{selector:"ly-menu",animations:[n.trigger("menuEnter",[n.transition("void => in",[n.animate("125ms cubic-bezier(0, 0, 0.2, 1)",n.keyframes([n.style({opacity:0,transform:"scale(0.8)"}),n.style({opacity:1,transform:"scale(1)"})]))])]),n.trigger("menuLeave",[n.transition("* => void",n.animate("150ms linear",n.style({opacity:0})))])],template:'<div [class]="classes.container" [@menuEnter]="\'in\'">\n  <ng-content></ng-content>\n</div>',exportAs:"lyMenu"}]}],e.ctorParameters=function(){return[{type:c.LyTheme2},{type:t.ElementRef},{type:t.Renderer2}]},e.propDecorators={ref:[{type:t.Input}],placement:[{type:t.Input}],xPosition:[{type:t.Input}],yPosition:[{type:t.Input}],menuLeave2:[{type:t.HostBinding,args:["@menuLeave"]}],endAnimation:[{type:t.HostListener,args:["@menuLeave.done",["$event"]]}]},e}(),h={display:"block",minHeight:"48px",borderRadius:0,width:"100%"},p=function(){function e(e,t,n){this._menu=e,n.addStyle("lyMenuItem",h,t.nativeElement,undefined,-1)}return e.prototype._click=function(){this._menu.ref&&this._menu.ref._menuRef.detach()},e.decorators=[{type:t.Directive,args:[{selector:"[ly-menu-item]"}]}],e.ctorParameters=function(){return[{type:u,decorators:[{type:t.Optional}]},{type:t.ElementRef},{type:c.LyTheme2}]},e.propDecorators={_click:[{type:t.HostListener,args:["click"]}]},e}(),m=function(){function e(e,t){this.elementRef=e,this.overlay=t}return e.prototype._targetPosition=function(){return this.elementRef.nativeElement.getBoundingClientRect()},e.prototype._handleClick=function(){if(this._menuRef)this._menuRef.detach();else{var e=this._targetPosition();this._menuRef=this.overlay.create(this.lyMenuTriggerFor,{$implicit:this},{styles:{top:e.top,left:e.left,right:null,bottom:null,pointerEvents:null},fnDestroy:this.detach.bind(this),host:this.elementRef.nativeElement,backdrop:!0})}},e.prototype.detach=function(){this._menuRef.detach()},e.prototype.destroy=function(){this._menuRef&&(this._menuRef.remove(),this._menuRef=null)},e.prototype.ngOnDestroy=function(){this._menuRef&&this._menuRef.detach()},e.decorators=[{type:t.Directive,args:[{selector:"[lyMenuTriggerFor]",host:{"(click)":"_handleClick($event)"}}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:c.LyOverlay}]},e.propDecorators={lyMenuTriggerFor:[{type:t.Input}]},e}(),f=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[o.CommonModule,i.FormsModule,c.LyCommonModule,c.LyOverlayModule],exports:[u,p,m],declarations:[u,p,m]}]}],e}();e.LyMenu=u,e.LyMenuItem=p,e.LyMenuTriggerFor=m,e.LyMenuModule=f,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=alyle-ui-menu.umd.min.js.map