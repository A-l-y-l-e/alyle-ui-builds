!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@angular/core"),require("@alyle/ui"),require("rxjs"),require("@angular/common"),require("@angular/animations"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@alyle/ui/expansion",["exports","@angular/core","@alyle/ui","rxjs","@angular/common","@angular/animations","rxjs/operators"],n):n(((e=e||self).ly=e.ly||{},e.ly.expansion={}),e.ng.core,e.ly.core,e.rxjs,e.ng.common,e.ng.animations,e.rxjs.operators)}(this,(function(e,n,t,o,i,a,r){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var s=function(e,n){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(e,n)};function l(e,n,t,o){var i,a=arguments.length,r=a<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,n,t,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(n,t,r):i(n,t))||r);return a>3&&r&&Object.defineProperty(n,t,r),r}function p(e,n){return function(t,o){n(t,o,e)}}var c=function(e,n){var t=n.selectorsOf(c),o=e.after;return{$priority:-.9,$name:d.и,$global:function(){return function(n){return n+" "+t.panelTitle+","+n+" "+t.panelDescription+"{display:flex;margin-"+o+":16px;}"+n+" "+t.panel+":not("+t.disabled+") "+t.panelTitle+"{color:"+e.text.default+";}"+n+" "+t.panel+":not("+t.disabled+") "+t.panelDescription+"{color:"+e.text.secondary+";}"}},root:e.expansion&&e.expansion.root?function(){return e.expansion.root(t)}:null,panel:function(){return function(e){return e+"{display:block;overflow:hidden;position:relative;}"+e+":not("+t.disabled+") "+t.panelHeader+"{cursor:pointer;}"}},panelHeader:function(){return function(n){return n+"{display:flex;position:relative;flex-direction:row;align-items:center;padding:0 24px;transition:height "+e.animations.durations.entering+"ms "+e.animations.curves.standard+";font-family:"+e.typography.fontFamily+";font-size:"+e.pxToRem(15)+";font-weight:400;}"+t.panel+":not("+t.expanded+"):not("+t.disabled+") "+n+":hover{background:"+e.hover+";}@media (hover: none){"+t.panel+":not("+t.expanded+"):not("+t.disabled+") "+n+":hover{background:none;}}"}},panelHeaderContent:function(e){return e+"{display:flex;flex:1;flex-direction:row;align-items:center;overflow:hidden;}"},panelContent:function(e){return e+"{display:flex;flex-direction:column;overflow:visible;}"},panelBody:function(n){return n+"{visibility:hidden;padding:0 24px 16px;transition:visibility "+e.animations.durations.entering+"ms "+e.animations.curves.standard+";font-family:"+e.typography.fontFamily+";font-size:"+e.pxToRem(14)+";font-weight:400;line-height:"+e.pxToRem(20)+";}"},panelTitle:function(e){return e+"{flex-grow:1;}"},panelDescription:function(e){return e+"{flex-grow:2;}"},panelActionRow:function(n){return n+"{border-top:1px solid "+e.divider+";display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;}"},expanded:function(){return function(e){return e+" "+t.panelBody+"{visibility:visible;}"}},disabled:function(n){return n+"{color:"+e.disabled.contrast+";}"}}},d=function(){function e(e,n,t){this._theme=e,this._renderer=n,this._el=t,this.classes=this._theme.addStyleSheet(c),this._hasToggle=!0,this._openCloseAllActions=new o.Subject}return Object.defineProperty(e.prototype,"appearance",{get:function(){return this._appearance},set:function(e){this._appearance=e,this._appearanceClass=this._theme.addStyle("lyAccordion.appearance:"+e,(function(n,t){if(!n.expansion.appearance||!n.expansion.appearance[e])throw new Error("Value expansion.appearance['"+e+"'] not found in ThemeVariables");var o=t.selectorsOf(c);return n.expansion.appearance[e](o)}),this._el.nativeElement,this._appearanceClass,-.9)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"multiple",{get:function(){return this._multiple},set:function(e){this._multiple=t.toBoolean(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasToggle",{get:function(){return this._hasToggle},set:function(e){this._hasToggle=t.toBoolean(e)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this._theme.variables.expansion;if(!e)throw t.getLyThemeVariableUndefinedError("expansion");this._renderer.addClass(this._el.nativeElement,this.classes.root),e.defaultConfig&&e.defaultConfig.appearance&&null==this.appearance&&(this.appearance=e.defaultConfig.appearance)},e.prototype.closeAll=function(){this._openCloseAll(!0)},e.prototype.openAll=function(){this._openCloseAll(!1)},e.prototype._openCloseAll=function(e){this.multiple&&this._openCloseAllActions.next(e)},e.и="LyAccordion",e.ctorParameters=function(){return[{type:t.LyTheme2},{type:n.Renderer2},{type:n.ElementRef}]},l([n.Input()],e.prototype,"appearance",null),l([n.Input()],e.prototype,"multiple",null),l([n.Input()],e.prototype,"hasToggle",null),e=l([n.Directive({selector:"ly-accordion",exportAs:"lyAccordion"})],e)}(),u={contentExpansion:a.trigger("contentExpansion",[a.state("collapsed, void",a.style({height:"0px",visibility:"hidden"})),a.state("expanded",a.style({height:"*",visibility:"visible"})),a.transition("expanded <=> collapsed, void => collapsed",a.animate("{{panelAnimationTiming}}"))])},f=function(){function e(e){this._template=e}return e.ctorParameters=function(){return[{type:n.TemplateRef}]},e=l([n.Directive({selector:"ng-template[lyExpansionPanelContent]"})],e)}(),y=function(e){this._theme=e},h=t.mixinStyleUpdater(t.mixinBg(t.mixinColor(t.mixinElevation(t.mixinShadowColor(y))))),g=function(e){function i(t,i,a,s,l){var p=e.call(this,s)||this;return p._el=t,p._renderer=i,p._cd=a,p._accordion=l,p.classes=p._accordion.classes,p._panelAnimationTiming=p._theme.variables.animations.durations.entering+"ms "+p._theme.variables.animations.curves.standard,p._openCloseAllSubscription=o.Subscription.EMPTY,p._hasToggle=!!p._accordion.hasToggle,p.closed=new n.EventEmitter,p.opened=new n.EventEmitter,p.afterCollapse=new n.EventEmitter,p.afterExpand=new n.EventEmitter,p.destroyed=new n.EventEmitter,p._bodyAnimationDone=new o.Subject,i.addClass(t.nativeElement,p._accordion.classes.panel),p._openCloseAllSubscription=p._subscribeToOpenCloseAllActions(),p._bodyAnimationDone.pipe(r.distinctUntilChanged((function(e,n){return e.fromState===n.fromState&&e.toState===n.toState}))).subscribe((function(e){"void"!==e.fromState&&("expanded"===e.toState?p.afterExpand.emit():"collapsed"===e.toState&&p.afterCollapse.emit())})),p}return function(e,n){function t(){this.constructor=e}s(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}(i,e),Object.defineProperty(i.prototype,"disabled",{get:function(){return this._disabled},set:function(e){var n=t.toBoolean(e);n!==this.disabled&&(this._disabled=n,n?this._renderer.addClass(this._el.nativeElement,this._accordion.classes.disabled):this._renderer.removeClass(this._el.nativeElement,this._accordion.classes.disabled))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"expanded",{get:function(){return this._expanded},set:function(e){var n=t.toBoolean(e);n===this.expanded||this.disabled||(n&&!this._accordion.multiple&&this._accordion._openCloseAllActions.next(!1),this._expanded=n,n?(this._renderer.addClass(this._el.nativeElement,this._accordion.classes.expanded),this.opened.emit()):(this._renderer.removeClass(this._el.nativeElement,this._accordion.classes.expanded),this.closed.emit()),this._cd.markForCheck())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hasToggle",{get:function(){return null==this._hasToggle?this._accordion.hasToggle:this._hasToggle},set:function(e){this._hasToggle=t.toBoolean(e)},enumerable:!0,configurable:!0}),i.prototype.ngOnChanges=function(){this.updateStyle(this._el)},i.prototype.ngOnInit=function(){var e=!1;null==this.bg&&(this.bg="paper",e=!0),null==this.color&&(this.color="text",e=!0),null==this.elevation&&(this.elevation=2,e=!0),e&&this.ngOnChanges()},i.prototype.ngAfterContentInit=function(){var e=this;this._lazyContent&&this.opened.pipe(r.startWith(null),r.filter((function(){return!!e.expanded&&!e._lazyContentRef})),r.first()).subscribe((function(){return e._lazyContentRef=e._lazyContent._template}))},i.prototype.ngOnDestroy=function(){this._openCloseAllSubscription.unsubscribe()},i.prototype.close=function(){this.expanded=!1},i.prototype.open=function(){this.expanded=!0},i.prototype.toggle=function(){this.expanded=!this.expanded},i.prototype._getExpandedState=function(){return this.expanded?"expanded":"collapsed"},i.prototype._subscribeToOpenCloseAllActions=function(){var e=this;return this._accordion._openCloseAllActions.subscribe((function(n){e.expanded=n}))},i.ctorParameters=function(){return[{type:n.ElementRef},{type:n.Renderer2},{type:n.ChangeDetectorRef},{type:t.LyTheme2},{type:d,decorators:[{type:n.Inject,args:[d]}]}]},l([n.ContentChild(f,{static:!1})],i.prototype,"_lazyContent",void 0),l([n.Output()],i.prototype,"closed",void 0),l([n.Output()],i.prototype,"opened",void 0),l([n.Output()],i.prototype,"afterCollapse",void 0),l([n.Output()],i.prototype,"afterExpand",void 0),l([n.Output()],i.prototype,"destroyed",void 0),l([n.Input()],i.prototype,"disabled",null),l([n.Input()],i.prototype,"expanded",null),l([n.Input()],i.prototype,"hasToggle",null),i=l([n.Component({selector:"ly-expansion-panel",template:'<ng-content select="ly-expansion-panel-header"></ng-content>\n<div [className]="classes.panelContent"\n  [@contentExpansion]="{\n    value: _getExpandedState(),\n    params: {\n      panelAnimationTiming: _panelAnimationTiming\n    }\n  }"\n  (@contentExpansion.done)="_bodyAnimationDone.next($event)"\n>\n  <div [className]="classes.panelBody">\n    <ng-content></ng-content>\n    <ng-template [ngTransclude]="_lazyContentRef"></ng-template>\n  </div>\n  <ng-content select="ly-action-row"></ng-content>\n</div>',changeDetection:n.ChangeDetectionStrategy.OnPush,exportAs:"lyExpansionPanel",animations:[u.contentExpansion],inputs:["bg","color","elevation","shadowColor"]}),p(4,n.Inject(d))],i)}(h),m=function(){function e(e,n,t,o){this._accordion=t,this._expansionPanel=o,this.classes=this._accordion.classes,n.addClass(e.nativeElement,this._accordion.classes.panelHeader)}return e.ctorParameters=function(){return[{type:n.ElementRef},{type:n.Renderer2},{type:d,decorators:[{type:n.Inject,args:[d]}]},{type:g,decorators:[{type:n.Inject,args:[g]}]}]},e=l([n.Component({selector:"ly-expansion-panel-header",template:'<span [className]="classes.panelHeaderContent">\n  <ng-content select="ly-panel-title"></ng-content>\n  <ng-content select="ly-panel-description"></ng-content>\n  <ng-content></ng-content>\n</span>\n<ly-expansion-icon\n  *ngIf="!_expansionPanel.disabled && _expansionPanel.hasToggle"\n  [up]="_expansionPanel.expanded"\n></ly-expansion-icon>',host:{"(click)":"_expansionPanel.toggle()"}}),p(2,n.Inject(d)),p(3,n.Inject(g))],e)}(),x=function(){function e(e,n,t){n.addClass(e.nativeElement,t.classes.panelTitle)}return e.ctorParameters=function(){return[{type:n.ElementRef},{type:n.Renderer2},{type:d,decorators:[{type:n.Inject,args:[d]}]}]},e=l([n.Directive({selector:"ly-panel-title"}),p(2,n.Inject(d))],e)}(),_=function(){function e(e,n,t){n.addClass(e.nativeElement,t.classes.panelDescription)}return e.ctorParameters=function(){return[{type:n.ElementRef},{type:n.Renderer2},{type:d,decorators:[{type:n.Inject,args:[d]}]}]},e=l([n.Directive({selector:"ly-panel-description"}),p(2,n.Inject(d))],e)}(),b=function(){function e(e,n,t){n.addClass(e.nativeElement,t.classes.panelActionRow)}return e.ctorParameters=function(){return[{type:n.ElementRef},{type:n.Renderer2},{type:d,decorators:[{type:n.Inject,args:[d]}]}]},e=l([n.Directive({selector:"ly-action-row"}),p(2,n.Inject(d))],e)}(),v=function(){function e(){}return e=l([n.NgModule({declarations:[d,g,m,f,x,_,b],imports:[i.CommonModule,t.LyExpansionIconModule,t.NgTranscludeModule],exports:[d,g,m,f,x,_,b]})],e)}();e.LyAccordion=d,e.LyButtonMixinBase=h,e.LyExpansionModule=v,e.LyExpansionPanel=g,e.LyExpansionPanelBase=y,e.LyExpansionPanelContent=f,e.LyExpansionPanelDescription=_,e.LyExpansionPanelHeader=m,e.LyExpansionPanelTitle=x,e.STYLES=c,e.ɵa=u,e.ɵb=b,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=alyle-ui-expansion.umd.min.js.map