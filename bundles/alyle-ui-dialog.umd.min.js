!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@alyle/ui"),require("@angular/animations"),require("rxjs"),require("@angular/common")):"function"==typeof define&&define.amd?define("@alyle/ui/dialog",["exports","@angular/core","@alyle/ui","@angular/animations","rxjs","@angular/common"],t):t(((e=e||self).ly=e.ly||{},e.ly.dialog={}),e.ng.core,e.ly.core,e.ng.animations,e.rxjs,e.ng.common)}(this,(function(e,t,n,o,r,i){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var a=function(){return(a=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function s(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}var l=function(){function e(e){this._overlayRef=e}return Object.defineProperty(e.prototype,"afterOpened",{get:function(){return this._overlayRef.componentRef.instance._afterOpened.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"beforeClosed",{get:function(){return this._overlayRef.componentRef.instance._beforeClosed.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"afterClosed",{get:function(){return this._overlayRef.componentRef.instance._afterClosed.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"result",{get:function(){return this._result},enumerable:!0,configurable:!0}),e.prototype.close=function(e){var t=this._overlayRef.componentRef.instance;t._beforeClosed.next(e),t._beforeClosed.complete(),t._startClose(),this._result=e},e.ctorParameters=function(){return[{type:n.LyOverlayRef}]},e=s([t.Injectable()],e)}(),c=function(){this.maxHeight="calc(100vh - 64px)",this.maxWidth="calc(100vw - 64px)",this.hasBackdrop=!0},f=new t.InjectionToken("LyDialogData"),p=-2,u=function(e,t){var o=t.selectorsOf(u);return{root:function(){return function(t){return t+"{display:flex;position:relative;background-color:"+e.background.primary.default+";border-radius:4px;box-shadow:"+n.shadowBuilder(12)+";overflow:auto;}"+n.st2c(e.dialog&&e.dialog.root&&(e.dialog.root instanceof n.StyleCollection?e.dialog.root.setTransformer((function(e){return e(o)})):e.dialog.root(o)),""+t)+t+" > :first-child{display:flex;flex-direction:column;width:100%;}"}}}},d=function(){function e(e,t,n,o,i,a){this._appRef=e,this._overlayRef=t,this._theme=n,this._el=o,this._cd=i,this._renderer=a,this.classes=this._theme.addStyleSheet(u,p),this._afterOpened=new r.Subject,this._beforeClosed=new r.Subject,this._afterClosed=new r.Subject,this._state="enter",a.addClass(o.nativeElement,this.classes.root)}return e.prototype.ngOnInit=function(){if(this._componentFactoryOrTemplate instanceof t.TemplateRef){var e=new h(this._newInjector);this._embeddedViewRef=this.viewContainerRef.createEmbeddedView(this._componentFactoryOrTemplate,e)}else this._componentRef=this.viewContainerRef.createComponent(this._componentFactoryOrTemplate,void 0,this._newInjector);var n=this._newInjector.get(c).containerClass;n&&this._renderer.addClass(this._el.nativeElement,n)},e.prototype.ngDoCheck=function(){this._overlayRef.onResizeScroll()},e.prototype._init=function(e,t){this._componentFactoryOrTemplate=e,this._newInjector=t},e.prototype._startClose=function(){this._state="exit",this._cd.markForCheck()},e.prototype._onAnimationStart=function(e){"enter"===e.toState&&this._overlayRef.onResizeScroll()},e.prototype._onAnimationDone=function(e){if("exit"===e.toState){var t=this._newInjector.get(l);this._destroy(),this._overlayRef.destroy(),this._afterClosed.next(t.result),this._afterClosed.complete()}else"enter"===e.toState&&(this._afterOpened.next(),this._afterOpened.complete())},e.prototype._destroy=function(){this._componentRef?(this._appRef.detachView(this._componentRef.hostView),this._componentRef.destroy()):(this._appRef.detachView(this._embeddedViewRef),this._embeddedViewRef.detach(),this._embeddedViewRef.destroy())},e.prototype._getHostElement=function(){return this._el.nativeElement},e.ctorParameters=function(){return[{type:t.ApplicationRef},{type:n.LyOverlayRef},{type:n.LyTheme2},{type:t.ElementRef},{type:t.ChangeDetectorRef},{type:t.Renderer2}]},s([t.ViewChild(t.TemplateRef,{read:t.ViewContainerRef,static:!0})],e.prototype,"viewContainerRef",void 0),e=s([t.Component({selector:"ly-dialog-container",template:"<ng-template></ng-template>",changeDetection:t.ChangeDetectionStrategy.OnPush,animations:[o.trigger("dialogContainer",[o.state("void, exit",o.style({opacity:0,transform:"scale(0.7)"})),o.state("enter",o.style({transform:"none"})),o.transition("* => enter",o.animate("150ms cubic-bezier(0, 0, 0.2, 1)",o.style({transform:"none",opacity:1}))),o.transition("* => void, * => exit",o.animate("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",o.style({opacity:0})))])],host:{"[@dialogContainer]":"_state","(@dialogContainer.start)":"_onAnimationStart($event)","(@dialogContainer.done)":"_onAnimationDone($event)"}})],e)}(),h=function(){function e(e){this._injector=e,this.$implicit=this._injector.get(l),this.dialogRef=this._injector.get(l)}return Object.defineProperty(e.prototype,"data",{get:function(){return this._injector.get(f)},enumerable:!0,configurable:!0}),e}(),y=function(){function e(e,t){this._newInjector=e,this._parentInjector=t}return e.prototype.get=function(e,t,n){var o=this._newInjector.get(e,t);return o||this._parentInjector.get(e,t)},e}(),m=function(){function e(e,t,n,o){this._overlay=e,this._componentFactoryResolver=t,this._theme=n,this._injector=o}return e.prototype.open=function(e,o){var r;o=a({},new c,o),r=e instanceof t.TemplateRef?e:this._componentFactoryResolver.resolveComponentFactory(e);var i=this._overlay.create(d,null,{styles:{top:0,left:0},hasBackdrop:o.hasBackdrop,onResizeScroll:function(){var e=i.containerElement,t=window.innerWidth/2-e.offsetWidth/2,n=window.innerHeight/2-e.offsetHeight/2;e.style.transform="translate3d("+Math.round(t)+"px, "+Math.round(n)+"px, 0)"},disableClose:o.disableClose,backdropClass:o.backdropClass||this._theme.style(n.STYLES_BACKDROP_DARK),fnDestroy:function(){m.close()}}),s=i.componentRef.instance,p=s._getHostElement().style;p.width=_(o.width),p.maxWidth=_(o.maxWidth),p.minWidth=_(o.minWidth),p.height=_(o.height),p.maxHeight=_(o.maxHeight),p.minHeight=_(o.minHeight);var u=[{provide:l,useValue:new l(i.componentRef.injector.get(n.LyOverlayRef))},{provide:c,useValue:o}];null!=o.data&&u.push({provide:f,useValue:o.data});var h=new y(t.Injector.create(u,i.componentRef.injector),this._injector);s._init(r,h);var m=h.get(l);return m},e.ctorParameters=function(){return[{type:n.LyOverlay},{type:t.ComponentFactoryResolver},{type:n.LyTheme2},{type:t.Injector}]},e=s([t.Injectable()],e)}();function _(e){return"number"==typeof e?e+"px":e||null}var g=function(e){return function(t){return t+"{display:block;flex:0 0 auto;margin:20px 0 16px;padding:0 24px;font-size:20px;line-height:24px;font-weight:500;font-family:"+e.typography.fontFamily+";}"}},v=function(){function e(e,t,n){this._renderer=e,this._el=t,this._theme=n}return e.prototype.ngOnInit=function(){this._renderer.addClass(this._el.nativeElement,this._theme.renderStyle(g,-2))},e.ctorParameters=function(){return[{type:t.Renderer2},{type:t.ElementRef},{type:n.LyTheme2}]},e=s([t.Directive({selector:"[ly-dialog-title], [lyDialogTitle]",exportAs:"lyDialogTitle"})],e)}(),b=function(){return function(e){return e+"{display:block;overflow-y:auto;flex:1 1 auto;padding:0 24px 24px;-webkit-overflow-scrolling:touch;}"}},R=function(){function e(e,t,n){this._renderer=e,this._el=t,this._theme=n}return e.prototype.ngOnInit=function(){this._renderer.addClass(this._el.nativeElement,this._theme.renderStyle(b,-2))},e.ctorParameters=function(){return[{type:t.Renderer2},{type:t.ElementRef},{type:n.LyTheme2}]},e=s([t.Directive({selector:"ly-dialog-content, [ly-dialog-content], [lyDialogContent]",exportAs:"lyDialogContent"})],e)}(),w=function(){return function(e){return e+"{display:flex;flex:0 0 auto;padding:8px;flex-wrap:wrap;min-height:52px;align-items:center;}"}},x=function(){function e(e,t,n){this._renderer=e,this._el=t,this._theme=n}return e.prototype.ngOnInit=function(){this._renderer.addClass(this._el.nativeElement,this._theme.renderStyle(w,-2))},e.ctorParameters=function(){return[{type:t.Renderer2},{type:t.ElementRef},{type:n.LyTheme2}]},e=s([t.Directive({selector:"ly-dialog-actions, [ly-dialog-actions], [lyDialogActions]",exportAs:"lyDialogActions"})],e)}(),C=function(){function e(){}return e=s([t.NgModule({entryComponents:[d],declarations:[d,v,R,x],imports:[i.CommonModule,n.LyCommonModule,n.LyOverlayModule],exports:[n.LyCommonModule,d,v,R,x],providers:[m]})],e)}();e.LY_DIALOG_DATA=f,e.LyDialog=m,e.LyDialogModule=C,e.LyDialogRef=l,e.ɵa=d,e.ɵb=v,e.ɵc=R,e.ɵd=x,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=alyle-ui-dialog.umd.min.js.map