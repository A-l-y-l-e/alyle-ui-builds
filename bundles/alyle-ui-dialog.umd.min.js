!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@alyle/ui"),require("@angular/animations"),require("rxjs"),require("@angular/common")):"function"==typeof define&&define.amd?define("@alyle/ui/dialog",["exports","@angular/core","@alyle/ui","@angular/animations","rxjs","@angular/common"],t):t(((e=e||self).ly=e.ly||{},e.ly.dialog={}),e.ng.core,e.ly.core,e.ng.animations,e.rxjs,e.ng.common)}(this,function(e,t,n,o,i,r){"use strict";var a=function(){return(a=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}var c=function(){function e(e){this._overlayRef=e}return Object.defineProperty(e.prototype,"afterOpened",{get:function(){return this._overlayRef.componentRef.instance._afterOpened.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"beforeClosed",{get:function(){return this._overlayRef.componentRef.instance._beforeClosed.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"afterClosed",{get:function(){return this._overlayRef.componentRef.instance._afterClosed.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"result",{get:function(){return this._result},enumerable:!0,configurable:!0}),e.prototype.close=function(e){var t=this._overlayRef.componentRef.instance;t._beforeClosed.next(e),t._beforeClosed.complete(),t._startClose(),this._result=e},e=s([t.Injectable(),l("design:paramtypes",[n.LyOverlayRef])],e)}(),f=function(){this.maxHeight="calc(100vh - 64px)",this.maxWidth="calc(100vw - 64px)",this.hasBackdrop=!0},p=new t.InjectionToken("LyDialogData"),d=-2,h=function(e){return{root:{display:"flex",position:"relative",backgroundColor:e.background.primary["default"],borderRadius:"4px",boxShadow:n.shadowBuilder(12),overflow:"auto","> :first-child":{display:"flex",flexDirection:"column",width:"100%"},"&":e.dialog?e.dialog.root:null}}},u=function(){function e(e,t,n,o,r,a){this._appRef=e,this._overlayRef=t,this._theme=n,this._el=o,this._cd=r,this._renderer=a,this.classes=this._theme.addStyleSheet(h,d),this._afterOpened=new i.Subject,this._beforeClosed=new i.Subject,this._afterClosed=new i.Subject,this._state="enter",a.addClass(o.nativeElement,this.classes.root)}return e.prototype.ngOnInit=function(){if(this._componentFactoryOrTemplate instanceof t.TemplateRef){var e=new y(this._newInjector);this._embeddedViewRef=this.viewContainerRef.createEmbeddedView(this._componentFactoryOrTemplate,e)}else this._componentRef=this.viewContainerRef.createComponent(this._componentFactoryOrTemplate,undefined,this._newInjector);var n=this._newInjector.get(f).containerClass;n&&this._renderer.addClass(this._el.nativeElement,n)},e.prototype.ngDoCheck=function(){this._overlayRef.onResizeScroll()},e.prototype._init=function(e,t){this._componentFactoryOrTemplate=e,this._newInjector=t},e.prototype._startClose=function(){this._state="exit",this._cd.markForCheck()},e.prototype._onAnimationStart=function(e){"enter"===e.toState&&this._overlayRef.onResizeScroll()},e.prototype._onAnimationDone=function(e){if("exit"===e.toState){var t=this._newInjector.get(c);this._destroy(),this._overlayRef.destroy(),this._afterClosed.next(t.result),this._afterClosed.complete()}else"enter"===e.toState&&(this._afterOpened.next(),this._afterOpened.complete())},e.prototype._destroy=function(){this._componentRef?(this._appRef.detachView(this._componentRef.hostView),this._componentRef.destroy()):(this._appRef.detachView(this._embeddedViewRef),this._embeddedViewRef.detach(),this._embeddedViewRef.destroy())},e.prototype._getHostElement=function(){return this._el.nativeElement},s([t.ViewChild(t.TemplateRef,{read:t.ViewContainerRef,"static":!0}),l("design:type",t.ViewContainerRef)],e.prototype,"viewContainerRef",void 0),e=s([t.Component({selector:"ly-dialog-container",template:"<ng-template></ng-template>",changeDetection:t.ChangeDetectionStrategy.OnPush,animations:[o.trigger("dialogContainer",[o.state("void, exit",o.style({opacity:0,transform:"scale(0.7)"})),o.state("enter",o.style({transform:"none"})),o.transition("* => enter",o.animate("150ms cubic-bezier(0, 0, 0.2, 1)",o.style({transform:"none",opacity:1}))),o.transition("* => void, * => exit",o.animate("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",o.style({opacity:0})))])],host:{"[@dialogContainer]":"_state","(@dialogContainer.start)":"_onAnimationStart($event)","(@dialogContainer.done)":"_onAnimationDone($event)"}}),l("design:paramtypes",[t.ApplicationRef,n.LyOverlayRef,n.LyTheme2,t.ElementRef,t.ChangeDetectorRef,t.Renderer2])],e)}(),y=function(){function e(e){this._injector=e,this.$implicit=this._injector.get(c),this.dialogRef=this._injector.get(c)}return Object.defineProperty(e.prototype,"data",{get:function(){return this._injector.get(p)},enumerable:!0,configurable:!0}),e}(),m=function(){function e(e,t){this._newInjector=e,this._parentInjector=t}return e.prototype.get=function(e,t,n){var o=this._newInjector.get(e,t);return o||this._parentInjector.get(e,t)},e}(),_=function(){function e(e,t,n,o){this._overlay=e,this._componentFactoryResolver=t,this._theme=n,this._injector=o}return e.prototype.open=function(e,o){var i;o=a({},new f,o),i=e instanceof t.TemplateRef?e:this._componentFactoryResolver.resolveComponentFactory(e);var r=this._overlay.create(u,null,{styles:{top:0,left:0},hasBackdrop:o.hasBackdrop,onResizeScroll:function(){var e=r.containerElement,t=window.innerWidth/2-e.offsetWidth/2,n=window.innerHeight/2-e.offsetHeight/2;e.style.transform="translate3d("+Math.round(t)+"px, "+Math.round(n)+"px, 0)"},disableClose:o.disableClose,backdropClass:o.backdropClass||this._theme.style(n.STYLES_BACKDROP_DARK),fnDestroy:function(){y.close()}}),s=r.componentRef.instance,l=s._getHostElement().style;l.width=g(o.width),l.maxWidth=g(o.maxWidth),l.minWidth=g(o.minWidth),l.height=g(o.height),l.maxHeight=g(o.maxHeight),l.minHeight=g(o.minHeight);var d=[{provide:c,useValue:new c(r.componentRef.injector.get(n.LyOverlayRef))},{provide:f,useValue:o}];null!=o.data&&d.push({provide:p,useValue:o.data});var h=new m(t.Injector.create(d,r.componentRef.injector),this._injector);s._init(i,h);var y=h.get(c);return y},e=s([t.Injectable(),l("design:paramtypes",[n.LyOverlay,t.ComponentFactoryResolver,n.LyTheme2,t.Injector])],e)}();function g(e){return"number"==typeof e?e+"px":e||null}var v=function(e){return{display:"block",flex:"0 0 auto",margin:"20px 0 16px",padding:"0 24px",fontSize:"20px",lineHeight:"24px",fontWeight:500,fontFamily:e.typography.fontFamily}},R=function(){function e(e,t,n){this._renderer=e,this._el=t,this._theme=n}return e.prototype.ngOnInit=function(){this._renderer.addClass(this._el.nativeElement,this._theme.style(v,-2))},e=s([t.Directive({selector:"[ly-dialog-title], [lyDialogTitle]",exportAs:"lyDialogTitle"}),l("design:paramtypes",[t.Renderer2,t.ElementRef,n.LyTheme2])],e)}(),b={display:"block",overflowY:"auto",flex:"1 1 auto",padding:"0 24px 24px","-webkit-overflow-scrolling":"touch"},C=function(){function e(e,t,n){this._renderer=e,this._el=t,this._theme=n}return e.prototype.ngOnInit=function(){this._renderer.addClass(this._el.nativeElement,this._theme.style(b,-2))},e=s([t.Directive({selector:"ly-dialog-content, [ly-dialog-content], [lyDialogContent]",exportAs:"lyDialogContent"}),l("design:paramtypes",[t.Renderer2,t.ElementRef,n.LyTheme2])],e)}(),x={display:"flex",flex:"0 0 auto",padding:"8px",flexWrap:"wrap",minHeight:"52px",alignItems:"center"},w=function(){function e(e,t,n){this._renderer=e,this._el=t,this._theme=n}return e.prototype.ngOnInit=function(){this._renderer.addClass(this._el.nativeElement,this._theme.style(x,-2))},e=s([t.Directive({selector:"ly-dialog-actions, [ly-dialog-actions], [lyDialogActions]",exportAs:"lyDialogActions"}),l("design:paramtypes",[t.Renderer2,t.ElementRef,n.LyTheme2])],e)}(),j=function(){function e(){}return e=s([t.NgModule({entryComponents:[u],declarations:[u,R,C,w],imports:[r.CommonModule,n.LyCommonModule,n.LyOverlayModule],exports:[n.LyCommonModule,u,R,C,w],providers:[_]})],e)}();e.LY_DIALOG_DATA=p,e.LyDialog=_,e.LyDialogModule=j,e.LyDialogRef=c,e.ɵa=u,e.ɵb=R,e.ɵc=C,e.ɵd=w,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=alyle-ui-dialog.umd.min.js.map