{"version":3,"file":"alyle-ui-select.umd.js","sources":["../../../../node_modules/tslib/tslib.es6.js","ng://@alyle/ui/select/select.ts","ng://@alyle/ui/select/select.module.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import {\n  animate,\n  keyframes,\n  style,\n  transition,\n  trigger\n  } from '@angular/animations';\nimport {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  DoCheck,\n  ElementRef,\n  forwardRef,\n  Host,\n  HostListener,\n  Input,\n  OnDestroy,\n  OnInit,\n  Optional,\n  Renderer2,\n  Self,\n  TemplateRef,\n  ViewChild,\n  NgZone,\n  OnChanges,\n  QueryList,\n  ContentChildren,\n  AfterViewInit,\n  AfterContentInit\n  } from '@angular/core';\nimport {\n  ControlValueAccessor,\n  FormGroupDirective,\n  NgControl,\n  NgForm\n  } from '@angular/forms';\nimport { LyField, LyFieldControlBase, STYLES as FIELD_STYLES } from '@alyle/ui/field';\nimport {\n  LyOverlay,\n  LySelectionModel,\n  LyTheme2,\n  OverlayFactory,\n  shadowBuilder,\n  ThemeVariables,\n  toBoolean,\n  Positioning,\n  CanDisableCtor,\n  mixinStyleUpdater,\n  mixinBg,\n  mixinColor,\n  mixinRaised,\n  mixinDisabled,\n  mixinOutlined,\n  mixinElevation,\n  mixinShadowColor,\n  mixinDisableRipple,\n  mixinTabIndex,\n  LyRippleService,\n  XPosition,\n  YPosition,\n  Dir\n  } from '@alyle/ui';\nimport { Subject } from 'rxjs';\nimport { take, takeUntil } from 'rxjs/operators';\n\nconst DEFAULT_DISABLE_RIPPLE = false;\nconst STYLE_PRIORITY = -2;\nexport const STYLES = (theme: ThemeVariables) => ({\n  $priority: STYLE_PRIORITY,\n  root: {\n    display: 'block',\n    paddingAfter: '1em',\n    minWidth: '3em',\n    minHeight: '1.5em',\n    '-webkit-tap-highlight-color': 'transparent',\n    '&': theme.select ? theme.select.root : null\n  },\n  container: {\n    background: theme.background.primary.default,\n    borderRadius: '2px',\n    boxShadow: shadowBuilder(4),\n    display: 'block',\n    transformOrigin: 'inherit',\n    pointerEvents: 'all',\n    overflow: 'auto',\n    maxHeight: '256px'\n  },\n  valueText: {\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap'\n  },\n  option: {\n    display: 'flex',\n    fontFamily: theme.typography.fontFamily,\n    color: theme.text.default,\n    '-webkit-tap-highlight-color': 'transparent',\n    backgroundColor: `rgba(0, 0, 0, 0)`,\n    border: 0,\n    padding: '0 1em',\n    margin: 0,\n    outline: 'none',\n    boxSizing: 'border-box',\n    position: 'relative',\n    justifyContent: 'flex-start',\n    alignItems: 'center',\n    alignContent: 'center',\n    '-webkit-user-select': 'none',\n    '-moz-user-select': 'none',\n    '-ms-user-select': 'none',\n    userSelect: 'none',\n    lineHeight: '3em',\n    height: '3em',\n    cursor: 'pointer'\n  },\n  optionText: {\n    'ly-checkbox ~ &': {\n      marginBefore: '-16px'\n    }\n  },\n  content: {\n    padding: 0,\n    display: 'flex',\n    justifyContent: 'inherit',\n    alignItems: 'inherit',\n    alignContent: 'inherit',\n    width: '100%',\n    height: '100%',\n    boxSizing: 'border-box'\n  }\n});\n\n/** @docs-private */\nconst ANIMATIONS = [\n  trigger('selectEnter', [\n    transition('void => in', [\n      animate('125ms cubic-bezier(0, 0, 0.2, 1)', keyframes([\n        style({\n          opacity: 0,\n          transform: 'scaleY(0.9)'\n        }),\n        style({\n          opacity: 1,\n          transform: 'scaleY(1)'\n        })\n      ]))\n    ]),\n  ]),\n  trigger('selectLeave', [\n    transition('* => void', animate('100ms 25ms linear', style({ opacity: 0 })))\n  ])\n];\n\n/** @docs-private */\nexport class LySelectBase { }\n/** @docs-private */\nexport const LySelectMixinBase = mixinTabIndex(LySelectBase as CanDisableCtor);\n\n@Component({\n  selector: 'ly-select',\n  templateUrl: 'select.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  exportAs: 'lySelect',\n  host: {\n    '[attr.tabindex]': 'tabIndex'\n  },\n  animations: [...ANIMATIONS],\n  inputs: ['tabIndex'],\n  providers: [\n    { provide: LyFieldControlBase, useExisting: LySelect }\n  ]\n})\nexport class LySelect\n    extends LySelectMixinBase\n    implements ControlValueAccessor, LyFieldControlBase, OnInit, DoCheck, AfterContentInit, AfterViewInit, OnDestroy {\n  /** @docs-private */\n  readonly classes = this._theme.addStyleSheet(STYLES);\n  /** @internal */\n  _selectionModel: LySelectionModel<LyOption>;\n  /** @internal */\n  _value: any;\n  private _overlayRef: OverlayFactory | null;\n  protected _disabled = false;\n  protected _required = false;\n  protected _placeholder: string;\n  readonly stateChanges: Subject<void> = new Subject<void>();\n  private _hasDisabledClass?: boolean;\n  private _errorClass?: string;\n  private _form: NgForm | FormGroupDirective | null = this._parentForm || this._parentFormGroup;\n  private _multiple: boolean;\n  private _opened: boolean;\n  private _valueKey: (opt: unknown) => unknown = same;\n  private _valueKeyFn: (opt: LyOption) => unknown = getValue;\n  _focused: boolean = false;\n  errorState: boolean = false;\n  private _cursorClass: string;\n\n  /** Emits whenever the component is destroyed. */\n  private readonly _destroy = new Subject<void>();\n\n  @ViewChild(TemplateRef, { static: false }) templateRef: TemplateRef<any>;\n  @ViewChild('valueText', { static: false }) valueTextDivRef: ElementRef<HTMLDivElement>;\n  /** @internal */\n  @ViewChild(forwardRef(() => LyOption), { static: false }) _options: QueryList<LyOption>;\n  @ContentChildren(forwardRef(() => LyOption), { descendants: true }) options: QueryList<LyOption>;\n\n  /**\n   * The registered callback function called when a change event occurs on the input element.\n   */\n  onChange = (_: any) => {};\n\n  /**\n   * The registered callback function called when a blur event occurs on the input element.\n   */\n  onTouched = () => {};\n\n  @HostListener('blur') _onBlur() {\n    if (this._focused !== false && !this._opened) {\n      this._focused = false;\n      this.stateChanges.next();\n    }\n  }\n  @HostListener('focus') _onFocus() {\n    if (this._focused !== true && !this.disabled) {\n      this._focused = true;\n      this.stateChanges.next();\n    }\n  }\n\n  /** @internal */\n  _endAnimation(e) {\n    if (e.toState === 'void') {\n      if (this._overlayRef) {\n        this._overlayRef.remove();\n        this._overlayRef = null;\n      }\n    }\n  }\n\n  /** @docs-private */\n  @Input()\n  set value(val) {\n    if (val !== this.value && this._selectionModel) {\n      this._value = val;\n      this.writeValue(val);\n      if (this.options) {\n        if (this.multiple) {\n          if (Array.isArray(this.value)) {\n            const values: LyOption[] = [];\n            this.options.forEach(opt => {\n              if (this.value.some(_ => this._valueKey(_) === this._valueKeyFn(opt))) {\n                values.push(opt);\n              }\n            });\n\n            if (values.length) {\n              const beforeSelecteds = this._selectionModel.selected;\n              // reset\n              this._selectionModel.clear();\n              // select values\n              values.forEach(opt => opt.select());\n\n              // deselect old values\n              if (beforeSelecteds.length) {\n                beforeSelecteds.forEach(opt => {\n                  opt.ngOnChanges();\n                  opt._cd.markForCheck();\n                });\n              }\n            }\n          }\n        } else {\n          // reset\n          const selecteds = this._selectionModel.selected;\n          this._selectionModel.clear();\n          if (selecteds.length) {\n            selecteds.forEach(opt => {\n              opt.ngOnChanges();\n              opt._cd.markForCheck();\n            });\n          }\n\n          const selected = this.options.find(opt => this._valueKeyFn(opt) === this.valueKey(this.value));\n          if (selected) {\n            selected.select();\n          }\n        }\n      }\n      this.stateChanges.next();\n      this._cd.markForCheck();\n    }\n  }\n  get value() {\n    return this._value;\n  }\n\n  /** Whether the input is disabled. */\n  @Input()\n  set disabled(val: boolean) {\n    if (val !== this._disabled) {\n      this._disabled = toBoolean(val);\n      if (this._field) {\n        if (!val && this._hasDisabledClass) {\n          this._renderer.removeClass(this._field._getHostElement(), this._field.classes.disabled);\n          if (this._cursorClass) {\n            this._renderer.addClass(this._field._getHostElement(), this._cursorClass);\n          }\n          this._hasDisabledClass = undefined;\n        } else if (val) {\n          this._renderer.addClass(this._field._getHostElement(), this._field.classes.disabled);\n          if (this._cursorClass) {\n            this._renderer.removeClass(this._field._getHostElement(), this._cursorClass);\n          }\n          this._hasDisabledClass = true;\n        }\n      }\n    }\n  }\n  get disabled(): boolean {\n    if (this.ngControl && this.ngControl.disabled !== null) {\n      return this.ngControl.disabled;\n    }\n    return this._disabled;\n  }\n\n  @Input()\n  set required(value: boolean) {\n    this._required = toBoolean(value);\n  }\n  get required(): boolean { return this._required; }\n\n  @Input()\n  set multiple(value: boolean) {\n    this._multiple = toBoolean(value);\n  }\n  get multiple(): boolean { return this._multiple; }\n\n  @Input()\n  set valueKey(fn: (opt: unknown) => unknown) {\n    this._valueKeyFn = (opt: LyOption) => fn(getValue(opt));\n    this._valueKey = fn;\n  }\n  get valueKey(): (opt: unknown) => unknown { return this._valueKey; }\n\n  @Input()\n  set placeholder(val: string) {\n    this._placeholder = val;\n  }\n  get placeholder(): string { return this._placeholder; }\n\n  get focused() {\n    return this._focused;\n  }\n\n  get empty() {\n    const val = this.value;\n    return this.multiple ? this._selectionModel.isEmpty() : val == null || this._selectionModel.isEmpty();\n  }\n\n  get floatingLabel() {\n    return this._opened ? true : !this.empty;\n  }\n\n  /** The value displayed in the trigger. */\n  get triggerValue(): string {\n    if (this._multiple) {\n      const selectedOptions = this._selectionModel.selected.map(option => option.viewValue);\n\n      if (this._theme.variables.direction === Dir.rtl) {\n        selectedOptions.reverse();\n      }\n\n      return selectedOptions.join(', ');\n    }\n\n    return this._selectionModel.selected[0].viewValue;\n  }\n\n  /** Current selecteds */\n  get selected() {\n    const selected = this._selectionModel.selected;\n    return this.multiple ? selected.map(option => option.value) : selected[0].value;\n  }\n\n  constructor(private _theme: LyTheme2,\n              private _renderer: Renderer2,\n              private _el: ElementRef,\n              private _overlay: LyOverlay,\n              /** @internal */\n              @Optional() public _field: LyField,\n              /** @internal */\n              public _cd: ChangeDetectorRef,\n              private _ngZone: NgZone,\n              /** @docs-private */\n              @Optional() @Self() public ngControl: NgControl,\n              @Optional() private _parentForm: NgForm,\n              @Optional() private _parentFormGroup: FormGroupDirective) {\n    super();\n    if (this.ngControl) {\n      // Note: we provide the value accessor through here, instead of\n      // the `providers` to avoid running into a circular import.\n      this.ngControl.valueAccessor = this;\n    }\n\n    this._cursorClass = this._theme.addStyle('lyField.select', {\n      '& {container}': {\n        cursor: 'pointer'\n      }\n    }, this._field._getHostElement(), null, STYLE_PRIORITY, FIELD_STYLES);\n\n  }\n\n  ngOnInit() {\n    this._selectionModel = new LySelectionModel<LyOption>({\n      multiple: this.multiple ? true : undefined,\n      getKey: this._valueKeyFn\n    });\n    const ngControl = this.ngControl;\n\n    // update styles on disabled\n    if (ngControl && ngControl.statusChanges) {\n      ngControl.statusChanges.pipe(takeUntil(this._destroy)).subscribe(() => {\n        this.disabled = !!ngControl.disabled;\n      });\n    }\n\n    // apply class {selectArrow} to `<select>`\n    this._renderer.addClass(this._field._getHostElement(), this._field.classes.selectArrow);\n\n    // apply default styles\n    this._renderer.addClass(this._el.nativeElement, this._field.classes.inputNative);\n    this._renderer.addClass(this._el.nativeElement, this.classes.root);\n  }\n\n  ngDoCheck() {\n    const oldVal = this.errorState;\n    const newVal = !!(this.ngControl && this.ngControl.invalid && (this.ngControl.touched || (this._form && this._form.submitted)));\n    if (newVal !== oldVal) {\n      this.errorState = newVal;\n      if (this._field) {\n        const errorClass = this._field.classes.errorState;\n        if (newVal) {\n          this._renderer.addClass(this._field._getHostElement(), errorClass);\n          this._errorClass = errorClass;\n        } else if (this._errorClass) {\n          this._renderer.removeClass(this._field._getHostElement(), errorClass);\n          this._errorClass = undefined;\n        }\n        this.stateChanges.next();\n      }\n    }\n  }\n\n  ngAfterContentInit() {\n    Promise.resolve().then(() => {\n      this.value = this.ngControl ? this.ngControl.value : this._value;\n      this.stateChanges.next();\n      this._cd.markForCheck();\n    });\n  }\n\n  ngAfterViewInit() {\n    if (this.options) {\n      this.options.changes.pipe(\n        takeUntil(this._destroy)\n      ).subscribe(() => {\n\n        const selecteds: LyOption[] = [];\n        this.options.forEach(option => {\n          if (option.isSelected) {\n            selecteds.push(option);\n          }\n        });\n\n        // this only update the refs\n        if (selecteds.length) {\n          this._selectionModel.clear();\n          selecteds.forEach(option => this._selectionModel.select(option));\n        }\n      });\n    }\n  }\n\n  ngOnDestroy() {\n    this._destroy.next();\n    this._destroy.complete();\n    this.stateChanges.complete();\n    if (this._overlayRef) {\n      this._overlayRef.destroy();\n    }\n  }\n\n  open() {\n    if (this.disabled) {\n      return;\n    }\n    // this._updateSelectedClass();\n    this._opened = true;\n    this.stateChanges.next();\n    this._overlayRef = this._overlay.create(this.templateRef, null, {\n      styles: {\n        top: 0,\n        left: 0,\n        pointerEvents: null\n      },\n      fnDestroy: this.close.bind(this),\n      onResizeScroll: this._updatePlacement.bind(this)\n    });\n    this._ngZone.onStable.pipe(\n      take(1)\n    ).subscribe(() => this._updatePlacement());\n  }\n\n  close() {\n    if (this._overlayRef) {\n      this.onTouched();\n      this._overlayRef.detach();\n      this._opened = false;\n      this._getHostElement().focus();\n      this.stateChanges.next();\n    }\n  }\n\n  /** @docs-private */\n  onContainerClick() {\n    this.open();\n    this._getHostElement().focus();\n  }\n\n  /** Focuses the input. */\n  focus(): void { this._getHostElement().focus(); }\n\n  _getHostElement() {\n    return this._el.nativeElement;\n  }\n\n  /**\n   * Sets the \"value\" property on the input element.\n   *\n   * @param value The checked value\n   */\n  writeValue(value: any): void {\n    if (this.options) {\n      this.value = value;\n\n    }\n  }\n\n  /**\n   * Registers a function called when the control value changes.\n   *\n   * @param fn The callback function\n   */\n  registerOnChange(fn: (value: any) => any): void {\n    this.onChange = (_valueString: string) => {\n      fn(this.value);\n    };\n  }\n\n  /**\n   * Registers a function called when the control is touched.\n   *\n   * @param fn The callback function\n   */\n  registerOnTouched(fn: () => any): void { this.onTouched = fn; }\n\n  /**\n   * Disables the select. Part of the ControlValueAccessor interface required\n   * to integrate with Angular's core forms API.\n   *\n   * @param isDisabled Sets whether the component is disabled.\n   */\n  setDisabledState(isDisabled: boolean) {\n    this.disabled = isDisabled;\n    this._cd.markForCheck();\n    this.stateChanges.next();\n  }\n\n  private _updatePlacement() {\n    const el = this._overlayRef!.containerElement as HTMLElement;\n    const container = el.querySelector('div')!;\n    const { nativeElement } = this.valueTextDivRef;\n    let panelWidth: number;\n\n    if (this.multiple) {\n      panelWidth = nativeElement.offsetWidth + 32 * 2;\n    } else {\n      panelWidth = nativeElement.offsetWidth + 32;\n    }\n\n\n    // reset height & width\n    this._renderer.setStyle(container, 'height', 'initial');\n    this._renderer.setStyle(container, 'width', `${panelWidth}px`);\n\n\n    const selectedElement: HTMLElement = this._selectionModel.isEmpty()\n        ? el.querySelector('ly-option')!\n        : this._selectionModel.selected[0]._getHostElement();\n\n    const offset = {\n      y: -(nativeElement.offsetHeight / 2 + selectedElement.offsetTop + selectedElement.offsetHeight / 2),\n      x: -16\n    };\n\n    // scroll to selected option\n    if (container.scrollHeight !== container.offsetHeight) {\n      container.scrollTop = selectedElement.offsetTop;\n      if (container.scrollTop === selectedElement.offsetTop) {\n        container.scrollTop = container.scrollTop - (container.offsetHeight / 2) + selectedElement.offsetHeight / 2;\n      } else {\n        container.scrollTop = container.scrollTop - (container.offsetHeight / 2 - (selectedElement.offsetTop - container.scrollTop)) + selectedElement.offsetHeight / 2;\n      }\n      offset.y = container.scrollTop + offset.y;\n    }\n\n    if (this.multiple) {\n      offset.x -= 24;\n    }\n\n    const position = new Positioning(\n      YPosition.below,\n      XPosition.after,\n      null as any,\n      nativeElement,\n      el,\n      this._theme.variables,\n      offset,\n      false\n    );\n\n    // set position\n    this._renderer.setStyle(el, 'transform', `translate3d(${position.x}px, ${position.y}px, 0)`);\n    this._renderer.setStyle(el, 'transform-origin', `${position.ox} ${position.oy} 0`);\n\n    // set height & width\n    this._renderer.setStyle(container, 'height', position.height);\n    const width = position.width === 'initial'\n          ? `${panelWidth}px`\n          : position.width;\n    this._renderer.setStyle(container, 'width', width);\n  }\n\n}\n\n/** @docs-private */\nexport class LyOptionBase {\n  constructor(\n    public _theme: LyTheme2,\n    public _ngZone: NgZone\n  ) { }\n}\n\n/** @docs-private */\nexport const LyOptionMixinBase = mixinStyleUpdater(\n  mixinBg(\n      mixinColor(\n        mixinRaised(\n          mixinDisabled(\n            mixinOutlined(\n              mixinElevation(\n                mixinShadowColor(\n                  mixinDisableRipple(LyOptionBase)))))))));\n\n@Component({\n  selector: 'ly-option',\n  templateUrl: './option.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  inputs: [\n    'bg',\n    'color',\n    'raised',\n    'disabled',\n    'outlined',\n    'elevation',\n    'shadowColor',\n    'disableRipple'\n  ]\n})\nexport class LyOption extends LyOptionMixinBase implements OnInit, OnChanges {\n  /** @docs-private */\n  readonly classes = this._theme.addStyleSheet(STYLES, STYLE_PRIORITY);\n  private _value: any;\n\n  @ViewChild('rippleContainer', { static: false }) _rippleContainer: ElementRef;\n\n  @HostListener('click') _onClick() {\n    if (!this._select.multiple) {\n      this.select();\n      this._select.close();\n    } else {\n      this.toggle();\n    }\n    this._select.onChange(this._select._value);\n  }\n\n  /**\n   * Tracks simple string values bound to the option element.\n   */\n  @Input('value')\n  set value(value: any) {\n    this._value = value;\n  }\n  get value() {\n    return this._value;\n  }\n\n  /** The displayed value of the option. */\n  get viewValue(): string {\n    return ((this._getHostElement() as Element).textContent || '').trim();\n  }\n\n  /** The color of Select */\n  get _color() {\n    return this._select._selectionModel.isSelected(this) ? this._select._field.color : '';\n  }\n\n  get isSelected(): boolean {\n    return this._select._selectionModel.isSelected(this);\n  }\n\n  constructor(/** @internal */\n              @Host() public _select: LySelect,\n              private _el: ElementRef,\n              /** @internal */\n              public _rippleService: LyRippleService,\n              _renderer: Renderer2,\n              _theme: LyTheme2,\n              /** @internal */\n              public _cd: ChangeDetectorRef,\n              _ngZone: NgZone) {\n    super(_theme, _ngZone);\n    _renderer.addClass(_el.nativeElement, this.classes.option);\n    this.setAutoContrast();\n    this._triggerElement = _el;\n  }\n\n  ngOnInit() {\n    if (this.disableRipple == null) {\n      this.disableRipple = DEFAULT_DISABLE_RIPPLE;\n    }\n  }\n\n  ngOnChanges() {\n    this.updateStyle(this._el);\n  }\n\n  select() {\n    if (this.disabled) {\n      return;\n    }\n    if (this._select.multiple) {\n      const beforeSelecteds = this._select._selectionModel.selected;\n      this._select._selectionModel.select(this);\n      this._select._value = this._select._selectionModel.selected.map(opt => opt.value);\n      this.updateStyle(this._el);\n      if (beforeSelecteds.length) {\n        beforeSelecteds.forEach(opt => opt.ngOnChanges());\n      }\n    } else {\n      if (!this._select._selectionModel.isSelected(this)) {\n        const beforeSelecteds = this._select._selectionModel.selected;\n        this._select._selectionModel.select(this);\n        this._select._value = this._value;\n        this.updateStyle(this._el);\n        if (beforeSelecteds.length) {\n          beforeSelecteds.forEach(opt => opt.ngOnChanges());\n        }\n      }\n    }\n    this._select._cd.markForCheck();\n    this._select.stateChanges.next();\n    this._cd.markForCheck();\n  }\n\n  toggle() {\n    if (this.disabled) {\n      return;\n    }\n    if (this._select.multiple) {\n      const beforeSelecteds = this._select._selectionModel.selected;\n      this._select._selectionModel.toggle(this);\n      this._select._value = this._select._selectionModel.selected.map(opt => opt.value);\n      this.updateStyle(this._el);\n      if (beforeSelecteds.length) {\n        beforeSelecteds.forEach(opt => opt.ngOnChanges());\n      }\n    } else {\n      if (!this._select._selectionModel.isSelected(this)) {\n        const beforeSelecteds = this._select._selectionModel.selected;\n        this._select._selectionModel.toggle(this);\n        this._select._value = this._value;\n        this.updateStyle(this._el);\n        if (beforeSelecteds.length) {\n          beforeSelecteds.forEach(opt => opt.ngOnChanges());\n        }\n      }\n    }\n    this._select._cd.markForCheck();\n    this._select.stateChanges.next();\n    this._cd.markForCheck();\n  }\n\n  /** @internal */\n  _getHostElement() {\n    return this._el.nativeElement;\n  }\n\n}\n\nfunction same(o: unknown): unknown {\n  return o;\n}\nfunction getValue(o: LyOption): unknown {\n  return o.value;\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { LyCommonModule, LyOverlayModule } from '@alyle/ui';\nimport { LyCheckboxModule } from '@alyle/ui/checkbox';\n\nimport { LySelect, LyOption } from './select';\n\n@NgModule({\n  declarations: [LySelect, LyOption],\n  imports: [\n    CommonModule,\n    LyCommonModule,\n    LyCheckboxModule,\n    LyOverlayModule\n  ],\n  exports: [LySelect, LyOption, LyCommonModule]\n})\nexport class LySelectModule { }\n"],"names":["shadowBuilder","trigger","transition","animate","keyframes","style","mixinTabIndex","tslib_1.__extends","Subject","FIELD_STYLES","toBoolean","Dir","LySelectionModel","takeUntil","take","Positioning","YPosition","XPosition","tslib_1.__decorate","ViewChild","TemplateRef","ElementRef","forwardRef","QueryList","ContentChildren","HostListener","Input","Component","ChangeDetectionStrategy","LyFieldControlBase","tslib_1.__param","Optional","Self","LyTheme2","Renderer2","LyOverlay","LyField","ChangeDetectorRef","NgZone","NgControl","NgForm","FormGroupDirective","mixinStyleUpdater","mixinBg","mixinColor","mixinRaised","mixinDisabled","mixinOutlined","mixinElevation","mixinShadowColor","mixinDisableRipple","Host","LyRippleService","NgModule","CommonModule","LyCommonModule","LyCheckboxModule","LyOverlayModule"],"mappings":";;;;;;IAAA;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA;;IAEA,IAAI,aAAa,GAAG,SAAS,CAAC,EAAE,CAAC,EAAE;IACnC,IAAI,aAAa,GAAG,MAAM,CAAC,cAAc;IACzC,SAAS,EAAE,SAAS,EAAE,EAAE,EAAE,YAAY,KAAK,IAAI,UAAU,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,EAAE,CAAC;IACpF,QAAQ,UAAU,CAAC,EAAE,CAAC,EAAE,EAAE,KAAK,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;IACnF,IAAI,OAAO,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC/B,CAAC,CAAC;;AAEF,IAAO,SAAS,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE;IAChC,IAAI,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACxB,IAAI,SAAS,EAAE,GAAG,EAAE,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,EAAE;IAC3C,IAAI,CAAC,CAAC,SAAS,GAAG,CAAC,KAAK,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,SAAS,GAAG,CAAC,CAAC,SAAS,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;IACzF,CAAC;AACD,AAuBA;AACA,IAAO,SAAS,UAAU,CAAC,UAAU,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE;IAC1D,IAAI,IAAI,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,MAAM,GAAG,IAAI,KAAK,IAAI,GAAG,IAAI,GAAG,MAAM,CAAC,wBAAwB,CAAC,MAAM,EAAE,GAAG,CAAC,GAAG,IAAI,EAAE,CAAC,CAAC;IACjI,IAAI,IAAI,OAAO,OAAO,KAAK,QAAQ,IAAI,OAAO,OAAO,CAAC,QAAQ,KAAK,UAAU,EAAE,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,UAAU,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;IACnI,SAAS,KAAK,IAAI,CAAC,GAAG,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE,IAAI,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC;IACtJ,IAAI,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;IAClE,CAAC;;AAED,IAAO,SAAS,OAAO,CAAC,UAAU,EAAE,SAAS,EAAE;IAC/C,IAAI,OAAO,UAAU,MAAM,EAAE,GAAG,EAAE,EAAE,SAAS,CAAC,MAAM,EAAE,GAAG,EAAE,UAAU,CAAC,CAAC,EAAE;IACzE,CAAC;;AAED,IAAO,SAAS,UAAU,CAAC,WAAW,EAAE,aAAa,EAAE;IACvD,IAAI,IAAI,OAAO,OAAO,KAAK,QAAQ,IAAI,OAAO,OAAO,CAAC,QAAQ,KAAK,UAAU,EAAE,OAAO,OAAO,CAAC,QAAQ,CAAC,WAAW,EAAE,aAAa,CAAC,CAAC;IACnI,CAAC;AACD,AAoDA;AACA,IAAO,SAAS,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE;IAC7B,IAAI,IAAI,CAAC,GAAG,OAAO,MAAM,KAAK,UAAU,IAAI,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;IAC/D,IAAI,IAAI,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;IACrB,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC;IACrC,IAAI,IAAI;IACR,QAAQ,OAAO,CAAC,CAAC,KAAK,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;IACnF,KAAK;IACL,IAAI,OAAO,KAAK,EAAE,EAAE,CAAC,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE;IAC3C,YAAY;IACZ,QAAQ,IAAI;IACZ,YAAY,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IAC7D,SAAS;IACT,gBAAgB,EAAE,IAAI,CAAC,EAAE,MAAM,CAAC,CAAC,KAAK,CAAC,EAAE;IACzC,KAAK;IACL,IAAI,OAAO,EAAE,CAAC;IACd,CAAC;;AAED,IAAO,SAAS,QAAQ,GAAG;IAC3B,IAAI,KAAK,IAAI,EAAE,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE;IACtD,QAAQ,EAAE,GAAG,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC7C,IAAI,OAAO,EAAE,CAAC;IACd,CAAC;;IC1ED,IAAM,sBAAsB,GAAG,KAAK,CAAC;IACrC,IAAM,cAAc,GAAG,CAAC,CAAC,CAAC;AAC1B,QAAa,MAAM,GAAG,UAAC,KAAqB,IAAK,QAAC;QAChD,SAAS,EAAE,cAAc;QACzB,IAAI,EAAE;YACJ,OAAO,EAAE,OAAO;YAChB,YAAY,EAAE,KAAK;YACnB,QAAQ,EAAE,KAAK;YACf,SAAS,EAAE,OAAO;YAClB,6BAA6B,EAAE,aAAa;YAC5C,GAAG,EAAE,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI;SAC7C;QACD,SAAS,EAAE;YACT,UAAU,EAAE,KAAK,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO;YAC5C,YAAY,EAAE,KAAK;YACnB,SAAS,EAAEA,gBAAa,CAAC,CAAC,CAAC;YAC3B,OAAO,EAAE,OAAO;YAChB,eAAe,EAAE,SAAS;YAC1B,aAAa,EAAE,KAAK;YACpB,QAAQ,EAAE,MAAM;YAChB,SAAS,EAAE,OAAO;SACnB;QACD,SAAS,EAAE;YACT,QAAQ,EAAE,QAAQ;YAClB,YAAY,EAAE,UAAU;YACxB,UAAU,EAAE,QAAQ;SACrB;QACD,MAAM,EAAE;YACN,OAAO,EAAE,MAAM;YACf,UAAU,EAAE,KAAK,CAAC,UAAU,CAAC,UAAU;YACvC,KAAK,EAAE,KAAK,CAAC,IAAI,CAAC,OAAO;YACzB,6BAA6B,EAAE,aAAa;YAC5C,eAAe,EAAE,kBAAkB;YACnC,MAAM,EAAE,CAAC;YACT,OAAO,EAAE,OAAO;YAChB,MAAM,EAAE,CAAC;YACT,OAAO,EAAE,MAAM;YACf,SAAS,EAAE,YAAY;YACvB,QAAQ,EAAE,UAAU;YACpB,cAAc,EAAE,YAAY;YAC5B,UAAU,EAAE,QAAQ;YACpB,YAAY,EAAE,QAAQ;YACtB,qBAAqB,EAAE,MAAM;YAC7B,kBAAkB,EAAE,MAAM;YAC1B,iBAAiB,EAAE,MAAM;YACzB,UAAU,EAAE,MAAM;YAClB,UAAU,EAAE,KAAK;YACjB,MAAM,EAAE,KAAK;YACb,MAAM,EAAE,SAAS;SAClB;QACD,UAAU,EAAE;YACV,iBAAiB,EAAE;gBACjB,YAAY,EAAE,OAAO;aACtB;SACF;QACD,OAAO,EAAE;YACP,OAAO,EAAE,CAAC;YACV,OAAO,EAAE,MAAM;YACf,cAAc,EAAE,SAAS;YACzB,UAAU,EAAE,SAAS;YACrB,YAAY,EAAE,SAAS;YACvB,KAAK,EAAE,MAAM;YACb,MAAM,EAAE,MAAM;YACd,SAAS,EAAE,YAAY;SACxB;KACF,IAAC,CAAC;;IAGH,IAAM,UAAU,GAAG;QACjBC,kBAAO,CAAC,aAAa,EAAE;YACrBC,qBAAU,CAAC,YAAY,EAAE;gBACvBC,kBAAO,CAAC,kCAAkC,EAAEC,oBAAS,CAAC;oBACpDC,gBAAK,CAAC;wBACJ,OAAO,EAAE,CAAC;wBACV,SAAS,EAAE,aAAa;qBACzB,CAAC;oBACFA,gBAAK,CAAC;wBACJ,OAAO,EAAE,CAAC;wBACV,SAAS,EAAE,WAAW;qBACvB,CAAC;iBACH,CAAC,CAAC;aACJ,CAAC;SACH,CAAC;QACFJ,kBAAO,CAAC,aAAa,EAAE;YACrBC,qBAAU,CAAC,WAAW,EAAEC,kBAAO,CAAC,mBAAmB,EAAEE,gBAAK,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;SAC7E,CAAC;KACH,CAAC;;AAGF;QAAA;SAA6B;QAAD,mBAAC;KAAA,IAAA;IAC7B;AACA,QAAa,iBAAiB,GAAGC,gBAAa,CAAC,YAA8B,CAAC,CAAC;AAgB/E;QACYC,4BAAiB;QAmN3B,kBAAoB,MAAgB,EAChB,SAAoB,EACpB,GAAe,EACf,QAAmB;;QAER,MAAe;;QAE3B,GAAsB,EACrB,OAAe;;QAEI,SAAoB,EAC3B,WAAmB,EACnB,gBAAoC;YAZpE,YAaE,iBAAO,SAaR;YA1BmB,YAAM,GAAN,MAAM,CAAU;YAChB,eAAS,GAAT,SAAS,CAAW;YACpB,SAAG,GAAH,GAAG,CAAY;YACf,cAAQ,GAAR,QAAQ,CAAW;YAER,YAAM,GAAN,MAAM,CAAS;YAE3B,SAAG,GAAH,GAAG,CAAmB;YACrB,aAAO,GAAP,OAAO,CAAQ;YAEI,eAAS,GAAT,SAAS,CAAW;YAC3B,iBAAW,GAAX,WAAW,CAAQ;YACnB,sBAAgB,GAAhB,gBAAgB,CAAoB;;YA5N3D,aAAO,GAAG,KAAI,CAAC,MAAM,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;YAM3C,eAAS,GAAG,KAAK,CAAC;YAClB,eAAS,GAAG,KAAK,CAAC;YAEnB,kBAAY,GAAkB,IAAIC,YAAO,EAAQ,CAAC;YAGnD,WAAK,GAAuC,KAAI,CAAC,WAAW,IAAI,KAAI,CAAC,gBAAgB,CAAC;YAGtF,eAAS,GAA8B,IAAI,CAAC;YAC5C,iBAAW,GAA+B,QAAQ,CAAC;YAC3D,cAAQ,GAAY,KAAK,CAAC;YAC1B,gBAAU,GAAY,KAAK,CAAC;;YAIX,cAAQ,GAAG,IAAIA,YAAO,EAAQ,CAAC;;;;YAWhD,cAAQ,GAAG,UAAC,CAAM,KAAO,CAAC;;;;YAK1B,eAAS,GAAG,eAAQ,CAAC;YAwLnB,IAAI,KAAI,CAAC,SAAS,EAAE;;;gBAGlB,KAAI,CAAC,SAAS,CAAC,aAAa,GAAG,KAAI,CAAC;aACrC;YAED,KAAI,CAAC,YAAY,GAAG,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,gBAAgB,EAAE;gBACzD,eAAe,EAAE;oBACf,MAAM,EAAE,SAAS;iBAClB;aACF,EAAE,KAAI,CAAC,MAAM,CAAC,eAAe,EAAE,EAAE,IAAI,EAAE,cAAc,EAAEC,YAAY,CAAC,CAAC;;SAEvE;qBA9OU,QAAQ;QA4CG,0BAAO,GAAP;YACpB,IAAI,IAAI,CAAC,QAAQ,KAAK,KAAK,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;gBAC5C,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;gBACtB,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;aAC1B;SACF;QACsB,2BAAQ,GAAR;YACrB,IAAI,IAAI,CAAC,QAAQ,KAAK,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;gBAC5C,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;gBACrB,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;aAC1B;SACF;;QAGD,gCAAa,GAAb,UAAc,CAAC;YACb,IAAI,CAAC,CAAC,OAAO,KAAK,MAAM,EAAE;gBACxB,IAAI,IAAI,CAAC,WAAW,EAAE;oBACpB,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC;oBAC1B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;iBACzB;aACF;SACF;QAID,sBAAI,2BAAK;iBAmDT;gBACE,OAAO,IAAI,CAAC,MAAM,CAAC;aACpB;;iBArDD,UAAU,GAAG;gBADb,iBAmDC;gBAjDC,IAAI,GAAG,KAAK,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,eAAe,EAAE;oBAC9C,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC;oBAClB,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;oBACrB,IAAI,IAAI,CAAC,OAAO,EAAE;wBAChB,IAAI,IAAI,CAAC,QAAQ,EAAE;4BACjB,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;gCAC7B,IAAM,QAAM,GAAe,EAAE,CAAC;gCAC9B,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAA,GAAG;oCACtB,IAAI,KAAI,CAAC,KAAK,CAAC,IAAI,CAAC,UAAA,CAAC,IAAI,OAAA,KAAI,CAAC,SAAS,CAAC,CAAC,CAAC,KAAK,KAAI,CAAC,WAAW,CAAC,GAAG,CAAC,GAAA,CAAC,EAAE;wCACrE,QAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;qCAClB;iCACF,CAAC,CAAC;gCAEH,IAAI,QAAM,CAAC,MAAM,EAAE;oCACjB,IAAM,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC;;oCAEtD,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,CAAC;;oCAE7B,QAAM,CAAC,OAAO,CAAC,UAAA,GAAG,IAAI,OAAA,GAAG,CAAC,MAAM,EAAE,GAAA,CAAC,CAAC;;oCAGpC,IAAI,eAAe,CAAC,MAAM,EAAE;wCAC1B,eAAe,CAAC,OAAO,CAAC,UAAA,GAAG;4CACzB,GAAG,CAAC,WAAW,EAAE,CAAC;4CAClB,GAAG,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC;yCACxB,CAAC,CAAC;qCACJ;iCACF;6BACF;yBACF;6BAAM;;4BAEL,IAAM,SAAS,GAAG,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC;4BAChD,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,CAAC;4BAC7B,IAAI,SAAS,CAAC,MAAM,EAAE;gCACpB,SAAS,CAAC,OAAO,CAAC,UAAA,GAAG;oCACnB,GAAG,CAAC,WAAW,EAAE,CAAC;oCAClB,GAAG,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC;iCACxB,CAAC,CAAC;6BACJ;4BAED,IAAM,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,UAAA,GAAG,IAAI,OAAA,KAAI,CAAC,WAAW,CAAC,GAAG,CAAC,KAAK,KAAI,CAAC,QAAQ,CAAC,KAAI,CAAC,KAAK,CAAC,GAAA,CAAC,CAAC;4BAC/F,IAAI,QAAQ,EAAE;gCACZ,QAAQ,CAAC,MAAM,EAAE,CAAC;6BACnB;yBACF;qBACF;oBACD,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;oBACzB,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC;iBACzB;aACF;;;WAAA;QAOD,sBAAI,8BAAQ;iBAoBZ;gBACE,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,QAAQ,KAAK,IAAI,EAAE;oBACtD,OAAO,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC;iBAChC;gBACD,OAAO,IAAI,CAAC,SAAS,CAAC;aACvB;;iBAzBD,UAAa,GAAY;gBACvB,IAAI,GAAG,KAAK,IAAI,CAAC,SAAS,EAAE;oBAC1B,IAAI,CAAC,SAAS,GAAGC,YAAS,CAAC,GAAG,CAAC,CAAC;oBAChC,IAAI,IAAI,CAAC,MAAM,EAAE;wBACf,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,iBAAiB,EAAE;4BAClC,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,eAAe,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;4BACxF,IAAI,IAAI,CAAC,YAAY,EAAE;gCACrB,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,eAAe,EAAE,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;6BAC3E;4BACD,IAAI,CAAC,iBAAiB,GAAG,SAAS,CAAC;yBACpC;6BAAM,IAAI,GAAG,EAAE;4BACd,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,eAAe,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;4BACrF,IAAI,IAAI,CAAC,YAAY,EAAE;gCACrB,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,eAAe,EAAE,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;6BAC9E;4BACD,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;yBAC/B;qBACF;iBACF;aACF;;;WAAA;QASD,sBAAI,8BAAQ;iBAGZ,cAA0B,OAAO,IAAI,CAAC,SAAS,CAAC,EAAE;iBAHlD,UAAa,KAAc;gBACzB,IAAI,CAAC,SAAS,GAAGA,YAAS,CAAC,KAAK,CAAC,CAAC;aACnC;;;WAAA;QAID,sBAAI,8BAAQ;iBAGZ,cAA0B,OAAO,IAAI,CAAC,SAAS,CAAC,EAAE;iBAHlD,UAAa,KAAc;gBACzB,IAAI,CAAC,SAAS,GAAGA,YAAS,CAAC,KAAK,CAAC,CAAC;aACnC;;;WAAA;QAID,sBAAI,8BAAQ;iBAIZ,cAA4C,OAAO,IAAI,CAAC,SAAS,CAAC,EAAE;iBAJpE,UAAa,EAA6B;gBACxC,IAAI,CAAC,WAAW,GAAG,UAAC,GAAa,IAAK,OAAA,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,GAAA,CAAC;gBACxD,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;aACrB;;;WAAA;QAID,sBAAI,iCAAW;iBAGf,cAA4B,OAAO,IAAI,CAAC,YAAY,CAAC,EAAE;iBAHvD,UAAgB,GAAW;gBACzB,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC;aACzB;;;WAAA;QAGD,sBAAI,6BAAO;iBAAX;gBACE,OAAO,IAAI,CAAC,QAAQ,CAAC;aACtB;;;WAAA;QAED,sBAAI,2BAAK;iBAAT;gBACE,IAAM,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC;gBACvB,OAAO,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,eAAe,CAAC,OAAO,EAAE,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,CAAC,eAAe,CAAC,OAAO,EAAE,CAAC;aACvG;;;WAAA;QAED,sBAAI,mCAAa;iBAAjB;gBACE,OAAO,IAAI,CAAC,OAAO,GAAG,IAAI,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC;aAC1C;;;WAAA;QAGD,sBAAI,kCAAY;;iBAAhB;gBACE,IAAI,IAAI,CAAC,SAAS,EAAE;oBAClB,IAAM,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,GAAG,CAAC,UAAA,MAAM,IAAI,OAAA,MAAM,CAAC,SAAS,GAAA,CAAC,CAAC;oBAEtF,IAAI,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,SAAS,KAAKC,MAAG,CAAC,GAAG,EAAE;wBAC/C,eAAe,CAAC,OAAO,EAAE,CAAC;qBAC3B;oBAED,OAAO,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBACnC;gBAED,OAAO,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;aACnD;;;WAAA;QAGD,sBAAI,8BAAQ;;iBAAZ;gBACE,IAAM,QAAQ,GAAG,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC;gBAC/C,OAAO,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,GAAG,CAAC,UAAA,MAAM,IAAI,OAAA,MAAM,CAAC,KAAK,GAAA,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;aACjF;;;WAAA;QA8BD,2BAAQ,GAAR;YAAA,iBAoBC;YAnBC,IAAI,CAAC,eAAe,GAAG,IAAIC,mBAAgB,CAAW;gBACpD,QAAQ,EAAE,IAAI,CAAC,QAAQ,GAAG,IAAI,GAAG,SAAS;gBAC1C,MAAM,EAAE,IAAI,CAAC,WAAW;aACzB,CAAC,CAAC;YACH,IAAM,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;;YAGjC,IAAI,SAAS,IAAI,SAAS,CAAC,aAAa,EAAE;gBACxC,SAAS,CAAC,aAAa,CAAC,IAAI,CAACC,mBAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,SAAS,CAAC;oBAC/D,KAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,SAAS,CAAC,QAAQ,CAAC;iBACtC,CAAC,CAAC;aACJ;;YAGD,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,eAAe,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;;YAGxF,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;YACjF,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;SACpE;QAED,4BAAS,GAAT;YACE,IAAM,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC;YAC/B,IAAM,MAAM,GAAG,CAAC,EAAE,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,KAAK,IAAI,CAAC,SAAS,CAAC,OAAO,KAAK,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;YAChI,IAAI,MAAM,KAAK,MAAM,EAAE;gBACrB,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC;gBACzB,IAAI,IAAI,CAAC,MAAM,EAAE;oBACf,IAAM,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC;oBAClD,IAAI,MAAM,EAAE;wBACV,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,eAAe,EAAE,EAAE,UAAU,CAAC,CAAC;wBACnE,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;qBAC/B;yBAAM,IAAI,IAAI,CAAC,WAAW,EAAE;wBAC3B,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,eAAe,EAAE,EAAE,UAAU,CAAC,CAAC;wBACtE,IAAI,CAAC,WAAW,GAAG,SAAS,CAAC;qBAC9B;oBACD,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;iBAC1B;aACF;SACF;QAED,qCAAkB,GAAlB;YAAA,iBAMC;YALC,OAAO,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC;gBACrB,KAAI,CAAC,KAAK,GAAG,KAAI,CAAC,SAAS,GAAG,KAAI,CAAC,SAAS,CAAC,KAAK,GAAG,KAAI,CAAC,MAAM,CAAC;gBACjE,KAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;gBACzB,KAAI,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC;aACzB,CAAC,CAAC;SACJ;QAED,kCAAe,GAAf;YAAA,iBAoBC;YAnBC,IAAI,IAAI,CAAC,OAAO,EAAE;gBAChB,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CACvBA,mBAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CACzB,CAAC,SAAS,CAAC;oBAEV,IAAM,SAAS,GAAe,EAAE,CAAC;oBACjC,KAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAA,MAAM;wBACzB,IAAI,MAAM,CAAC,UAAU,EAAE;4BACrB,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;yBACxB;qBACF,CAAC,CAAC;;oBAGH,IAAI,SAAS,CAAC,MAAM,EAAE;wBACpB,KAAI,CAAC,eAAe,CAAC,KAAK,EAAE,CAAC;wBAC7B,SAAS,CAAC,OAAO,CAAC,UAAA,MAAM,IAAI,OAAA,KAAI,CAAC,eAAe,CAAC,MAAM,CAAC,MAAM,CAAC,GAAA,CAAC,CAAC;qBAClE;iBACF,CAAC,CAAC;aACJ;SACF;QAED,8BAAW,GAAX;YACE,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;YACrB,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;YACzB,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC;YAC7B,IAAI,IAAI,CAAC,WAAW,EAAE;gBACpB,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC;aAC5B;SACF;QAED,uBAAI,GAAJ;YAAA,iBAmBC;YAlBC,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACjB,OAAO;aACR;;YAED,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;YACpB,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;YACzB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,EAAE;gBAC9D,MAAM,EAAE;oBACN,GAAG,EAAE,CAAC;oBACN,IAAI,EAAE,CAAC;oBACP,aAAa,EAAE,IAAI;iBACpB;gBACD,SAAS,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;gBAChC,cAAc,EAAE,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC;aACjD,CAAC,CAAC;YACH,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CACxBC,cAAI,CAAC,CAAC,CAAC,CACR,CAAC,SAAS,CAAC,cAAM,OAAA,KAAI,CAAC,gBAAgB,EAAE,GAAA,CAAC,CAAC;SAC5C;QAED,wBAAK,GAAL;YACE,IAAI,IAAI,CAAC,WAAW,EAAE;gBACpB,IAAI,CAAC,SAAS,EAAE,CAAC;gBACjB,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC;gBAC1B,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;gBACrB,IAAI,CAAC,eAAe,EAAE,CAAC,KAAK,EAAE,CAAC;gBAC/B,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;aAC1B;SACF;;QAGD,mCAAgB,GAAhB;YACE,IAAI,CAAC,IAAI,EAAE,CAAC;YACZ,IAAI,CAAC,eAAe,EAAE,CAAC,KAAK,EAAE,CAAC;SAChC;;QAGD,wBAAK,GAAL,cAAgB,IAAI,CAAC,eAAe,EAAE,CAAC,KAAK,EAAE,CAAC,EAAE;QAEjD,kCAAe,GAAf;YACE,OAAO,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC;SAC/B;;;;;;QAOD,6BAAU,GAAV,UAAW,KAAU;YACnB,IAAI,IAAI,CAAC,OAAO,EAAE;gBAChB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;aAEpB;SACF;;;;;;QAOD,mCAAgB,GAAhB,UAAiB,EAAuB;YAAxC,iBAIC;YAHC,IAAI,CAAC,QAAQ,GAAG,UAAC,YAAoB;gBACnC,EAAE,CAAC,KAAI,CAAC,KAAK,CAAC,CAAC;aAChB,CAAC;SACH;;;;;;QAOD,oCAAiB,GAAjB,UAAkB,EAAa,IAAU,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC,EAAE;;;;;;;QAQ/D,mCAAgB,GAAhB,UAAiB,UAAmB;YAClC,IAAI,CAAC,QAAQ,GAAG,UAAU,CAAC;YAC3B,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC;YACxB,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;SAC1B;QAEO,mCAAgB,GAAxB;YACE,IAAM,EAAE,GAAG,IAAI,CAAC,WAAY,CAAC,gBAA+B,CAAC;YAC7D,IAAM,SAAS,GAAG,EAAE,CAAC,aAAa,CAAC,KAAK,CAAE,CAAC;YACnC,IAAA,kDAAa,CAA0B;YAC/C,IAAI,UAAkB,CAAC;YAEvB,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACjB,UAAU,GAAG,aAAa,CAAC,WAAW,GAAG,EAAE,GAAG,CAAC,CAAC;aACjD;iBAAM;gBACL,UAAU,GAAG,aAAa,CAAC,WAAW,GAAG,EAAE,CAAC;aAC7C;;YAID,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,SAAS,EAAE,QAAQ,EAAE,SAAS,CAAC,CAAC;YACxD,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,SAAS,EAAE,OAAO,EAAK,UAAU,OAAI,CAAC,CAAC;YAG/D,IAAM,eAAe,GAAgB,IAAI,CAAC,eAAe,CAAC,OAAO,EAAE;kBAC7D,EAAE,CAAC,aAAa,CAAC,WAAW,CAAE;kBAC9B,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,eAAe,EAAE,CAAC;YAEzD,IAAM,MAAM,GAAG;gBACb,CAAC,EAAE,EAAE,aAAa,CAAC,YAAY,GAAG,CAAC,GAAG,eAAe,CAAC,SAAS,GAAG,eAAe,CAAC,YAAY,GAAG,CAAC,CAAC;gBACnG,CAAC,EAAE,CAAC,EAAE;aACP,CAAC;;YAGF,IAAI,SAAS,CAAC,YAAY,KAAK,SAAS,CAAC,YAAY,EAAE;gBACrD,SAAS,CAAC,SAAS,GAAG,eAAe,CAAC,SAAS,CAAC;gBAChD,IAAI,SAAS,CAAC,SAAS,KAAK,eAAe,CAAC,SAAS,EAAE;oBACrD,SAAS,CAAC,SAAS,GAAG,SAAS,CAAC,SAAS,IAAI,SAAS,CAAC,YAAY,GAAG,CAAC,CAAC,GAAG,eAAe,CAAC,YAAY,GAAG,CAAC,CAAC;iBAC7G;qBAAM;oBACL,SAAS,CAAC,SAAS,GAAG,SAAS,CAAC,SAAS,IAAI,SAAS,CAAC,YAAY,GAAG,CAAC,IAAI,eAAe,CAAC,SAAS,GAAG,SAAS,CAAC,SAAS,CAAC,CAAC,GAAG,eAAe,CAAC,YAAY,GAAG,CAAC,CAAC;iBACjK;gBACD,MAAM,CAAC,CAAC,GAAG,SAAS,CAAC,SAAS,GAAG,MAAM,CAAC,CAAC,CAAC;aAC3C;YAED,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACjB,MAAM,CAAC,CAAC,IAAI,EAAE,CAAC;aAChB;YAED,IAAM,QAAQ,GAAG,IAAIC,cAAW,CAC9BC,YAAS,CAAC,KAAK,EACfC,YAAS,CAAC,KAAK,EACf,IAAW,EACX,aAAa,EACb,EAAE,EACF,IAAI,CAAC,MAAM,CAAC,SAAS,EACrB,MAAM,EACN,KAAK,CACN,CAAC;;YAGF,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,EAAE,EAAE,WAAW,EAAE,iBAAe,QAAQ,CAAC,CAAC,YAAO,QAAQ,CAAC,CAAC,WAAQ,CAAC,CAAC;YAC7F,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,EAAE,EAAE,kBAAkB,EAAK,QAAQ,CAAC,EAAE,SAAI,QAAQ,CAAC,EAAE,OAAI,CAAC,CAAC;;YAGnF,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,SAAS,EAAE,QAAQ,EAAE,QAAQ,CAAC,MAAM,CAAC,CAAC;YAC9D,IAAM,KAAK,GAAG,QAAQ,CAAC,KAAK,KAAK,SAAS;kBAC/B,UAAU,OAAI;kBACjB,QAAQ,CAAC,KAAK,CAAC;YACvB,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,SAAS,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;SACpD;;QAzb0CC;YAA1CC,cAAS,CAACC,gBAAW,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC;sCAAcA,gBAAW;qDAAM;QAC9BF;YAA1CC,cAAS,CAAC,WAAW,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC;sCAAkBE,eAAU;yDAAiB;QAE7BH;YAAzDC,cAAS,CAACG,eAAU,CAAC,cAAM,OAAA,QAAQ,GAAA,CAAC,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC;sCAAWC,cAAS;kDAAW;QACpBL;YAAnEM,oBAAe,CAACF,eAAU,CAAC,cAAM,OAAA,QAAQ,GAAA,CAAC,EAAE,EAAE,WAAW,EAAE,IAAI,EAAE,CAAC;sCAAUC,cAAS;iDAAW;QAY3EL;YAArBO,iBAAY,CAAC,MAAM,CAAC;;;;+CAKpB;QACsBP;YAAtBO,iBAAY,CAAC,OAAO,CAAC;;;;gDAKrB;QAcDP;YADCQ,UAAK,EAAE;;;6CAmDP;QAODR;YADCQ,UAAK,EAAE;;;gDAoBP;QASDR;YADCQ,UAAK,EAAE;;;gDAGP;QAIDR;YADCQ,UAAK,EAAE;;;gDAGP;QAIDR;YADCQ,UAAK,EAAE;;;gDAIP;QAIDR;YADCQ,UAAK,EAAE;;;mDAGP;QA/KU,QAAQ;YAdpBC,cAAS,CAAC;gBACT,QAAQ,EAAE,WAAW;gBACrB,8SAA0B;gBAC1B,eAAe,EAAEC,4BAAuB,CAAC,MAAM;gBAC/C,QAAQ,EAAE,UAAU;gBACpB,IAAI,EAAE;oBACJ,iBAAiB,EAAE,UAAU;iBAC9B;gBACD,UAAU,WAAM,UAAU,CAAC;gBAC3B,MAAM,EAAE,CAAC,UAAU,CAAC;gBACpB,SAAS,EAAE;oBACT,EAAE,OAAO,EAAEC,wBAAkB,EAAE,WAAW,EAAE,UAAQ,EAAE;iBACvD;aACF,CAAC;YA0NaC,WAAAC,aAAQ,EAAE,CAAA;YAKVD,WAAAC,aAAQ,EAAE,CAAA,EAAED,WAAAE,SAAI,EAAE,CAAA;YAClBF,WAAAC,aAAQ,EAAE,CAAA;YACVD,WAAAC,aAAQ,EAAE,CAAA;6CAZKE,WAAQ;gBACLC,cAAS;gBACfb,eAAU;gBACLc,YAAS;gBAEAC,aAAO;gBAEtBC,sBAAiB;gBACZC,WAAM;gBAEeC,eAAS;gBACdC,YAAM;gBACDC,wBAAkB;WAhOzD,QAAQ,CAudpB;QAAD,eAAC;KAAA,CAtdW,iBAAiB,GAsd5B;IAED;AACA;QACE,sBACS,MAAgB,EAChB,OAAe;YADf,WAAM,GAAN,MAAM,CAAU;YAChB,YAAO,GAAP,OAAO,CAAQ;SACnB;QACP,mBAAC;KAAA,IAAA;IAED;AACA,QAAa,iBAAiB,GAAGC,oBAAiB,CAChDC,UAAO,CACHC,aAAU,CACRC,cAAW,CACTC,gBAAa,CACXC,gBAAa,CACXC,iBAAc,CACZC,mBAAgB,CACdC,qBAAkB,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAiB3D;QAA8B3C,4BAAiB;QA0C7C,mCAC2B,OAAiB,EACxB,GAAe;;QAEhB,cAA+B,EACtC,SAAoB,EACpB,MAAgB;;QAET,GAAsB,EAC7B,OAAe;YAT3B,YAUE,kBAAM,MAAM,EAAE,OAAO,CAAC,SAIvB;YAb0B,aAAO,GAAP,OAAO,CAAU;YACxB,SAAG,GAAH,GAAG,CAAY;YAEhB,oBAAc,GAAd,cAAc,CAAiB;YAI/B,SAAG,GAAH,GAAG,CAAmB;;YAhDhC,aAAO,GAAG,KAAI,CAAC,MAAM,CAAC,aAAa,CAAC,MAAM,EAAE,cAAc,CAAC,CAAC;YAmDnE,SAAS,CAAC,QAAQ,CAAC,GAAG,CAAC,aAAa,EAAE,KAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;YAC3D,KAAI,CAAC,eAAe,EAAE,CAAC;YACvB,KAAI,CAAC,eAAe,GAAG,GAAG,CAAC;;SAC5B;QAjDsB,2BAAQ,GAAR;YACrB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE;gBAC1B,IAAI,CAAC,MAAM,EAAE,CAAC;gBACd,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;aACtB;iBAAM;gBACL,IAAI,CAAC,MAAM,EAAE,CAAC;aACf;YACD,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;SAC5C;QAMD,sBAAI,2BAAK;iBAGT;gBACE,OAAO,IAAI,CAAC,MAAM,CAAC;aACpB;;;;iBALD,UAAU,KAAU;gBAClB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;aACrB;;;WAAA;QAMD,sBAAI,+BAAS;;iBAAb;gBACE,OAAO,CAAE,IAAI,CAAC,eAAe,EAAc,CAAC,WAAW,IAAI,EAAE,EAAE,IAAI,EAAE,CAAC;aACvE;;;WAAA;QAGD,sBAAI,4BAAM;;iBAAV;gBACE,OAAO,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,GAAG,EAAE,CAAC;aACvF;;;WAAA;QAED,sBAAI,gCAAU;iBAAd;gBACE,OAAO,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;aACtD;;;WAAA;QAkBD,2BAAQ,GAAR;YACE,IAAI,IAAI,CAAC,aAAa,IAAI,IAAI,EAAE;gBAC9B,IAAI,CAAC,aAAa,GAAG,sBAAsB,CAAC;aAC7C;SACF;QAED,8BAAW,GAAX;YACE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;SAC5B;QAED,yBAAM,GAAN;YACE,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACjB,OAAO;aACR;YACD,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE;gBACzB,IAAM,eAAe,GAAG,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,QAAQ,CAAC;gBAC9D,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;gBAC1C,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,QAAQ,CAAC,GAAG,CAAC,UAAA,GAAG,IAAI,OAAA,GAAG,CAAC,KAAK,GAAA,CAAC,CAAC;gBAClF,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBAC3B,IAAI,eAAe,CAAC,MAAM,EAAE;oBAC1B,eAAe,CAAC,OAAO,CAAC,UAAA,GAAG,IAAI,OAAA,GAAG,CAAC,WAAW,EAAE,GAAA,CAAC,CAAC;iBACnD;aACF;iBAAM;gBACL,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE;oBAClD,IAAM,eAAe,GAAG,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,QAAQ,CAAC;oBAC9D,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;oBAC1C,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;oBAClC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;oBAC3B,IAAI,eAAe,CAAC,MAAM,EAAE;wBAC1B,eAAe,CAAC,OAAO,CAAC,UAAA,GAAG,IAAI,OAAA,GAAG,CAAC,WAAW,EAAE,GAAA,CAAC,CAAC;qBACnD;iBACF;aACF;YACD,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC;YAChC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;YACjC,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC;SACzB;QAED,yBAAM,GAAN;YACE,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACjB,OAAO;aACR;YACD,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE;gBACzB,IAAM,eAAe,GAAG,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,QAAQ,CAAC;gBAC9D,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;gBAC1C,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,QAAQ,CAAC,GAAG,CAAC,UAAA,GAAG,IAAI,OAAA,GAAG,CAAC,KAAK,GAAA,CAAC,CAAC;gBAClF,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBAC3B,IAAI,eAAe,CAAC,MAAM,EAAE;oBAC1B,eAAe,CAAC,OAAO,CAAC,UAAA,GAAG,IAAI,OAAA,GAAG,CAAC,WAAW,EAAE,GAAA,CAAC,CAAC;iBACnD;aACF;iBAAM;gBACL,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE;oBAClD,IAAM,eAAe,GAAG,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,QAAQ,CAAC;oBAC9D,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;oBAC1C,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;oBAClC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;oBAC3B,IAAI,eAAe,CAAC,MAAM,EAAE;wBAC1B,eAAe,CAAC,OAAO,CAAC,UAAA,GAAG,IAAI,OAAA,GAAG,CAAC,WAAW,EAAE,GAAA,CAAC,CAAC;qBACnD;iBACF;aACF;YACD,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC;YAChC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;YACjC,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC;SACzB;;QAGD,kCAAe,GAAf;YACE,OAAO,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC;SAC/B;QA1HgDW;YAAhDC,cAAS,CAAC,iBAAiB,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC;sCAAmBE,eAAU;0DAAC;QAEvDH;YAAtBO,iBAAY,CAAC,OAAO,CAAC;;;;gDAQrB;QAMDP;YADCQ,UAAK,CAAC,OAAO,CAAC;;;6CAGd;QAvBU,QAAQ;YAfpBC,cAAS,CAAC;gBACT,QAAQ,EAAE,WAAW;gBACrB,iZAA4B;gBAC5B,eAAe,EAAEC,4BAAuB,CAAC,MAAM;gBAC/C,MAAM,EAAE;oBACN,IAAI;oBACJ,OAAO;oBACP,QAAQ;oBACR,UAAU;oBACV,UAAU;oBACV,WAAW;oBACX,aAAa;oBACb,eAAe;iBAChB;aACF,CAAC;YA4CaE,WAAAqB,SAAI,EAAE,CAAA;6CAAiB,QAAQ;gBACnB9B,eAAU;gBAEA+B,kBAAe;gBAC3BlB,cAAS;gBACZD,WAAQ;gBAEJI,sBAAiB;gBACpBC,WAAM;WAnDhB,QAAQ,CAiIpB;QAAD,eAAC;KAAA,CAjI6B,iBAAiB,GAiI9C;IAED,SAAS,IAAI,CAAC,CAAU;QACtB,OAAO,CAAC,CAAC;KACV;IACD,SAAS,QAAQ,CAAC,CAAW;QAC3B,OAAO,CAAC,CAAC,KAAK,CAAC;KAChB;;;QC/xBD;SAA+B;QAAlB,cAAc;YAV1Be,aAAQ,CAAC;gBACR,YAAY,EAAE,CAAC,QAAQ,EAAE,QAAQ,CAAC;gBAClC,OAAO,EAAE;oBACPC,mBAAY;oBACZC,iBAAc;oBACdC,yBAAgB;oBAChBC,kBAAe;iBAChB;gBACD,OAAO,EAAE,CAAC,QAAQ,EAAE,QAAQ,EAAEF,iBAAc,CAAC;aAC9C,CAAC;WACW,cAAc,CAAI;QAAD,qBAAC;KAA/B;;;;;;;;;;;;;;;;;;;"}