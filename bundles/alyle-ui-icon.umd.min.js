!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common/http"),require("@angular/common"),require("@angular/platform-browser"),require("@alyle/ui"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@alyle/ui/icon",["exports","@angular/core","@angular/common/http","@angular/common","@angular/platform-browser","@alyle/ui","rxjs/operators"],e):e((t.ly=t.ly||{},t.ly.icon={}),t.ng.core,t.ng.common.http,t.ng.common,t.ng.platformBrowser,t.ly.core,t.rxjs.operators)}(this,function(t,s,e,n,o,i,a){"use strict";var c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var r={svg:{width:"inherit",height:"inherit",fill:"currentColor"}},p=function(){function t(t,e,n,o){this.http=t,this._sanitizer=e,this._document=n,this.theme=o,this._defaultClass="material-icons",this.svgMap=new Map,this._fontClasses=new Map,this.classes=this.theme.addStyleSheet(r,-2),this.defaultSvgIcon=this._textToSvg('<svg viewBox="0 0 20 20"><circle cx="10" cy="10" r="10"></circle></svg>')}return Object.defineProperty(t.prototype,"defaultClass",{get:function(){return this._defaultClass},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultClassPrefix",{get:function(){return this._defaultClassPrefix},enumerable:!0,configurable:!0}),t.prototype.setSvg=function(n,t){var o=this;if(!this.svgMap.has(n)){var e=this._sanitizer.sanitize(s.SecurityContext.RESOURCE_URL,t),i={obs:this.http.get(e+".svg",{responseType:"text"}).pipe(a.share(),a.map(function(t){if(i.svg)return i.svg;var e=o._textToSvg(t);return o._cacheSvgIcon(e,n),e}))};this.svgMap.set(n,i)}},t.prototype.addSvgIconLiteral=function(t,e){if(!this.svgMap.has(t)){var n=this._sanitizer.sanitize(s.SecurityContext.HTML,e),o=this._textToSvg(n);this.svgMap.set(t,{svg:o})}},t.prototype._textToSvg=function(t){var e=this._document.createElement("DIV");return e.innerHTML=t,e.querySelector("svg")},t.prototype._cacheSvgIcon=function(t,e){this.svgMap.get(e).svg||(this.svgMap.get(e).svg=t)},t.prototype.getSvg=function(t){return this.svgMap.get(t)},t.prototype.setDefaultClass=function(t,e){this._defaultClass=t,this._defaultClassPrefix=e},t.prototype.registerFontClass=function(t){this._fontClasses.set(t.key,t)},t.prototype.getFontClass=function(t){return this._fontClasses.get(t)},t.decorators=[{type:s.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:e.HttpClient},{type:o.DomSanitizer},{type:undefined,decorators:[{type:s.Optional},{type:s.Inject,args:[n.DOCUMENT]}]},{type:i.LyTheme2}]},t.ngInjectableDef=s.defineInjectable({factory:function(){return new t(s.inject(e.HttpClient),s.inject(o.DomSanitizer),s.inject(n.DOCUMENT,8),s.inject(i.LyTheme2))},token:t,providedIn:"root"}),t}(),l=function d(t){this._theme=t},u=i.mixinStyleUpdater(i.mixinBg(i.mixinColor(i.mixinRaised(i.mixinOutlined(i.mixinElevation(i.mixinShadowColor(l))))))),h=function(r){function t(t,e,n,o){var i=r.call(this,o)||this;return i.iconService=t,i._el=e,i._renderer=n,i.setAutoContrast(),i}return function o(t,e){function n(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(t,r),Object.defineProperty(t.prototype,"icon",{get:function(){return this._icon},set:function(t){this._icon=t,i.Platform.isBrowser?this._prepareSvgIcon(this.iconService.getSvg(t)):this._appendDefaultSvgIcon()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSet",{get:function(){return this._fontSet},set:function(t){this._fontSet=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontIcon",{get:function(){return this._fontIcon},set:function(t){this._fontIcon=t},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(){(this.fontSet||this.fontIcon)&&this._updateFontClass(),this.updateStyle(this._el)},t.prototype._isDefault=function(){return!(this.icon||this.fontSet)},t.prototype._prepareSvgIcon=function(t){var e=this;t.svg?this._appendChild(t.svg.cloneNode(!0)):t.obs.pipe(a.take(1)).subscribe(function(t){e._appendChild(t.cloneNode(!0))})},t.prototype._appendChild=function(t){this._cleanIcon(),this._iconElement=t,this._renderer.addClass(t,this.iconService.classes.svg),this._renderer.appendChild(this._el.nativeElement,t)},t.prototype._appendDefaultSvgIcon=function(){this._appendChild(this.iconService.defaultSvgIcon)},t.prototype._updateClass=function(){this._isDefault()&&this._renderer.addClass(this._el.nativeElement,this.iconService.defaultClass)},t.prototype.ngOnInit=function(){this._updateClass(),this._theme.addStyle("lyIconRoot",function(t){return"font-size:"+t.icon.fontSize+";width:1em;position:relative;height:1em;display:inline-flex;-webkit-box-sizing: content-box;-moz-box-sizing: content-box;box-sizing: content-box;"},this._el.nativeElement,undefined,-2)},t.prototype.ngOnDestroy=function(){this._cleanIcon()},t.prototype._cleanIcon=function(){var t=this._iconElement;t&&(this._renderer.removeChild(this._el.nativeElement,t),this._iconElement=null)},t.prototype._updateFontClass=function(){var t=this._currentClass,e=this.fontSet,n=this.fontIcon,o=this._el.nativeElement,i=this.iconService.getFontClass(e);t&&this._renderer.removeClass(o,t),this._previousFontSet&&this._previousFontSet["class"]&&this._renderer.removeClass(o,this._previousFontSet["class"]),i&&(this._previousFontSet=i),this._currentClass=""+i.prefix+n,this._renderer.addClass(o,this._currentClass)},t.decorators=[{type:s.Directive,args:[{selector:"ly-icon",inputs:["bg","color","raised","outlined","elevation","shadowColor"]}]}],t.ctorParameters=function(){return[{type:p},{type:s.ElementRef},{type:s.Renderer2},{type:i.LyTheme2}]},t.propDecorators={icon:[{type:s.Input}],fontSet:[{type:s.Input}],fontIcon:[{type:s.Input}]},t}(u),f=function(){function t(){}return t.decorators=[{type:s.NgModule,args:[{declarations:[h],exports:[h,i.LyCommonModule]}]}],t}();t.LyIconModule=f,t.LyIconService=p,t.LyIconBase=l,t.LyIconMixinBase=u,t.LyIcon=h,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=alyle-ui-icon.umd.min.js.map