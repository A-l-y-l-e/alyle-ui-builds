!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common/http"),require("@angular/common"),require("rxjs/operators"),require("@alyle/ui"),require("@angular/platform-browser")):"function"==typeof define&&define.amd?define("@alyle/ui/icon",["exports","@angular/core","@angular/common/http","@angular/common","rxjs/operators","@alyle/ui","@angular/platform-browser"],t):t((e.alyle=e.alyle||{},e.alyle.ui=e.alyle.ui||{},e.alyle.ui.icon={}),e.ng.core,e.ng.common.http,e.ng.common,e.rxjs.operators,e.alyle.ui,e.ng.platformBrowser)}(this,function(e,s,t,n,a,i,o){"use strict";var c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var r={svg:{width:"inherit",height:"inherit",fill:"currentColor"}},l=function(){function e(e,t,n,o){this.http=e,this._sanitizer=t,this.document=n,this.theme=o,this._defaultClass="material-icons",this.svgMap=new Map,this._fontClasses=new Map,this.classes=this.theme.addStyleSheet(r,-2),this.defaultSvgIcon=this._textToSvg('<svg viewBox="0 0 20 20"><circle cx="10" cy="10" r="10"></circle></svg>')}return Object.defineProperty(e.prototype,"defaultClass",{get:function(){return this._defaultClass},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultClassPrefix",{get:function(){return this._defaultClassPrefix},enumerable:!0,configurable:!0}),e.prototype.setSvg=function(n,e){var o=this;if(!this.svgMap.has(n)){var t=this._sanitizer.sanitize(s.SecurityContext.RESOURCE_URL,e),i={obs:this.http.get(t+".svg",{responseType:"text"}).pipe(a.share(),a.map(function(e){if(i.svg)return i.svg;var t=o._textToSvg(e);return o._cacheSvgIcon(t,n),t}))};this.svgMap.set(n,i)}},e.prototype.addSvgIconLiteral=function(e,t){if(!this.svgMap.has(e)){var n=this._sanitizer.sanitize(s.SecurityContext.HTML,t),o=this._textToSvg(n);this.svgMap.set(e,{svg:o})}},e.prototype._textToSvg=function(e){var t=this.document.createElement("DIV");return t.innerHTML=e,t.querySelector("svg")},e.prototype._cacheSvgIcon=function(e,t){this.svgMap.get(t).svg||(this.svgMap.get(t).svg=e)},e.prototype.getSvg=function(e){return this.svgMap.get(e)},e.prototype.setDefaultClass=function(e,t){this._defaultClass=e,this._defaultClassPrefix=t},e.prototype.registerFontClass=function(e){this._fontClasses.set(e.key,e)},e.prototype.getFontClass=function(e){return this._fontClasses.get(e)},e.decorators=[{type:s.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:t.HttpClient},{type:o.DomSanitizer},{type:undefined,decorators:[{type:s.Optional},{type:s.Inject,args:[n.DOCUMENT]}]},{type:i.LyTheme2}]},e.ngInjectableDef=s.defineInjectable({factory:function(){return new e(s.inject(t.HttpClient),s.inject(o.DomSanitizer),s.inject(n.DOCUMENT,8),s.inject(i.LyTheme2))},token:e,providedIn:"root"}),e}(),p=function d(e){this._theme=e},u=i.mixinStyleUpdater(i.mixinBg(i.mixinFlat(i.mixinColor(i.mixinRaised(i.mixinOutlined(i.mixinElevation(i.mixinShadowColor(p)))))))),f=function(r){function e(e,t,n,o){var i=r.call(this,o)||this;return i.iconService=e,i._el=t,i._renderer=n,i.setAutoContrast(),i}return function o(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(e,r),Object.defineProperty(e.prototype,"src",{get:function(){return this._src},set:function(e){if(this._src=e,i.Platform.isBrowser){if(e){var t="_url:"+e;this.iconService.setSvg(t,e),this._prepareSvgIcon(this.iconService.getSvg(t))}}else this._appendDefaultSvgIcon()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){return this._icon},set:function(e){this._icon=e,i.Platform.isBrowser?this._prepareSvgIcon(this.iconService.getSvg(e)):this._appendDefaultSvgIcon()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontSet",{get:function(){return this._fontSet},set:function(e){this._fontSet=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontIcon",{get:function(){return this._fontIcon},set:function(e){this._fontIcon=e},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(){(this.fontSet||this.fontIcon)&&this._updateFontClass(),this.updateStyle(this._el)},e.prototype._isDefault=function(){return!(this.src||this.icon||this.fontSet)},e.prototype._prepareSvgIcon=function(e){var t=this;e.svg?(this._cleanIcon(),this._appendChild(e.svg.cloneNode(!0))):e.obs.pipe(a.take(1)).subscribe(function(e){t._cleanIcon(),t._appendChild(e.cloneNode(!0))})},e.prototype._appendChild=function(e){this._renderer.addClass(e,this.iconService.classes.svg),this._renderer.appendChild(this._el.nativeElement,e)},e.prototype._appendDefaultSvgIcon=function(){this._appendChild(this.iconService.defaultSvgIcon)},e.prototype._updateClass=function(){this._isDefault()&&this._renderer.addClass(this._el.nativeElement,this.iconService.defaultClass)},e.prototype.ngOnInit=function(){this._updateClass(),this._theme.addStyle("lyIconRoot",function(e){return"font-size:"+e.icon.fontSize+";width:1em;height:1em;display:inline-flex;"},this._el.nativeElement,undefined,-2)},e.prototype._cleanIcon=function(){var e=this._el.nativeElement.querySelector("svg");e&&this._renderer.removeChild(this._el,e)},e.prototype._updateFontClass=function(){var e=this._currentClass,t=this.fontSet,n=this.fontIcon,o=this._el.nativeElement,i=this.iconService.getFontClass(t);e&&this._renderer.removeClass(o,e),this._previousFontSet&&this._previousFontSet["class"]&&this._renderer.removeClass(o,this._previousFontSet["class"]),i&&(this._previousFontSet=i),this._currentClass=""+i.prefix+n,this._renderer.addClass(o,this._currentClass)},e.decorators=[{type:s.Directive,args:[{selector:"ly-icon",inputs:["bg","flat","color","raised","outlined","elevation","shadowColor"]}]}],e.ctorParameters=function(){return[{type:l},{type:s.ElementRef},{type:s.Renderer2},{type:i.LyTheme2}]},e.propDecorators={src:[{type:s.Input}],icon:[{type:s.Input}],fontSet:[{type:s.Input}],fontIcon:[{type:s.Input}]},e}(u),h=function(){function e(){}return e.decorators=[{type:s.NgModule,args:[{declarations:[f],exports:[f,i.LyCommonModule]}]}],e}();e.LyIconModule=h,e.LyIconService=l,e.LyIconBase=p,e.LyIconMixinBase=u,e.LyIcon=f,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=alyle-ui-icon.umd.min.js.map