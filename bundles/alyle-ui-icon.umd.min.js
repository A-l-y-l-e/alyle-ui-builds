!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@alyle/ui"),require("@angular/common/http"),require("@angular/common"),require("rxjs/operators"),require("@angular/platform-browser")):"function"==typeof define&&define.amd?define("@alyle/ui/icon",["exports","@angular/core","@alyle/ui","@angular/common/http","@angular/common","rxjs/operators","@angular/platform-browser"],e):e(((t=t||self).ly=t.ly||{},t.ly.icon={}),t.ng.core,t.ly.core,t.ng.common.http,t.ng.common,t.rxjs.operators,t.ng.platformBrowser)}(this,function(t,e,n,o,i,r,s){"use strict";var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function c(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s}function l(t,e){return function(n,o){e(n,o,t)}}function p(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}var u=-2,f={svg:{width:"inherit",height:"inherit",fill:"currentColor"}},h=function(){function t(t,e,n,o){this.http=t,this._sanitizer=e,this._document=n,this.theme=o,this._defaultClass="material-icons",this.svgMap=new Map,this._fontClasses=new Map,this.classes=this.theme.addStyleSheet(f,u),this.defaultSvgIcon=this._textToSvg('<svg viewBox="0 0 20 20"><circle cx="10" cy="10" r="10"></circle></svg>')}return Object.defineProperty(t.prototype,"defaultClass",{get:function(){return this._defaultClass},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultClassPrefix",{get:function(){return this._defaultClassPrefix},enumerable:!0,configurable:!0}),t.prototype.setSvg=function(t,n){var o=this;if(!this.svgMap.has(t)){var i=this._sanitizer.sanitize(e.SecurityContext.RESOURCE_URL,n),s={obs:this.http.get(i+".svg",{responseType:"text"}).pipe(r.share(),r.map(function(e){if(s.svg)return s.svg;var n=o._textToSvg(e);return o._cacheSvgIcon(n,t),n}))};this.svgMap.set(t,s)}},t.prototype.addSvgIconLiteral=function(t,n){if(!this.svgMap.has(t)){var o=this._sanitizer.sanitize(e.SecurityContext.HTML,n);if(!o)throw new Error("LyIconService: Failed sanitize '"+t+"'");var i=this._textToSvg(o);this.svgMap.set(t,{svg:i})}},t.prototype._textToSvg=function(t){var e=this._document.createElement("DIV");return e.innerHTML=t,e.querySelector("svg")},t.prototype._cacheSvgIcon=function(t,e){this.svgMap.get(e).svg||(this.svgMap.get(e).svg=t)},t.prototype.getSvg=function(t){if(!this.svgMap.has(t))throw new Error("LyIconService: Icon "+t+" not found");return this.svgMap.get(t)},t.prototype.setDefaultClass=function(t,e){this._defaultClass=t,this._defaultClassPrefix=e},t.prototype.registerFontClass=function(t){this._fontClasses.set(t.key,t)},t.prototype.getFontClass=function(t){return this._fontClasses.get(t)},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(o.HttpClient),e.ɵɵinject(s.DomSanitizer),e.ɵɵinject(i.DOCUMENT,8),e.ɵɵinject(n.LyTheme2))},token:t,providedIn:"root"}),t=c([e.Injectable({providedIn:"root"}),l(2,e.Optional()),l(2,e.Inject(i.DOCUMENT)),p("design:paramtypes",[o.HttpClient,s.DomSanitizer,Object,n.LyTheme2])],t)}(),d=function(t){this._theme=t},g=n.mixinStyleUpdater(n.mixinBg(n.mixinColor(n.mixinRaised(n.mixinOutlined(n.mixinElevation(n.mixinShadowColor(d))))))),y=function(t){function o(e,n,o,i){var r=t.call(this,i)||this;return r.iconService=e,r._el=n,r._renderer=o,r.setAutoContrast(),r}return function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(o,t),Object.defineProperty(o.prototype,"icon",{get:function(){return this._icon},set:function(t){this._icon=t,n.Platform.isBrowser?this._prepareSvgIcon(this.iconService.getSvg(t)):this._appendDefaultSvgIcon()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fontSet",{get:function(){return this._fontSet},set:function(t){this._fontSet=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fontIcon",{get:function(){return this._fontIcon},set:function(t){this._fontIcon=t},enumerable:!0,configurable:!0}),o.prototype.ngOnChanges=function(){(this.fontSet||this.fontIcon)&&this._updateFontClass(),this.updateStyle(this._el)},o.prototype._isDefault=function(){return!(this.icon||this.fontSet)},o.prototype._prepareSvgIcon=function(t){var e=this;t.svg?this._appendChild(t.svg.cloneNode(!0)):t.obs.pipe(r.take(1)).subscribe(function(t){e._appendChild(t.cloneNode(!0))})},o.prototype._appendChild=function(t){this._cleanIcon(),this._iconElement=t,this._renderer.addClass(t,this.iconService.classes.svg),this._renderer.appendChild(this._el.nativeElement,t)},o.prototype._appendDefaultSvgIcon=function(){this._appendChild(this.iconService.defaultSvgIcon)},o.prototype._updateClass=function(){this._isDefault()&&this.iconService.defaultClass&&this._renderer.addClass(this._el.nativeElement,this.iconService.defaultClass)},o.prototype.ngOnInit=function(){this._updateClass(),this._theme.addStyle("lyIconRoot",function(t){return"font-size:"+t.icon.fontSize+";width:1em;position:relative;height:1em;display:inline-flex;-webkit-box-sizing: content-box;-moz-box-sizing: content-box;box-sizing: content-box;"},this._el.nativeElement,undefined,-2)},o.prototype.ngOnDestroy=function(){this._cleanIcon()},o.prototype._cleanIcon=function(){var t=this._iconElement;t&&(this._renderer.removeChild(this._el.nativeElement,t),this._iconElement=undefined)},o.prototype._updateFontClass=function(){var t=this._currentClass,e=this.fontSet,n=this.fontIcon,o=this._el.nativeElement,i=this.iconService.getFontClass(e);if(t&&this._renderer.removeClass(o,t),this._previousFontSet&&this._previousFontSet["class"]&&this._renderer.removeClass(o,this._previousFontSet["class"]),!i)throw new Error("Icon with key"+e+" not found");this._previousFontSet=i,this._currentClass=""+i.prefix+n,this._renderer.addClass(o,this._currentClass)},c([e.Input(),p("design:type",String),p("design:paramtypes",[String])],o.prototype,"icon",null),c([e.Input(),p("design:type",String),p("design:paramtypes",[String])],o.prototype,"fontSet",null),c([e.Input(),p("design:type",String),p("design:paramtypes",[String])],o.prototype,"fontIcon",null),o=c([e.Directive({selector:"ly-icon",inputs:["bg","color","raised","outlined","elevation","shadowColor"]}),p("design:paramtypes",[h,e.ElementRef,e.Renderer2,n.LyTheme2])],o)}(g),v=function(){function t(){}return t=c([e.NgModule({declarations:[y],exports:[y,n.LyCommonModule]})],t)}();t.LyIcon=y,t.LyIconBase=d,t.LyIconMixinBase=g,t.LyIconModule=v,t.LyIconService=h,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=alyle-ui-icon.umd.min.js.map