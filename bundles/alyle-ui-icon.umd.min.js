!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common/http"),require("@angular/common"),require("rxjs/operators"),require("@alyle/ui")):"function"==typeof define&&define.amd?define("@alyle/ui/icon",["exports","@angular/core","@angular/common/http","@angular/common","rxjs/operators","@alyle/ui"],t):t((e.alyle=e.alyle||{},e.alyle.ui=e.alyle.ui||{},e.alyle.ui.icon={}),e.ng.core,e.ng.common.http,e.ng.common,e.rxjs.operators,e.alyle.ui)}(this,function(e,t,n,o,s,i){"use strict";var c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var r={svg:{width:"inherit",height:"inherit",fill:"currentColor"}},a=function(){function e(e,t,n){this.http=e,this.document=t,this.theme=n,this.svgMap=new Map,this.classes=this.theme.addStyleSheet(r,-2),this.defaultSvgIcon=this._textToSvg('<svg viewBox="0 0 20 20"><circle cx="10" cy="10" r="10"></circle></svg>')}return e.prototype.setSvg=function(n,e){var o=this;if(!this.svgMap.has(n)){e+=".svg";var i={obs:this.http.get(e,{responseType:"text"}).pipe(s.share(),s.map(function(e){if(i.svg)return i.svg;var t=o._textToSvg(e);return o._cacheSvgIcon(t,n),t}))};this.svgMap.set(n,i)}},e.prototype._textToSvg=function(e){var t=this.document.createElement("DIV");return t.innerHTML=e,t.querySelector("svg")},e.prototype._cacheSvgIcon=function(e,t){this.svgMap.get(t).svg||(this.svgMap.get(t).svg=e)},e.prototype.getSvg=function(e){return this.svgMap.get(e)},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:n.HttpClient},{type:undefined,decorators:[{type:t.Optional},{type:t.Inject,args:[o.DOCUMENT]}]},{type:i.LyTheme2}]},e.ngInjectableDef=t.defineInjectable({factory:function(){return new e(t.inject(n.HttpClient),t.inject(o.DOCUMENT,8),t.inject(i.LyTheme2))},token:e,providedIn:"root"}),e}(),p=function f(e){this._theme=e},l=i.mixinStyleUpdater(i.mixinBg(i.mixinFlat(i.mixinColor(i.mixinRaised(i.mixinOutlined(i.mixinElevation(i.mixinShadowColor(p)))))))),u=function(r){function e(e,t,n,o){var i=r.call(this,o)||this;return i.iconService=e,i._el=t,i._renderer=n,i._defaultClass="material-icons",i.setAutoContrast(),i}return function o(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(e,r),Object.defineProperty(e.prototype,"src",{get:function(){return this._src},set:function(e){if(this._src=e,i.Platform.isBrowser){if(e){var t="_url:"+e;this.iconService.setSvg(t,e),this._prepareSvgIcon(this.iconService.getSvg(t))}}else this._appendDefaultSvgIcon()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){return this._icon},set:function(e){this._icon=e,i.Platform.isBrowser?this._prepareSvgIcon(this.iconService.getSvg(e)):this._appendDefaultSvgIcon()},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(){this.updateStyle(this._el)},e.prototype._isDefault=function(){return!(this.src||this.icon)},e.prototype._prepareSvgIcon=function(e){var t=this;e.svg?(this._cleanIcon(),this._appendChild(e.svg.cloneNode(!0))):e.obs.pipe(s.take(1)).subscribe(function(e){t._cleanIcon(),t._appendChild(e.cloneNode(!0))})},e.prototype._appendChild=function(e){this._renderer.addClass(e,this.iconService.classes.svg),this._renderer.appendChild(this._el.nativeElement,e)},e.prototype._appendDefaultSvgIcon=function(){this._appendChild(this.iconService.defaultSvgIcon)},e.prototype._updateClass=function(){this._isDefault()&&this._renderer.addClass(this._el.nativeElement,this._defaultClass)},e.prototype.ngOnInit=function(){this._updateClass(),this._theme.addStyle("lyIconRoot",function(e){return"font-size:"+e.icon.fontSize+";width:1em;height:1em;display:inline-flex;"},this._el.nativeElement,undefined,-2)},e.prototype._cleanIcon=function(){var e=this._el.nativeElement.querySelector("svg");e&&this._renderer.removeChild(this._el,e)},e.decorators=[{type:t.Directive,args:[{selector:"ly-icon",inputs:["bg","flat","color","raised","outlined","elevation","shadowColor"]}]}],e.ctorParameters=function(){return[{type:a},{type:t.ElementRef},{type:t.Renderer2},{type:i.LyTheme2}]},e.propDecorators={src:[{type:t.Input}],icon:[{type:t.Input}]},e}(l),h=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[u],exports:[u,i.LyCommonModule]}]}],e}();e.LyIconModule=h,e.LyIconService=a,e.LyButtonBase=p,e.LyButtonMixinBase=l,e.LyIcon=u,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=alyle-ui-icon.umd.min.js.map