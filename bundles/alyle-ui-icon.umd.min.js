!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common/http"),require("@angular/common"),require("rxjs/operators"),require("@alyle/ui")):"function"==typeof define&&define.amd?define("@alyle/ui/icon",["exports","@angular/core","@angular/common/http","@angular/common","rxjs/operators","@alyle/ui"],t):t((e.alyle=e.alyle||{},e.alyle.ui=e.alyle.ui||{},e.alyle.ui.icon={}),e.ng.core,e.ng.common.http,e.ng.common,e.rxjs.operators,e.alyle.ui)}(this,function(e,t,n,i,o,r){"use strict";var s={svg:{width:"inherit",height:"inherit",fill:"currentColor"}},c=function(){function e(e,t,n){this.http=e,this.document=t,this.theme=n,this.svgMap=new Map,this.classes=this.theme.addStyleSheet(s,-2),this.defaultSvgIcon=this._textToSvg('<svg viewBox="0 0 20 20"><circle cx="10" cy="10" r="10"></circle></svg>')}return e.prototype.setSvg=function(n,e){var i=this;if(!this.svgMap.has(n)){e+=".svg";var r={obs:this.http.get(e,{responseType:"text"}).pipe(o.share(),o.map(function(e){if(r.svg)return r.svg;var t=i._textToSvg(e);return i._cacheSvgIcon(t,n),t}))};this.svgMap.set(n,r)}},e.prototype._textToSvg=function(e){var t=this.document.createElement("DIV");return t.innerHTML=e,t.querySelector("svg")},e.prototype._cacheSvgIcon=function(e,t){this.svgMap.get(t).svg||(this.svgMap.get(t).svg=e)},e.prototype.getSvg=function(e){return this.svgMap.get(e)},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:n.HttpClient},{type:undefined,decorators:[{type:t.Optional},{type:t.Inject,args:[i.DOCUMENT]}]},{type:r.LyTheme2}]},e.ngInjectableDef=t.defineInjectable({factory:function(){return new e(t.inject(n.HttpClient),t.inject(i.DOCUMENT,8),t.inject(r.LyTheme2))},token:e,providedIn:"root"}),e}(),a=function(){function e(e,t,n,i){this.iconService=e,this.elementRef=t,this.renderer=n,this.theme=i,this._defaultClass="material-icons"}return Object.defineProperty(e.prototype,"src",{get:function(){return this._src},set:function(e){if(this._src=e,r.Platform.isBrowser){if(e){var t="_url:"+e;this.iconService.setSvg(t,e),this._prepareSvgIcon(this.iconService.getSvg(t))}}else this._appendDefaultSvgIcon()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){return this._icon},set:function(e){this._icon=e,r.Platform.isBrowser?this._prepareSvgIcon(this.iconService.getSvg(e)):this._appendDefaultSvgIcon()},enumerable:!0,configurable:!0}),e.prototype._isDefault=function(){return!(this.src||this.icon)},e.prototype._prepareSvgIcon=function(e){var t=this;e.svg?(this._cleanIcon(),this._appendChild(e.svg.cloneNode(!0))):e.obs.pipe(o.take(1)).subscribe(function(e){t._cleanIcon(),t._appendChild(e.cloneNode(!0))})},e.prototype._appendChild=function(e){this.renderer.addClass(e,this.iconService.classes.svg),this.renderer.appendChild(this.elementRef.nativeElement,e)},e.prototype._appendDefaultSvgIcon=function(){this._appendChild(this.iconService.defaultSvgIcon)},e.prototype._updateClass=function(){this._isDefault()&&this.renderer.addClass(this.elementRef.nativeElement,this._defaultClass)},e.prototype.ngOnInit=function(){this._updateClass(),this.theme.addStyle("lyIconRoot",function(e){return"font-size:"+e.icon.fontSize+";width:1em;height:1em;display:inline-flex;"},this.elementRef.nativeElement,undefined,-2)},e.prototype._cleanIcon=function(){var e=this.elementRef.nativeElement.querySelector("svg");e&&this.renderer.removeChild(this.elementRef,e)},e.decorators=[{type:t.Directive,args:[{selector:"ly-icon"}]}],e.ctorParameters=function(){return[{type:c},{type:t.ElementRef},{type:t.Renderer2},{type:r.LyTheme2}]},e.propDecorators={src:[{type:t.Input}],icon:[{type:t.Input}]},e}(),p=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[i.CommonModule],declarations:[a],exports:[a]}]}],e}();e.LyIconModule=p,e.LyIconService=c,e.Icon=a,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=alyle-ui-icon.umd.min.js.map