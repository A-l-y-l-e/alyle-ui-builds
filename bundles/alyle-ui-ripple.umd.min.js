!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@alyle/ui"),require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("@alyle/ui/ripple",["exports","@alyle/ui","@angular/core","@angular/common"],t):t((e.alyle=e.alyle||{},e.alyle.ui=e.alyle.ui||{},e.alyle.ui.ripple={}),e.alyle.ui,e.ng.core,e.ng.common)}(this,function(e,o,t,n){"use strict";var r=function(){function e(){this.state=!0,this.timestamp=-Date.now(),this.container=document.createElement("span")}return e.prototype.end=function(){this.state=!1,this.timestamp+=Date.now()},e}(),s=function(){function e(e,t,n,i,r){this._themeVariables=e,this._ngZone=t,this.classes=n,this._containerElement=i,this._triggerElement=r,this._eventHandlers=new Map,this.rippleConfig={},this._transitionDuration=this._themeVariables.ripple.duration,this._eventOptions={passive:!0},o.Platform.isBrowser&&("function"==typeof TouchEvent&&TouchEvent?(this._eventHandlers.set("pointerdown",this.onPointerDown.bind(this)),this._eventHandlers.set("touchend",this.onPointerLeave.bind(this))):this._eventHandlers.set("mousedown",this.onPointerDown.bind(this)),this._eventHandlers.set("mouseup",this.onPointerLeave.bind(this)),this._eventHandlers.set("mouseleave",this.onPointerLeave.bind(this)),r||(r=i),this.setTriggerElement(r))}return e.prototype.setConfig=function(e){this.rippleConfig=e},Object.defineProperty(e.prototype,"_rectContainer",{get:function(){return this._containerElement.getBoundingClientRect()},enumerable:!0,configurable:!0}),e.prototype.setTriggerElement=function(n){var i=this;n&&this._ngZone.runOutsideAngular(function(){i._eventHandlers.forEach(function(e,t){return n.addEventListener(t,e,i._eventOptions)})}),this._triggerElement=n},e.prototype.createRipple=function(e){this._rippleRef=new r;var t=this._rippleRef.container;for(var n in t.className=this.classes.rippleContainer,e)if(e.hasOwnProperty(n)){var i=e[n];t.style[n]="number"==typeof i?i+"px":i}this._containerElement.appendChild(t),window.getComputedStyle(t).getPropertyValue("opacity"),t.style.transform="scale(1)"},e.prototype.onPointerDown=function(e){this.rippleConfig.disabled||(this.endRipple(),this.startRipple(e,this.rippleConfig))},e.prototype.onPointerLeave=function(e){this.rippleConfig.disabled||this.endRipple()},e.prototype.startRipple=function(e,t){var n=this._rectContainer,i=e.clientX,r=e.clientY;t.centered&&(i=n.left+n.width/2,r=n.top+n.height/2);var o=i-n.left,s=r-n.top,p="containerSize"===t.radius?function a(e){return Math.max(e.width,e.height)}(n)/2:t.radius||function l(e,t,n){var i=Math.max(Math.abs(e-n.left),Math.abs(e-n.right)),r=Math.max(Math.abs(t-n.top),Math.abs(t-n.bottom));return Math.sqrt(i*i+r*r)}(i,r,n);t.percentageToIncrease&&(p+=p*t.percentageToIncrease/100),this.createRipple({left:o-p,top:s-p,width:2*p,height:2*p,transitionDuration:this._transitionDuration+"ms"})},e.prototype.runTimeoutOutsideZone=function(e,t){void 0===t&&(t=0),this._ngZone.runOutsideAngular(function(){return setTimeout(e,t)})},e.prototype.endRipple=function(){var e=this,t=this._rippleRef||null,n=this._transitionDuration;t&&t.state&&(t.end(),this.runTimeoutOutsideZone(function(){t.container.style.opacity="0",t.container.style.transitionDuration=e._transitionDuration/5+"ms"},t.timestamp<n?.15*n:0),this.runTimeoutOutsideZone(function(){t.container.parentNode.removeChild(t.container)},t.timestamp<n?2*n:n))},e.prototype.removeEvents=function(){var n=this;this._triggerElement&&this._eventHandlers.forEach(function(e,t){n._triggerElement.removeEventListener(t,e,n._eventOptions)})},e}();var i=function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},p=function(e){return{rippleContainer:{position:"absolute",width:"5px",height:"5px",background:"currentColor",opacity:".19",borderRadius:"100%",transform:"scale(0)",transition:"opacity "+e.ripple.transition.opacity+",transform "+e.ripple.transition.transform,pointerEvents:"none"},container:i({},o.LY_COMMON_STYLES.fill,{overflow:"hidden",pointerEvents:"none",borderRadius:"inherit"})}},a=function(){function e(e){this.theme=e,this.classes=this.theme.addStyleSheet(p,"lyRipple")}return e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:o.LyTheme2}]},e.ngInjectableDef=t.defineInjectable({factory:function(){return new e(t.inject(o.LyTheme2))},token:e,providedIn:"root"}),e}(),l=function(){function e(e,t,n,i){this.rippleService=e,this._elementRef=t,this._ngZone=n,this._theme=i,o.Platform.isBrowser&&(this.rippleContainer=new s(this._theme.config,this._ngZone,this.rippleService.classes,this._elementRef.nativeElement))}return Object.defineProperty(e.prototype,"lyRippleConfig",{get:function(){return{centered:o.toBoolean(this.lyRippleCentered),disabled:o.toBoolean(this.lyRippleDisabled),sensitive:o.toBoolean(this.lyRippleSensitive),radius:this.lyRippleRadius,percentageToIncrease:this.lyRipplePercentageToIncrease}},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this._updateRipple()},e.prototype.ngOnChanges=function(){this._updateRipple()},e.prototype._updateRipple=function(){o.Platform.isBrowser&&this.rippleContainer.setConfig(this.lyRippleConfig)},e.prototype.ngOnDestroy=function(){this.rippleContainer&&this.rippleContainer.removeEvents()},e.decorators=[{type:t.Directive,args:[{selector:"[lyRipple], [ly-ripple]",exportAs:"lyRipple"}]}],e.ctorParameters=function(){return[{type:a},{type:t.ElementRef},{type:t.NgZone},{type:o.LyTheme2}]},e.propDecorators={lyRippleCentered:[{type:t.Input}],lyRippleDisabled:[{type:t.Input}],lyRippleSensitive:[{type:t.Input}],lyRippleRadius:[{type:t.Input}],lyRipplePercentageToIncrease:[{type:t.Input}]},e}(),u=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[n.CommonModule],declarations:[l],exports:[l]}]}],e}();e.LyRippleModule=u,e.LyRipple=l,e.styles=p,e.LyRippleService=a,e.RippleVariables={transition:{opacity:"cubic-bezier(0.4,0.0,1,1)",transform:"cubic-bezier(0, 1, 0.6, 1)"},duration:950},e.RippleRef=r,e.Ripple=s,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=alyle-ui-ripple.umd.min.js.map