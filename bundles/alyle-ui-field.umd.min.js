!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("rxjs"),require("@angular/forms"),require("@angular/core"),require("@angular/common"),require("@alyle/ui")):"function"==typeof define&&define.amd?define("@alyle/ui/field",["exports","rxjs","@angular/forms","@angular/core","@angular/common","@alyle/ui"],t):t((e.ly=e.ly||{},e.ly.field={}),e.rxjs,e.ng.forms,e.ng.core,e.ng.common,e.ly.core)}(this,function(e,s,t,n,i,a){"use strict";var o=function(){return(o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=function(){function e(){}return e.decorators=[{type:n.Directive,args:[{selector:"ly-field > ly-label"}]}],e}(),l=function(){function e(){}return e.decorators=[{type:n.Directive,args:[{selector:"ly-field > ly-placeholder"}]}],e}(),d=function(e){return{root:{display:"inline-block",position:"relative",marginTop:"1em",lineHeight:1.125,"& {hint}, & {error}":{display:"block",fontSize:".75em",marginTop:".5em"}},animations:{"& {labelSpan}":{transition:"font-size "+e.animations.curves.deceleration+" ."+e.animations.durations.complex+"s"},"& {label}":{transition:e.animations.curves.deceleration+" ."+e.animations.durations.complex+"s"}},container:{height:"100%",display:"flex",alignItems:"center",position:"relative","&:after":o({},a.LY_COMMON_STYLES.fill,{content:"''",pointerEvents:"none",borderColor:e.field.borderColor})},fieldset:o({},a.LY_COMMON_STYLES.fill,{margin:0,borderStyle:"solid",borderColor:e.field.borderColor,borderWidth:0}),fieldsetSpan:{padding:0,height:"2px"},labelSpan:{maxWidth:"100%",display:"inline-block"},prefix:{maxHeight:"2em",display:"flex",alignItems:"center"},infix:{display:"inline-flex",position:"relative",alignItems:"baseline",width:"100%"},suffix:{maxHeight:"2em",display:"flex",alignItems:"center"},labelContainer:o({},a.LY_COMMON_STYLES.fill,{pointerEvents:"none",display:"flex",width:"100%",borderColor:e.field.borderColor}),labelSpacingStart:{},labelCenter:{display:"flex",maxWidth:"100%"},labelSpacingEnd:{flex:1},label:o({},a.LY_COMMON_STYLES.fill,{margin:0,border:"none",pointerEvents:"none",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",color:e.field.labelColor,width:"100%"}),isFloatingLabel:{},floatingLabel:{"& {labelSpan}":{fontSize:"75%"}},placeholder:o({},a.LY_COMMON_STYLES.fill,{pointerEvents:"none",color:e.field.labelColor}),focused:{},inputNative:{resize:"vertical",padding:0,outline:"none",border:"none",backgroundColor:"transparent",color:"inherit",font:"inherit",width:"100%"},hintContainer:{minHeight:"1.25em",">div":{display:"flex",flex:"1 0 auto",maxWidth:"100%",overflow:"hidden",justifyContent:"space-between"}},disabled:{"&, & {label}, & {container}:after":{color:e.disabled.contrast,cursor:"default"}},hint:null,error:null,errorState:{"& {label}, & {hintContainer}":{color:e.warn["default"]+"!important"},"& {fieldset}, & {container}:after":{borderColor:e.warn["default"]+"!important"},"& {inputNative}":{caretColor:e.warn["default"]+"!important"},"& {hintContainer} ly-hint:not({hintAfter})":{display:"none"},"& {labelSpan}":{animation:"{shake} "+e.animations.durations.complex+"ms "+e.animations.curves.deceleration}},hintAfter:{marginBefore:"auto"},hintBefore:{marginAfter:"auto"},$keyframes:{shake:{0:{marginBefore:0},40:{marginBefore:"2px"},50:{marginBefore:"-2px"},70:{marginBefore:"2px"},100:{marginBefore:0}}}}},h=function(){function e(e,t,n){this._renderer=e,this._el=t,this._theme=n,this.classes=this._theme.addStyleSheet(d,-2),e.addClass(t.nativeElement,this.classes.hint)}return Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(e){e?this._alignClass="after"===e?(this._renderer.addClass(this._el.nativeElement,this.classes.hintAfter),this.classes.hintAfter):(this._renderer.addClass(this._el.nativeElement,this.classes.hintBefore),this.classes.hintBefore):this._alignClass&&(this._renderer.removeClass(this._el.nativeElement,this._alignClass),this._alignClass=null),this._align=e},enumerable:!0,configurable:!0}),e.decorators=[{type:n.Directive,args:[{selector:"ly-field > ly-hint"}]}],e.ctorParameters=function(){return[{type:n.Renderer2},{type:n.ElementRef},{type:a.LyTheme2}]},e.propDecorators={align:[{type:n.Input}]},e}(),c=function(){function e(){}return e.decorators=[{type:n.Directive,args:[{selector:"[lyPrefix]"}]}],e}(),p=function(){function e(){}return e.decorators=[{type:n.Directive,args:[{selector:"[lySuffix]"}]}],e}(),f=function(){function e(e,t,n){this._theme=n,this.classes=this._theme.addStyleSheet(d,-2);var i=n.addStyleSheet(d,-2).error;e.addClass(t.nativeElement,i)}return e.decorators=[{type:n.Directive,args:[{selector:"ly-error"}]}],e.ctorParameters=function(){return[{type:n.Renderer2},{type:n.ElementRef},{type:a.LyTheme2}]},e}(),u=-2,_={standard:{root:{"&:not({disabled}) {container}:hover:after":{borderBottomColor:"currentColor"},"&{disabled} {container}:after":{borderBottomStyle:"dotted",borderColor:"inherit"}},container:{padding:"1em 0 0","&:after":{borderBottomStyle:"solid",borderBottomWidth:"1px"}},containerFocused:{"&:after":{borderWidth:"2px",borderColor:"currentColor"}},containerLabelHover:{color:"currentColor"},label:{margin:"0.4375em 0"},placeholder:{margin:"0.4375em 0"},input:{margin:"0.4375em 0"},floatingLabel:{transform:"translateY(-1.25em)"}}},g=function(){function e(e,t,n,i,r,l){this._renderer=e,this._el=t,this._elementObserver=n,this._theme=i,this._cd=r,this._ngZone=l,this.classes=this._theme.addStyleSheet(d,u),e.addClass(t.nativeElement,this.classes.root)}return Object.defineProperty(e.prototype,"errorState",{get:function(){return this._input.errorState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullWidth",{get:function(){return this._fullWidth},set:function(e){var t=a.toBoolean(e);t?this._fullWidthClass=this._theme.addStyle("fullWidth",{width:"100%"},this._getHostElement(),this._fullWidthClass,u):this._fullWidthClass&&(this._renderer.removeClass(this._getHostElement(),this._fullWidthClass),this._fullWidthClass=null),this._fullWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"floatingLabel",{get:function(){return this._floatingLabel},set:function(e){this._floatingLabel=a.toBoolean(e),this._updateFloatingLabel()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(i){var r=this;i!==this._color&&(this._color=i,this._colorClass=this._theme.addStyle("ly-field.color:"+i,function(e){var t,n=e.colorOf(i);return(t={})["&."+r.classes.focused+" ."+r.classes.container+":after"]={color:n},t["&."+r.classes.focused+" ."+r.classes.fieldset]={borderColor:n},t["&."+r.classes.focused+" ."+r.classes.label]={color:n},t["& ."+r.classes.inputNative]={caretColor:n},t},this._el.nativeElement,this._colorClass,-1))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"appearance",{get:function(){return this._appearance},set:function(r){var l=this;if(r!==this.appearance){if(this._appearance=r,!this._theme.config.field.appearance[r]&&!_[r])throw new Error(r+" not found in theme.field.appearance");this._appearanceClass=this._theme.addStyle("ly-field.appearance:"+r,function(e){var t,n=a.mergeDeep({},e.field.appearance.base,e.field.appearance[r]||_[r]),i=l.classes;return(t={"&":o({},n.root)})["& ."+i.container]=o({},n.container),t["& ."+i.prefix]=o({},n.prefix),t["& ."+i.infix]=o({},n.infix),t["& ."+i.suffix]=o({},n.suffix),t["& ."+i.inputNative]=o({},n.input),t["& ."+i.fieldset]=o({},n.fieldset),t["& ."+i.placeholder]=o({},n.placeholder),t["& ."+i.label]=o({},n.label),t["& ."+i.hintContainer]=o({},n.hint),t["& ."+i.floatingLabel+"."+i.label]=o({},n.floatingLabel),t["&."+i.focused+" ."+i.container]=o({},n.containerFocused),t},this._el.nativeElement,this._appearanceClass,u,d)}},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.color||(this.color="primary"),this.appearance||(this.appearance="standard")},e.prototype.ngAfterContentInit=function(){var e=this;this._renderer.addClass(this._input._hostElement,this.classes.inputNative),this._input.stateChanges.subscribe(function(){e._updateFloatingLabel(),e._markForCheck()});var t=this._input.ngControl;t&&t.valueChanges&&t.valueChanges.subscribe(function(){e._updateFloatingLabel(),e._markForCheck()})},e.prototype.ngAfterViewInit=function(){var i=this;this._updateFloatingLabel(),a.Platform.isBrowser&&this._ngZone.runOutsideAngular(function(){if(i._prefixContainer){var e=i._prefixContainer.nativeElement;i._updateFielset(e,a.DirAlias.before),i._elementObserver.observe(e,function(){i._updateFielset(e,a.DirAlias.before)})}if(i._suffixContainer){var t=i._suffixContainer.nativeElement;i._updateFielset(t,a.DirAlias.after),i._elementObserver.observe(t,function(){i._updateFielset(t,a.DirAlias.after)})}if(i._labelSpan){var n=i._labelSpan.nativeElement;i._updateFielsetSpan(),i._elementObserver.observe(n,function(){i._updateFielsetSpan()})}}),this._renderer.addClass(this._el.nativeElement,this.classes.animations)},e.prototype._updateFielset=function(e,n){var i=this,r=e.getBoundingClientRect().width,t=this._theme.addStyle("fieldLegendstyle.margin"+n+":"+r,function(){var e,t;return(e={})["& ."+i.classes.fieldsetSpan]=((t={})["margin-"+n]=r+"px",t),e},null,null,u);n===a.DirAlias.before?this._marginStartClass=this._theme.updateClass(this._el.nativeElement,this._renderer,t,this._marginStartClass):this._marginEndClass=this._theme.updateClass(this._el.nativeElement,this._renderer,t,this._marginEndClass)},e.prototype._updateFielsetSpan=function(){var e,t=this._labelSpan.nativeElement.getBoundingClientRect().width;this._isFloating||(t-=t/100*25),t+=6,this._fielsetSpanClass=this._theme.addStyle("style.fieldsetSpanFocused:"+t,((e={})["&."+this.classes.isFloatingLabel+" ."+this.classes.fieldsetSpan]={width:t+"px"},e),this._el.nativeElement,this._fielsetSpanClass,u)},e.prototype._isLabel=function(){return!(!this._input.placeholder||this._labelChild)||!(!this._labelChild&&!this._placeholderChild)},e.prototype._isPlaceholder=function(){return!!(this._labelChild&&this._input.placeholder||this._labelChild&&this._placeholderChild)},e.prototype._isEmpty=function(){var e=this._input.value;return""===e||null===e||e===undefined},e.prototype._updateFloatingLabel=function(){if(this._labelContainer2){var e=this._input._focused||!this._isEmpty()||this.floatingLabel;this._isFloating!==e&&((this._isFloating=e)?(this._renderer.addClass(this._labelContainer2.nativeElement,this.classes.floatingLabel),this._renderer.addClass(this._el.nativeElement,this.classes.isFloatingLabel)):(this._renderer.removeClass(this._labelContainer2.nativeElement,this.classes.floatingLabel),this._renderer.removeClass(this._el.nativeElement,this.classes.isFloatingLabel)))}this._input._focused?this._renderer.addClass(this._el.nativeElement,this.classes.focused):this._renderer.removeClass(this._el.nativeElement,this.classes.focused)},e.prototype._markForCheck=function(){this._cd.markForCheck()},e.prototype._getHostElement=function(){return this._el.nativeElement},e.decorators=[{type:n.Component,args:[{selector:"ly-field",exportAs:"lyFormField",template:'<div [className]="classes.container" (click)="_input.focus()">\n  <fieldset [className]="classes.fieldset"><legend #_fieldsetLegend [className]="classes.fieldsetSpan"></legend></fieldset>\n  <div [className]="classes.prefix" *ngIf="_prefixChildren.length" #_prefixContainer>\n    <ng-content select="[lyPrefix]"></ng-content>\n  </div>\n  <div [className]="classes.infix">\n    <ng-content></ng-content>\n    <div [className]="classes.label" *ngIf="_isLabel()" #_labelContainer2>\n      <span #_labelSpan [className]="classes.labelSpan">\n        <ng-container *ngTemplateOutlet="_labelTemplate"></ng-container>\n      </span>\n    </div>\n    <div [className]="classes.placeholder" *ngIf="_isPlaceholder() && _isEmpty() && (_input._focused || floatingLabel)">\n      <ng-container *ngTemplateOutlet="_placeholderTemplate"></ng-container>\n    </div>\n  </div>\n  <div [className]="classes.suffix" *ngIf="_suffixChildren.length" #_suffixContainer>\n    <ng-content select="[lySuffix]"></ng-content>\n  </div>\n</div>\n\n<div [className]="classes.hintContainer">\n  <div *ngIf="_hintChildren.length && (persistentHint || errorState || _input._focused)">\n    <span *ngIf="_input.errorState">\n      <ng-content select="ly-error"></ng-content>\n    </span>\n    <ng-content select="ly-hint"></ng-content>\n  </div>\n</div>\n\n<ng-template #_labelTemplate>\n  <ng-content select="ly-label"></ng-content>\n  <ng-container *ngIf="!_labelChild">\n    <ng-template *ngTemplateOutlet="_placeholderTemplate"></ng-template>\n  </ng-container>\n</ng-template>\n\n<ng-template #_placeholderTemplate>\n  <ng-content select="ly-placeholder"></ng-content>\n  <ng-container *ngIf="_input.placeholder">{{ _input.placeholder }}</ng-container>\n</ng-template>\n',changeDetection:n.ChangeDetectionStrategy.OnPush,encapsulation:n.ViewEncapsulation.None}]}],e.ctorParameters=function(){return[{type:n.Renderer2},{type:n.ElementRef},{type:a.ElementObserver},{type:a.LyTheme2},{type:n.ChangeDetectorRef},{type:n.NgZone}]},e.propDecorators={_labelContainer:[{type:n.ViewChild,args:["_labelContainer"]}],_labelContainer2:[{type:n.ViewChild,args:["_labelContainer2"]}],_labelSpan:[{type:n.ViewChild,args:["_labelSpan"]}],_prefixContainer:[{type:n.ViewChild,args:["_prefixContainer"]}],_suffixContainer:[{type:n.ViewChild,args:["_suffixContainer"]}],_fieldsetLegend:[{type:n.ViewChild,args:["_fieldsetLegend"]}],_input:[{type:n.ContentChild,args:[n.forwardRef(function(){return m})]}],_placeholderChild:[{type:n.ContentChild,args:[l]}],_labelChild:[{type:n.ContentChild,args:[r]}],_hintChildren:[{type:n.ContentChildren,args:[h]}],_prefixChildren:[{type:n.ContentChildren,args:[c]}],_suffixChildren:[{type:n.ContentChildren,args:[p]}],_errorChildren:[{type:n.ContentChildren,args:[f]}],persistentHint:[{type:n.Input}],fullWidth:[{type:n.Input}],floatingLabel:[{type:n.Input}],color:[{type:n.Input}],appearance:[{type:n.Input}]},e}(),m=function(){function e(e,t,n,i,r,l){this._el=e,this._renderer=t,this._field=n,this.ngControl=i,this._parentForm=r,this._parentFormGroup=l,this._disabled=!1,this._required=!1,this.stateChanges=new s.Subject,this._form=this._parentForm||this._parentFormGroup,this._focused=!1,this.errorState=!1,this._hostElement=this._el.nativeElement}return e.prototype._onInput=function(){this.stateChanges.next()},e.prototype._onBlur=function(){!1!==this._focused&&(this._focused=!1,this.stateChanges.next())},e.prototype._onFocus=function(){!0!==this._focused&&(this._focused=!0,this.stateChanges.next())},Object.defineProperty(e.prototype,"value",{get:function(){return this._hostElement.value},set:function(e){e!==this.value&&(this._hostElement.value=e,this.stateChanges.next())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled},set:function(e){e!==this._disabled&&(this._disabled=a.toBoolean(e),!e&&this._hasDisabledClass?(this._renderer.removeClass(this._field._getHostElement(),this._field.classes.disabled),this._hasDisabledClass=null):e&&(this._renderer.addClass(this._field._getHostElement(),this._field.classes.disabled),this._hasDisabledClass=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"required",{get:function(){return this._required},set:function(e){this._required=a.toBoolean(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"placeholder",{get:function(){return this._placeholder},set:function(e){this._placeholder=e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this._renderer.setAttribute(this._hostElement,"placeholder","­");var t=this.ngControl;t&&t.statusChanges.subscribe(function(){e.disabled=t.disabled})},e.prototype.ngDoCheck=function(){var e=this.errorState,t=!!(this.ngControl&&this.ngControl.invalid&&(this.ngControl.touched||this._form&&this._form.submitted));if(t!==e){this.errorState=t;var n=this._field.classes.errorState;t?(this._renderer.addClass(this._field._getHostElement(),n),this._errorClass=n):this._errorClass&&(this._renderer.removeClass(this._field._getHostElement(),n),this._errorClass=null)}},e.prototype.ngOnDestroy=function(){this.stateChanges.complete()},e.prototype.focus=function(){this._hostElement.focus()},e.decorators=[{type:n.Directive,args:[{selector:"input[lyInput], textarea[lyInput]",exportAs:"lyInput"}]}],e.ctorParameters=function(){return[{type:n.ElementRef},{type:n.Renderer2},{type:g},{type:t.NgControl,decorators:[{type:n.Optional},{type:n.Self}]},{type:t.NgForm,decorators:[{type:n.Optional}]},{type:t.FormGroupDirective,decorators:[{type:n.Optional}]}]},e.propDecorators={_onInput:[{type:n.HostListener,args:["input"]}],_onBlur:[{type:n.HostListener,args:["blur"]}],_onFocus:[{type:n.HostListener,args:["focus"]}],value:[{type:n.Input}],disabled:[{type:n.HostBinding},{type:n.Input}],required:[{type:n.HostBinding},{type:n.Input}],placeholder:[{type:n.Input}]},e}(),y=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[i.CommonModule,a.LyCommonModule],exports:[g,l,r,m,c,p,h,f,a.LyCommonModule],declarations:[g,l,r,m,c,p,h,f]}]}],e}();e.LyField=g,e.LyInputNative=m,e.LyFieldModule=y,e.ɵf=f,e.ɵc=h,e.ɵb=r,e.ɵa=l,e.ɵd=c,e.ɵe=p,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=alyle-ui-field.umd.min.js.map