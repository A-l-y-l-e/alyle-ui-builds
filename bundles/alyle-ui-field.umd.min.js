!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@alyle/ui"),require("rxjs"),require("@angular/common")):"function"==typeof define&&define.amd?define("@alyle/ui/field",["exports","@angular/core","@angular/forms","@alyle/ui","rxjs","@angular/common"],t):t((e.alyle=e.alyle||{},e.alyle.ui=e.alyle.ui||{},e.alyle.ui.field={}),e.ng.core,e.ng.forms,e.alyle.ui,e.rxjs,e.ng.common)}(this,function(e,t,n,s,a,i){"use strict";var r=function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},l=function(){function e(e,t,n,i,l,s){this._el=e,this._renderer=t,this._theme=n,this.ngControl=i,this._disabled=!1,this._required=!1,this.valueChanges=new a.Subject,this.focused=!1,this._hostElement=this._el.nativeElement}return e.prototype._onInput=function(){this.valueChanges.next()},e.prototype._onBlur=function(){!1!==this.focused&&(this.focused=!1,this.valueChanges.next())},e.prototype._onFocus=function(){!0!==this.focused&&(this.focused=!0,this.valueChanges.next())},Object.defineProperty(e.prototype,"value",{get:function(){return this._hostElement.value},set:function(e){e!==this.value&&(this._hostElement.value=e,this.valueChanges.next())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled},set:function(e){this._disabled=s.toBoolean(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"required",{get:function(){return this._required},set:function(e){this._required=s.toBoolean(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"placeholder",{get:function(){return this._placeholder},set:function(e){this._placeholder=e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.placeholder&&this._renderer.removeAttribute(this._hostElement,"placeholder")},e.prototype.ngOnDestroy=function(){this.valueChanges.complete()},e.prototype.focus=function(){this._hostElement.focus()},e.decorators=[{type:t.Directive,args:[{selector:"ly-field > input, ly-field > textarea",exportAs:"lyInput"}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:s.LyTheme2},{type:n.NgControl,decorators:[{type:t.Optional},{type:t.Self}]},{type:n.NgForm,decorators:[{type:t.Optional}]},{type:n.FormGroupDirective,decorators:[{type:t.Optional}]}]},e.propDecorators={_onInput:[{type:t.HostListener,args:["input"]}],_onBlur:[{type:t.HostListener,args:["blur"]}],_onFocus:[{type:t.HostListener,args:["focus"]}],value:[{type:t.Input}],disabled:[{type:t.HostBinding},{type:t.Input}],required:[{type:t.HostBinding},{type:t.Input}],placeholder:[{type:t.Input}]},e}(),o=function(){function e(){}return e.decorators=[{type:t.Directive,args:[{selector:"ly-field > ly-label"}]}],e}(),c=function(){function e(){}return e.decorators=[{type:t.Directive,args:[{selector:"ly-field > ly-placeholder"}]}],e}(),p=function(){function e(){}return e.decorators=[{type:t.Directive,args:[{selector:"ly-field > ly-hint"}]}],e}(),d=function(){function e(){}return e.decorators=[{type:t.Directive,args:[{selector:"[lyPrefix]"}]}],e}(),u=function(){function e(){}return e.decorators=[{type:t.Directive,args:[{selector:"[lySuffix]"}]}],e}(),h=function(e){return{root:{display:"inline-block",position:"relative",marginBottom:"1em",lineHeight:1.125},container:{height:"100%",display:"flex",alignItems:"center","&:after":r({},s.LY_COMMON_STYLES.fill,{content:"''",pointerEvents:"none",borderColor:e.input.borderColor})},fieldset:r({},s.LY_COMMON_STYLES.fill,{margin:0,borderStyle:"solid",borderColor:e.input.borderColor,borderWidth:0}),fieldsetSpan:{padding:0},labelSpan:{maxWidth:"100%",display:"inline-block",transition:"font-size "+e.animations.curves.deceleration+" ."+e.animations.durations.complex+"s"},prefix:{maxHeight:"2em",display:"flex",alignItems:"center","&:after":r({content:"''",pointerEvents:"none",boxSizing:"content-box"},s.LY_COMMON_STYLES.fill,{borderColor:e.input.borderColor})},infix:{display:"inline-flex",position:"relative",alignItems:"baseline","&:after":r({content:"''",pointerEvents:"none",boxSizing:"content-box"},s.LY_COMMON_STYLES.fill,{borderColor:e.input.borderColor})},suffix:{maxHeight:"2em",display:"flex",alignItems:"center","&:after":r({content:"''",pointerEvents:"none",boxSizing:"content-box"},s.LY_COMMON_STYLES.fill,{borderColor:e.input.borderColor})},labelContainer:r({},s.LY_COMMON_STYLES.fill,{pointerEvents:"none",display:"flex",width:"100%",borderColor:e.input.borderColor}),labelSpacingStart:{},labelCenter:{display:"flex",maxWidth:"100%"},labelSpacingEnd:{flex:1},label:r({},s.LY_COMMON_STYLES.fill,{margin:0,border:"none",pointerEvents:"none",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",color:e.input.label,width:"100%",transition:e.animations.curves.deceleration+" ."+e.animations.durations.complex+"s"}),isFloatingLabel:{},floatingLabel:{"& {labelSpan}":{fontSize:"75%"}},placeholder:r({},s.LY_COMMON_STYLES.fill,{pointerEvents:"none",color:e.input.label}),focused:{},hint:{},inputNative:{resize:"vertical",padding:0,outline:"none",border:"none",backgroundColor:"transparent",color:"inherit",font:"inherit",width:"100%"}}},f=function(){function e(e,t,n,i,l,s){this._renderer=e,this._el=t,this._elementObserver=n,this._theme=i,this._cd=l,this._ngZone=s,this.classes=this._theme.addStyleSheet(h,"ly-field",-2),e.addClass(t.nativeElement,this.classes.root)}return Object.defineProperty(e.prototype,"floatingLabel",{get:function(){return this._floatingLabel},set:function(e){this._floatingLabel=s.toBoolean(e),this._updateFloatingLabel()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"withColor",{get:function(){return this._withColor},set:function(i){var l=this;i!==this._withColor&&(this._withColor=i,this._withColorClass=this._theme.addStyle("ly-field.withColor:"+i,function(e){var t,n=e.colorOf(i);return(t={})["&."+l.classes.focused+" ."+l.classes.container+":after"]={color:n},t["&."+l.classes.focused+" ."+l.classes.fieldset]={borderColor:n},t["&."+l.classes.focused+" ."+l.classes.label]={color:n},t["& ."+l.classes.inputNative]={caretColor:n},t},this._el.nativeElement,this._withColorClass,-1))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"appearance",{get:function(){return this._appearance},set:function(i){var l=this;if(i!==this.appearance){if(this._appearance=i,!this._theme.config.input.appearance[i])throw new Error(i+" not found in theme.input.appearance");this._appearanceClass=this._theme.addStyle("ly-field.appearance:"+i,function(e){var t,n=s.mergeDeep({},e.input.appearance.any,e.input.appearance[i]);return(t={})["& ."+l.classes.container]=r({},n.container),t["& ."+l.classes.prefix]=r({},n.prefix),t["& ."+l.classes.infix]=r({},n.infix),t["& ."+l.classes.suffix]=r({},n.suffix),t["& ."+l.classes.inputNative]=r({},n.input),t["& ."+l.classes.fieldset]=r({},n.fieldset),t["&:hover ."+l.classes.fieldset]=r({},n.fieldsetHover),t["&."+l.classes.focused+" ."+l.classes.fieldset]=r({},n.fieldsetFocused),t["& ."+l.classes.placeholder]=r({},n.placeholder),t["& ."+l.classes.label]=r({},n.label),t["& ."+l.classes.floatingLabel+"."+l.classes.label]=r({},n.floatingLabel),t["&."+l.classes.focused+" ."+l.classes.container]=r({},n.containerFocused),t},this._el.nativeElement,this._appearanceClass,-2)}},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.withColor||(this.withColor="primary"),this.appearance||(this.appearance="standard")},e.prototype.ngAfterContentInit=function(){var e=this;this._renderer.addClass(this._input._hostElement,this.classes.inputNative),this._input.valueChanges.subscribe(function(){e._updateFloatingLabel(),e._markForCheck()});var t=this._input.ngControl;t&&t.valueChanges&&t.valueChanges.subscribe(function(){e._updateFloatingLabel(),e._markForCheck()})},e.prototype.ngAfterViewInit=function(){var i=this;this._updateFloatingLabel(),s.Platform.isBrowser&&this._ngZone.runOutsideAngular(function(){if(i._prefixContainer){var e=i._prefixContainer.nativeElement;i._updateFielset(e,"start"),i._elementObserver.observe(e,function(){i._updateFielset(e,"start")})}if(i._suffixContainer){var t=i._suffixContainer.nativeElement;i._updateFielset(t,"end"),i._elementObserver.observe(t,function(){i._updateFielset(t,"end")})}if(i._labelSpan){var n=i._labelSpan.nativeElement;i._updateFielsetSpan(),i._elementObserver.observe(n,function(){i._updateFielsetSpan()})}})},e.prototype._updateFielset=function(e,n){var i=e.getBoundingClientRect().width,t=this._theme.addStyle("style.paddingStart:"+i,function(e){var t;return(t={})["margin-"+e.getDirection(n)]=i+"px",t});"start"===n?(this._theme.updateClass(this._fieldsetLegend.nativeElement,this._renderer,t,this._fielsetStartClass),this._fielsetStartClass=t):(this._theme.updateClass(this._fieldsetLegend.nativeElement,this._renderer,t,this._fielsetEndClass),this._fielsetEndClass=t)},e.prototype._updateFielsetSpan=function(){var e,t=this._labelSpan.nativeElement.getBoundingClientRect().width;this._isFloating||(t-=t/100*25),t+=6,this._fielsetSpanClass=this._theme.addStyle("style.fieldsetSpanFocused:"+t,((e={})["&."+this.classes.isFloatingLabel+" ."+this.classes.fieldsetSpan]={width:t+"px"},e),this._el.nativeElement,this._fielsetSpanClass,-2)},e.prototype._isLabel=function(){return!(!this._input.placeholder||this._labelChild)||!(!this._labelChild&&!this._placeholderChild)},e.prototype._isPlaceholder=function(){return!!(this._labelChild&&this._input.placeholder||this._labelChild&&this._placeholderChild)},e.prototype._isEmpty=function(){var e=this._input.value;return""===e||null===e||e===undefined},e.prototype._updateFloatingLabel=function(){if(this._labelContainer2){var e=this._input.focused||!this._isEmpty()||this.floatingLabel;this._isFloating!==e&&((this._isFloating=e)?(this._renderer.addClass(this._labelContainer2.nativeElement,this.classes.floatingLabel),this._renderer.addClass(this._el.nativeElement,this.classes.isFloatingLabel)):(this._renderer.removeClass(this._labelContainer2.nativeElement,this.classes.floatingLabel),this._renderer.removeClass(this._el.nativeElement,this.classes.isFloatingLabel)))}this._input.focused?this._renderer.addClass(this._el.nativeElement,this.classes.focused):this._renderer.removeClass(this._el.nativeElement,this.classes.focused)},e.prototype._markForCheck=function(){this._cd.markForCheck()},e.decorators=[{type:t.Component,args:[{selector:"ly-field",template:'<div [className]="classes.container" (click)="_input.focus()">\n  <fieldset [className]="classes.fieldset"><legend #_fieldsetLegend [className]="classes.fieldsetSpan"></legend></fieldset>\n  <div [className]="classes.prefix" *ngIf="_prefixChildren.length" #_prefixContainer>\n    <ng-content select="[lyPrefix]"></ng-content>\n  </div>\n  <div [className]="classes.infix">\n    <ng-content></ng-content>\n    \x3c!-- <div [className]="classes.labelContainer">\n      <div>\n      </div>\n    </div> --\x3e\n    \x3c!-- <div [className]="classes.labelContainer">\n      <div [className]="classes.labelSpacingStart"></div>\n      <div [className]="classes.labelCenter" #_labelContainer>\n        <div [className]="classes.label" *ngIf="_isLabel()">\n          <ng-container *ngTemplateOutlet="_labelTemplate"></ng-container>\n        </div>\n      </div>\n      <div [className]="classes.labelSpacingEnd"></div>\n    </div> --\x3e\n    <div [className]="classes.label" *ngIf="_isLabel()" #_labelContainer2>\n      <span #_labelSpan [className]="classes.labelSpan">\n        <ng-container *ngTemplateOutlet="_labelTemplate"></ng-container>\n      </span>\n    </div>\n    <div [className]="classes.placeholder" *ngIf="_isPlaceholder() && _isEmpty() && (_input.focused || floatingLabel)">\n      <ng-container *ngTemplateOutlet="_placeholderTemplate"></ng-container>\n    </div>\n  </div>\n  <div [className]="classes.suffix" *ngIf="_suffixChildren.length" #_suffixContainer>\n    <ng-content select="[lySuffix]"></ng-content>\n  </div>\n  <div [className]="classes.hint"></div>\n</div>\n\n<ng-template #_labelTemplate>\n  <ng-content select="ly-label"></ng-content>\n  <ng-container *ngIf="!_labelChild">\n    <ng-template *ngTemplateOutlet="_placeholderTemplate"></ng-template>\n  </ng-container>\n</ng-template>\n\n<ng-template #_placeholderTemplate>\n  <ng-content select="ly-placeholder"></ng-content>\n  <ng-container *ngIf="_input.placeholder">{{ _input.placeholder }}</ng-container>\n</ng-template>\n',changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None}]}],e.ctorParameters=function(){return[{type:t.Renderer2},{type:t.ElementRef},{type:s.ElementObserver},{type:s.LyTheme2},{type:t.ChangeDetectorRef},{type:t.NgZone}]},e.propDecorators={_labelContainer:[{type:t.ViewChild,args:["_labelContainer"]}],_labelContainer2:[{type:t.ViewChild,args:["_labelContainer2"]}],_labelSpan:[{type:t.ViewChild,args:["_labelSpan"]}],_prefixContainer:[{type:t.ViewChild,args:["_prefixContainer"]}],_suffixContainer:[{type:t.ViewChild,args:["_suffixContainer"]}],_fieldsetLegend:[{type:t.ViewChild,args:["_fieldsetLegend"]}],_input:[{type:t.ContentChild,args:[l]}],_placeholderChild:[{type:t.ContentChild,args:[c]}],_labelChild:[{type:t.ContentChild,args:[o]}],_hintChildren:[{type:t.ContentChildren,args:[p]}],_prefixChildren:[{type:t.ContentChildren,args:[d]}],_suffixChildren:[{type:t.ContentChildren,args:[u]}],floatingLabel:[{type:t.Input}],withColor:[{type:t.Input}],appearance:[{type:t.Input}]},e}(),_=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[i.CommonModule,s.LyCommonModule],exports:[f,c,o,l,d,u,p,s.LyCommonModule],declarations:[f,c,o,l,d,u,p]}]}],e}();e.LyField=f,e.LyFieldModule=_,e.ɵd=p,e.ɵa=l,e.ɵc=o,e.ɵb=c,e.ɵe=d,e.ɵf=u,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=alyle-ui-field.umd.min.js.map