{"version":3,"file":"alyle-ui-snack-bar.umd.js.map","sources":["ng://@alyle/ui/snack-bar/snack-bar.service.ts","ng://@alyle/ui/snack-bar/snack-bar-ref.ts","ng://@alyle/ui/snack-bar/snack-bar.ts","ng://@alyle/ui/snack-bar/snack-bar.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { LySnackBarRef } from './snack-bar-ref';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LySnackBarService {\n  /** @docs-private */\n  _currentSnackBar: LySnackBarRef | null;\n}\n","import { EventEmitter } from '@angular/core';\nimport { Subject, Observable } from 'rxjs';\nimport { OverlayFactory, LyTheme2 } from '@alyle/ui';\nimport { LySnackBarService } from './snack-bar.service';\nimport { LySnackBarDismiss } from './snack-bar';\n\nconst DEFAULT_DURATION = 6e3;\n\nexport class LySnackBarRef {\n  private _timer: any;\n  private _dismissedByAction = false;\n\n  /** Subject for notifying the user that the snack bar has been dismissed. */\n  private readonly _afterDismissed = new Subject<void>();\n\n  /** Gets an observable that is notified when the snack bar is finished closing. */\n  afterDismissed(): Observable<void> {\n    return this._afterDismissed.asObservable();\n  }\n  constructor(\n    private _snackBarService: LySnackBarService,\n    private _overlay: OverlayFactory | null,\n    private _afterDismissedEventEmitter: EventEmitter<LySnackBarDismiss>,\n    duration: number | 'Infinity',\n    private _theme: LyTheme2\n  ) {\n    if (duration !== 'Infinity') {\n      this._timer = setTimeout(() => {\n        this.dismiss();\n      }, duration || DEFAULT_DURATION);\n    }\n  }\n\n  dismiss() {\n    const snackBar = this._overlay;\n    const timer = this._timer;\n    this._afterDismissedEventEmitter.emit({dismissedByAction: this._dismissedByAction});\n    this._afterDismissed.next();\n    this._afterDismissed.complete();\n    if (snackBar) {\n      if (timer) {\n        // clear previous timer\n        clearTimeout(timer);\n      }\n\n      snackBar.containerElement.classList.remove(this._theme.addStyle('SnackBar:open', null, null, null, null));\n      setTimeout(() => {\n        snackBar.destroy();\n      }, 350);\n      this._snackBarService._currentSnackBar = null;\n      this._overlay = null;\n    }\n  }\n  dismissWithAction() {\n    const snackBar = this._overlay;\n    if (snackBar) {\n      this._dismissedByAction = true;\n      this.dismiss();\n    }\n  }\n}\n","import { Directive, Input, TemplateRef, Output, EventEmitter, OnDestroy } from '@angular/core';\nimport { LyTheme2, LyOverlay, ThemeVariables, XPosition, YPosition } from '@alyle/ui';\nimport { LySnackBarService } from './snack-bar.service';\nimport { LySnackBarRef } from './snack-bar-ref';\n\nconst STYLE_PRIORITY = -2;\nconst DEFAULT_HORIZONTAL_POSITION = XPosition.after;\nconst DEFAULT_VERTICAL_POSITION = YPosition.below;\nexport const STYLES = (theme: ThemeVariables) => ({\n  $priority: STYLE_PRIORITY,\n  root: {\n    borderRadius: '4px',\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    margin: '8px',\n    padding: '0 16px',\n    minHeight: '48px',\n    minWidth: '320px',\n    maxWidth: '320px',\n    opacity: 0,\n    transition: `opacity ${theme.animations.curves.standard} 350ms, transform ${theme.animations.curves.deceleration} 350ms`,\n    fontSize: theme.pxToRem(theme.typography.fontSize),\n    [theme.getBreakpoint('XSmall')]: {\n      width: 'calc(100% - 16px)',\n      minWidth: 'calc(100% - 16px)'\n    },\n    '&': theme.snackBar ? theme.snackBar!.root : null\n  }\n});\n\n/** Event that is emitted when a snack bar is dismissed. */\nexport interface LySnackBarDismiss {\n  /** Whether the snack bar was dismissed using the action fn. */\n  dismissedByAction: boolean;\n}\n\n@Directive({\n  selector: 'ng-template[ly-snack-bar]',\n  exportAs: 'lySnackBar'\n})\nexport class LySnackBar implements OnDestroy {\n\n  readonly classes = this._theme.addStyleSheet(STYLES);\n  @Input() duration: number | 'Infinity';\n  @Input() horizontalPosition: 'center' | XPosition;\n  @Input() verticalPosition: YPosition;\n  @Output() afterDismissed = new EventEmitter<LySnackBarDismiss>();\n  constructor(\n    private _templateRef: TemplateRef<any>,\n    private _theme: LyTheme2,\n    private _overlay: LyOverlay,\n    private _snackBarService: LySnackBarService\n  ) { }\n\n  ngOnDestroy() {\n    this.dismiss();\n  }\n\n  open() {\n    // close previous snackBar if exist\n    const sbrPrev = this._snackBarService._currentSnackBar;\n    if (sbrPrev) {\n      sbrPrev.dismiss();\n    }\n\n    const duration = this.duration;\n    const horizontalPosition = this.horizontalPosition || DEFAULT_HORIZONTAL_POSITION;\n    const verticalPosition = this.verticalPosition || DEFAULT_VERTICAL_POSITION;\n\n    const snackBar = this._overlay.create(this._templateRef, undefined, {\n      styles: {\n        // this remove previous style\n        justifyContent: null\n      },\n      hasBackdrop: false,\n      classes: [\n        this.classes.root,\n        this._theme.addStyle(`SnackBar.hp:${horizontalPosition}.vp:${verticalPosition}`, (theme: ThemeVariables) => {\n          const __styles: {\n            marginLeft?: 'auto'\n            left?: 0\n            marginRight?: 'auto'\n            right?: 0\n            transform?: string\n            top?: number\n            bottom?: number\n          } = { };\n          if (verticalPosition === YPosition.above) {\n            __styles.transform = 'translateY(-180%)';\n            __styles.top = 0;\n          } if (verticalPosition === YPosition.below) {\n            __styles.transform = 'translateY(180%)';\n            __styles.bottom = 0;\n          }\n          if (horizontalPosition === 'center') {\n            __styles.marginRight = __styles.marginLeft = 'auto';\n            __styles.left = __styles.right = 0;\n          } else {\n            __styles[theme.getDirection(horizontalPosition as any)] = 0;\n          }\n          return __styles;\n        }, undefined, undefined, STYLE_PRIORITY)\n      ]\n    });\n\n    this._theme.requestAnimationFrame(() => {\n      this._theme.addStyle('SnackBar:open', ({\n        opacity: 1,\n        transform: 'translateY(0)'\n      }), snackBar.containerElement, undefined, STYLE_PRIORITY);\n    });\n\n    window.getComputedStyle(snackBar.containerElement).getPropertyValue('opacity');\n\n    const sbr = new LySnackBarRef(this._snackBarService, snackBar, this.afterDismissed, duration, this._theme);\n    this._snackBarService._currentSnackBar = sbr;\n    return sbr;\n  }\n\n  /** Dismiss snackBar */\n  dismiss() {\n    const sbr = this._snackBarService._currentSnackBar;\n    if (sbr) {\n      sbr.dismissWithAction();\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { LyOverlayModule } from '@alyle/ui';\nimport { LySnackBar } from './snack-bar';\n\n@NgModule({\n  imports: [LyOverlayModule],\n  declarations: [LySnackBar],\n  exports: [LySnackBar]\n})\nexport class LySnackBarModule {}\n"],"names":["Injectable","Subject","XPosition","YPosition","EventEmitter","Directive","TemplateRef","LyTheme2","LyOverlay","Input","Output","NgModule","LyOverlayModule"],"mappings":"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"}
