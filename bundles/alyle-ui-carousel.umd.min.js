!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/platform-browser"),require("@alyle/ui"),require("chroma-js"),require("@angular/common")):"function"==typeof define&&define.amd?define("@alyle/ui/carousel",["exports","@angular/core","@angular/platform-browser","@alyle/ui","chroma-js","@angular/common"],t):t((e.alyle=e.alyle||{},e.alyle.ui=e.alyle.ui||{},e.alyle.ui.carousel={}),e.ng.core,e.ng.platformBrowser,e.alyle.ui,e._chroma,e.ng.common)}(this,function(e,t,n,i,s,r){"use strict";var o=s,a=function(e){return{root:{display:"block","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none",position:"relative","& {actions}.right":{right:0,"-webkit-transform":"rotate(180deg)",transform:"rotate(180deg)"},"& svg":{display:"block",fill:"currentColor"}},actions:{position:"absolute",top:0,bottom:0,margin:"auto .25em",height:"1em",width:"1em",fontSize:"36px",cursor:"pointer",color:e.background.primary["default"],background:o(e.text.primary).alpha(.25).css(),willChange:"transform"},slideContainer:{overflow:"hidden",display:"block",width:"100%",height:"100%",position:"relative",touchAction:"pan-y !important"},slide:{display:"flex",width:"100%",height:"100%",willChange:"transform","& > ly-carousel-item":{width:"100%",flexShrink:0,position:"relative",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}},slideContent:{display:"flex"},slideAnim:{"& > div":{transition:"transform 750ms cubic-bezier(.1, 1, 0.5, 1)"}},slideNoEvent:{"&>div":{touchAction:"initial !important"}},carouselIndicators:{position:"absolute",bottom:0,left:0,right:0,margin:0,boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center",height:"48px","&>div":{display:"inline-block",borderRadius:"50%",cursor:"pointer",position:"relative",padding:".5em",outline:"none"},"&>div > span":{transition:"300ms cubic-bezier(0.65, 0.05, 0.36, 1)",width:"1em",height:"1em",transform:"scale(.5)",borderRadius:"50%",willChange:"transform",display:"block",opacity:.65},"&>div>span.active":{transform:"scale(1)",opacity:1}}}},l={"default":0,inline:1};l[l["default"]]="default",l[l.inline]="inline";var c=function(){function e(e,t,n,i,s){this._el=e,this._sanitizer=t,this.cd=n,this.theme=i,this.renderer=s,this.classes=this.theme.addStyleSheet(a,-2),this.nullImg="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",this._intervalFn=null,this.mode=l["default"],this.interval=7e3,this.selectedIndex=0,this.renderer.addClass(e.nativeElement,this.classes.root)}return Object.defineProperty(e.prototype,"touch",{get:function(){return this._touch},set:function(e){var t=i.toBoolean(e);(this._touch=t)?this.renderer.removeClass(this._el.nativeElement,this.classes.slideNoEvent):this.renderer.addClass(this._el.nativeElement,this.classes.slideNoEvent)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.touch||(this.touch=!1),i.Platform.isBrowser&&this._resetInterval()},e.prototype.ngAfterViewInit=function(){this.renderer.addClass(this.slideContainer.nativeElement,this.classes.slideContainer),i.Platform.isBrowser&&this.renderer.addClass(this.slideContainer.nativeElement,this.classes.slideAnim)},e.prototype.ngOnDestroy=function(){i.Platform.isBrowser&&this.stop()},e.prototype._onDragStart=function(){var n=this;this.stop(),this.renderer.removeClass(this.slideContainer.nativeElement,this.classes.slideAnim),this.selectedElement=this.lyItems.find(function(e,t){return t===n.selectedIndex})._nativeElement},e.prototype._onDrag=function(e){var t=this.selectedElement.getBoundingClientRect();Math.abs(e.deltaX)<t.width?this._onPan(e.deltaX):this._onPan(t.width*Math.sign(e.deltaX))},e.prototype._onDragEnd=function(e){var t=this.selectedElement.getBoundingClientRect();if(this.renderer.addClass(this.slideContainer.nativeElement,this.classes.slideAnim),this.select(this.selectedIndex),Math.abs(e.deltaX)>t.width/2)e.deltaX<0?this.next():0<e.deltaX&&this.prev();else if(e.additionalEvent){var n=e.additionalEvent;"slideleft"===n?this.next():"slideright"===n&&this.prev()}this._resetInterval()},e.prototype._onDragCancel=function(){this.renderer.addClass(this.slideContainer.nativeElement,this.classes.slideAnim),this.select(this.selectedIndex),this._resetInterval()},e.prototype.select=function(e,t){this.selectedIndex=e,this.mode===l["default"]&&(this._positionLeft="translate3d("+-100*e+"%, 0px, 0)"),t||this._resetInterval()},e.prototype.prev=function(){var e=this.lyItems.length-1,t=this.selectedIndex-1;this.select(t<0?e:t)},e.prototype.next=function(e){var t=this.lyItems.length-1,n=this.selectedIndex+1;this.select(t<n?0:n,e)},e.prototype.stop=function(){null!==this._intervalFn&&(clearInterval(this._intervalFn),this._intervalFn=null)},e.prototype._resetInterval=function(){var e=this;this.stop(),this._intervalFn=setInterval(function(){e.next(!0),e._markForCheck()},this.interval)},e.prototype._onPan=function(e){this._positionLeft=this._sanitizerStyle("translate3d(calc("+-100*this.selectedIndex+"% + "+e+"px), 0px, 0)")},e.prototype._sanitizerStyle=function(e){return this._sanitizer.bypassSecurityTrustStyle(e)},e.prototype._markForCheck=function(){this.cd.markForCheck()},e.decorators=[{type:t.Component,args:[{selector:"ly-carousel",template:'<div\n(slidestart)="touch && _onDragStart()"\n(slideleft)="touch && _onDrag($event)"\n(slideright)="touch && _onDrag($event)"\n(slidecancel)="touch && _onDragCancel()"\n(slideend)="touch && _onDragEnd($event)"\n#slideContainer\n>\n  <div [className]="classes.slide" [style.transform]="_positionLeft">\n    <ng-content></ng-content>\n  </div>\n  <div [className]="classes.carouselIndicators" *ngIf="lyItems.length !== 1">\n      <div tabindex="0"\n      (click)="select(i)"\n      role="button"\n      *ngFor="let item of lyItems; let i = index">\n      <span ly-paper\n      color="#000"\n      bg="background:primary"\n      [class.active]="selectedIndex==i"\n      [elevation]="8"\n      [shadowColor]="\'text\'"\n      ></span>\n      </div>\n  </div>\n  <div [className]="classes.actions" (click)="prev()">\n    <svg viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path></svg>\n  </div>\n  <div [ngClass]="[classes.actions, \'right\']" (click)="next()">\n    <svg viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path></svg>\n  </div>\n</div>',changeDetection:t.ChangeDetectionStrategy.OnPush,preserveWhitespaces:!1,encapsulation:t.ViewEncapsulation.None}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:n.DomSanitizer},{type:t.ChangeDetectorRef},{type:i.LyTheme2},{type:t.Renderer2}]},e.propDecorators={slideContainer:[{type:t.ViewChild,args:["slideContainer"]}],lyItems:[{type:t.ContentChildren,args:[t.forwardRef(function(){return d})]}],mode:[{type:t.Input}],interval:[{type:t.Input}],selectedIndex:[{type:t.Input}],touch:[{type:t.Input}]},e}(),d=function(){function e(e,t){this.theme=e,this._nativeElement=t.nativeElement}return Object.defineProperty(e.prototype,"srcImg",{set:function(e){this._className=this.theme.addStyle("ly-carousel-img:"+e,"background-image: url('"+e+"')",this._nativeElement,this._className,-2)},enumerable:!0,configurable:!0}),e.decorators=[{type:t.Directive,args:[{selector:"ly-carousel-item"}]}],e.ctorParameters=function(){return[{type:i.LyTheme2},{type:t.ElementRef}]},e.propDecorators={srcImg:[{type:t.Input}]},e}(),h=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[r.CommonModule,i.LyCommonModule],exports:[d,c,i.LyCommonModule],declarations:[d,c]}]}],e}();e.CarouselMode=l,e.LyCarousel=c,e.LyCarouselItem=d,e.LyCarouselModule=h,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=alyle-ui-carousel.umd.min.js.map