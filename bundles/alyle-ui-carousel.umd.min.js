!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@alyle/ui"),require("rxjs"),require("rxjs/operators"),require("@angular/common")):"function"==typeof define&&define.amd?define("@alyle/ui/carousel",["exports","@angular/core","@alyle/ui","rxjs","rxjs/operators","@angular/common"],t):t(((e=e||self).ly=e.ly||{},e.ly.carousel={}),e.ng.core,e.ly.core,e.rxjs,e.rxjs.operators,e.ng.common)}(this,(function(e,t,n,r,i,o){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function s(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}var a,l=7e3,c=function(e,t){var r=e.getDirection(n.DirAlias.before),i="right"===r?0:180,o="left"===r?0:180,s=t.selectorsOf(c),a=n.keyframesUniqueId.next(),l=e.after,u=e.before;return{$priority:-2,$global:function(e){return"@keyframes "+a+"{"+e+" 0%{transform:translateX(0%);}"+e+" 100%{transform:translateX("+("left"===r?"-":"")+"100%);}}"},root:function(){return function(t){return t+"{display:block;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;position:relative;}"+n.st2c(e.carousel&&e.carousel.root&&(e.carousel.root instanceof n.StyleCollection?e.carousel.root.setTransformer((function(e){return e(s)})):e.carousel.root(s)),""+t)+t+" "+s.actions+".right{"+l+":0;transform:rotate("+i+"deg);}"+t+" "+s.actions+".left{"+u+":0;transform:rotate("+o+"deg);}"+t+" svg{display:block;fill:currentColor;}"}},actions:function(t){return t+"{position:absolute;top:0;bottom:0;margin:auto .25em;height:1em;width:1em;font-size:36px;cursor:pointer;background:"+e.background.primary.default.alpha(.25)+";color:"+e.text.primary+";will-change:transform;}"},slideContainer:function(e){return e+"{overflow:hidden;display:block;width:100%;height:100%;position:relative;touch-action:pan-y !important;}"},slide:function(e){return e+"{display:flex;width:100%;height:100%;will-change:transform;}"+e+" > ly-carousel-item{width:100%;flex-shrink:0;position:relative;background-size:cover;background-position:center;background-repeat:no-repeat;}"},slideContent:function(e){return e+"{display:flex;}"},slideAnim:function(e){return e+" > div{transition:transform 750ms cubic-bezier(.1, 1, 0.5, 1);}"},slideNoEvent:function(e){return e+">div{touch-action:initial !important;-webkit-user-drag:initial !important;}"},carouselIndicators:function(e){return e+"{position:absolute;bottom:0;left:0;right:0;margin:0;box-sizing:border-box;display:flex;align-items:center;justify-content:center;height:48px;}"+e+">div{display:inline-block;border-radius:50%;cursor:pointer;position:relative;padding:.5em;outline:none;}"+e+">div },"+e+">div>div > span{transition:300ms cubic-bezier(0.65, 0.05, 0.36, 1);width:1em;height:1em;transform:scale(.5);border-radius:50%;will-change:transform;display:block;opacity:.65;}"+e+">div } },'"+e+">div }>div>span.active,"+e+">div>div > span },'"+e+">div>div > span>div>span.active{transform:scale(1);opacity:1;}"},barContainer:function(t){return t+"{background:"+e.background.primary.default.alpha(.25)+";height:4px;position:absolute;bottom:0;width:100%;}"},bar:function(t){return t+"{height:4px;position:absolute;bottom:0;width:100%;animation-name:"+a+";animation-timing-function:linear;animation-iteration-count:infinite;background:"+e.text.primary+";}"}}};(a=e.CarouselMode||(e.CarouselMode={}))[a.default=0]="default",a[a.inline=1]="inline";var u=function(){function o(t,n,i,o){this._el=t,this._cd=n,this._theme=i,this._renderer=o,this.classes=this._theme.addStyleSheet(c),this._intervalFn=null,this.mode=e.CarouselMode.default,this.selectedIndex=0,this._interval=l,this._destroy=new r.Subject,this._renderer.addClass(t.nativeElement,this.classes.root)}return Object.defineProperty(o.prototype,"_isIntervalFn",{get:function(){return!!this._intervalFn},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pauseOnHover",{get:function(){return this._pauseOnHover},set:function(e){var t=n.toBoolean(e);this._pauseOnHover=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"touch",{get:function(){return this._touch},set:function(e){var t=n.toBoolean(e);this._touch=t,t?this._renderer.removeClass(this._el.nativeElement,this.classes.slideNoEvent):this._renderer.addClass(this._el.nativeElement,this.classes.slideNoEvent)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"autoplay",{get:function(){return this._autoplay},set:function(e){var t=n.toBoolean(e);this._autoplay=t,t?this._resetInterval():this.stop()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hasProgressBar",{get:function(){return this._hasProgressBar},set:function(e){var t=n.toBoolean(e);this._hasProgressBar=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"interval",{get:function(){return this._interval},set:function(e){this._interval=e,this._resetInterval()},enumerable:!0,configurable:!0}),o.prototype.ngOnInit=function(){this.touch||(this.touch=!1),null==this.autoplay&&(this.autoplay=!0),null==this.hasProgressBar&&(this.hasProgressBar=!1)},o.prototype.ngAfterViewInit=function(){var e=this;this._renderer.addClass(this.slideContainer.nativeElement,this.classes.slideContainer),n.Platform.isBrowser&&this._renderer.addClass(this.slideContainer.nativeElement,this.classes.slideAnim),this.lyItems.changes.pipe(i.takeUntil(this._destroy)).subscribe((function(){return e._markForCheck()}))},o.prototype.ngOnDestroy=function(){this._destroy.next(),this._destroy.complete(),n.Platform.isBrowser&&this.stop()},o.prototype._onMouseEnter=function(){this.pauseOnHover&&this.stop()},o.prototype._onMouseLeave=function(){this.pauseOnHover&&this._resetInterval()},o.prototype._onDragStart=function(){var e=this;this.stop(),this._renderer.removeClass(this.slideContainer.nativeElement,this.classes.slideAnim),this._selectedElement=this.lyItems.find((function(t,n){return n===e.selectedIndex}))._nativeElement},o.prototype._onDrag=function(e){var t=this._selectedElement.getBoundingClientRect();Math.abs(e.deltaX)<t.width?this._onPan(e.deltaX):this._onPan(t.width*Math.sign(e.deltaX))},o.prototype._onDragEnd=function(e){var t=this._selectedElement.getBoundingClientRect(),r=this._theme.variables.getDirection(n.DirAlias.before);if(this._renderer.addClass(this.slideContainer.nativeElement,this.classes.slideAnim),this._select(this.selectedIndex),Math.abs(e.deltaX)>t.width/2)0>e.deltaX?this.next():0<e.deltaX&&this.prev();else if(e.additionalEvent){var i=e.additionalEvent;Math.abs(e.velocity)>=.25&&("slideleft"===i?"left"===r?this.next():this.prev():"slideright"===i&&("right"===r?this.next():this.prev()))}this._renderer.removeStyle(this._slide.nativeElement,"transform")},o.prototype._onDragCancel=function(){this._renderer.addClass(this.slideContainer.nativeElement,this.classes.slideAnim),this._select(this.selectedIndex),this._resetInterval()},o.prototype._select=function(t,r){this.selectedIndex=t,this.mode===e.CarouselMode.default&&(this._slideClass=this._theme.addStyle("lyCarousel.select:"+t.toString(32),(function(e){var r="left"===e.getDirection(n.DirAlias.before)?-1:1;return{transform:"translateX("+100*t*r+"%)"}}),this._slide.nativeElement,this._slideClass,-2)),r||this.autoplay&&!this.pauseOnHover&&this._resetInterval()},o.prototype.prev=function(){var e=this.lyItems.length-1,t=this.selectedIndex-1;this._select(t<0?e:t)},o.prototype.next=function(e){var t=this.lyItems.length-1,n=this.selectedIndex+1;this._select(n>t?0:n,e)},o.prototype.stop=function(){null!==this._intervalFn&&(clearInterval(this._intervalFn),this._intervalFn=null)},o.prototype._resetInterval=function(){var e=this;n.Platform.isBrowser&&(this.stop(),this._restartProgressBarAnimation(),this._markForCheck(),this._intervalFn=setInterval((function(){e.next(!0),e._restartProgressBarAnimation(),e._markForCheck()}),this.interval))},o.prototype._restartProgressBarAnimation=function(){if(this.hasProgressBar&&this._progressBar){var e=this._progressBar.nativeElement;e.style.animationName="Ã¸fakeName",window.getComputedStyle(e).getPropertyValue("opacity"),e.style.animationName=""}},o.prototype._onPan=function(e){var t="left"===this._theme.variables.getDirection(n.DirAlias.before)?-1:1;this._renderer.setStyle(this._slide.nativeElement,"transform","translateX(calc("+100*t*this.selectedIndex+"% + "+e+"px))")},o.prototype._markForCheck=function(){this._cd.markForCheck()},o.ctorParameters=function(){return[{type:t.ElementRef},{type:t.ChangeDetectorRef},{type:n.LyTheme2},{type:t.Renderer2}]},s([t.ViewChild("slideContainer",{static:!1})],o.prototype,"slideContainer",void 0),s([t.ViewChild("_slide",{static:!1})],o.prototype,"_slide",void 0),s([t.ViewChild("_progressBar",{static:!1})],o.prototype,"_progressBar",void 0),s([t.ContentChildren(t.forwardRef((function(){return d})))],o.prototype,"lyItems",void 0),s([t.Input()],o.prototype,"mode",void 0),s([t.Input()],o.prototype,"selectedIndex",void 0),s([t.Input()],o.prototype,"pauseOnHover",null),s([t.Input()],o.prototype,"touch",null),s([t.Input()],o.prototype,"autoplay",null),s([t.Input()],o.prototype,"hasProgressBar",null),s([t.Input()],o.prototype,"interval",null),o=s([t.Component({selector:"ly-carousel",template:'<div\n(slidestart)="touch && _onDragStart()"\n(slideleft)="touch && _onDrag($event)"\n(slideright)="touch && _onDrag($event)"\n(slidecancel)="touch && _onDragCancel()"\n(slideend)="touch && _onDragEnd($event)"\n#slideContainer\n>\n  <div #_slide [className]="classes.slide">\n    <ng-content></ng-content>\n  </div>\n  <div [className]="classes.carouselIndicators" *ngIf="lyItems.length !== 1">\n    <div tabindex="0"\n      (click)="_select(i)"\n      role="button"\n      *ngFor="let item of lyItems; index as i"\n    >\n      <span ly-paper\n      color="#000"\n      bg="background:primary"\n      [class.active]="selectedIndex==i"\n      [elevation]="8"\n      [shadowColor]="\'text\'"></span>\n    </div>\n  </div>\n  <div [ngClass]="[classes.actions, \'left\']" (click)="prev()">\n    <svg viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path></svg>\n  </div>\n  <div [ngClass]="[classes.actions, \'right\']" (click)="next()">\n    <svg viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path></svg>\n  </div>\n  <div\n    [className]="classes.barContainer"\n    *ngIf="hasProgressBar && _isIntervalFn && interval && autoplay"\n  >\n    <div\n      [className]="classes.bar"\n      #_progressBar\n      [style.animation-duration]="interval + \'ms\'"\n    ></div>\n  </div>\n</div>',changeDetection:t.ChangeDetectionStrategy.OnPush,preserveWhitespaces:!1,host:{"(mouseenter)":"_onMouseEnter()","(mouseleave)":"_onMouseLeave()"}})],o)}(),d=function(){function e(e,t){this._theme=e,this._nativeElement=t.nativeElement}return Object.defineProperty(e.prototype,"srcImg",{set:function(e){this._className=this._theme.addStyle("ly-carousel-img:"+e,"background-image: url('"+e+"')",this._nativeElement,this._className,-2)},enumerable:!0,configurable:!0}),e.ctorParameters=function(){return[{type:n.LyTheme2},{type:t.ElementRef}]},s([t.Input()],e.prototype,"srcImg",null),e=s([t.Directive({selector:"ly-carousel-item"})],e)}(),h=function(){function e(){}return e=s([t.NgModule({imports:[o.CommonModule,n.LyCommonModule],exports:[d,u,n.LyCommonModule],declarations:[d,u]})],e)}();e.LyCarousel=u,e.LyCarouselItem=d,e.LyCarouselModule=h,e.STYLES=c,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=alyle-ui-carousel.umd.min.js.map