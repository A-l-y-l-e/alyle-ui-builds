!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@alyle/ui"),require("chroma-js"),require("rxjs"),require("rxjs/operators"),require("@angular/common")):"function"==typeof define&&define.amd?define("@alyle/ui/carousel",["exports","@angular/core","@alyle/ui","chroma-js","rxjs","rxjs/operators","@angular/common"],t):t(((e=e||self).ly=e.ly||{},e.ly.carousel={}),e.ng.core,e.ly.core,e.chroma,e.rxjs,e.rxjs.operators,e.ng.common)}(this,function(e,t,n,i,r,s,o){"use strict";function a(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}var d,c=i,h=7e3,p=function(e){var t=e.getDirection(n.DirAlias.before);return{$priority:-2,root:{display:"block","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none",position:"relative","& {actions}.right":{after:0,transform:"rotate("+("right"===t?0:180)+"deg)"},"& {actions}.left":{before:0,transform:"rotate("+("left"===t?0:180)+"deg)"},"& svg":{display:"block",fill:"currentColor"},"&":e.carousel?e.carousel.root:null},actions:{position:"absolute",top:0,bottom:0,margin:"auto .25em",height:"1em",width:"1em",fontSize:"36px",cursor:"pointer",background:c(e.background.primary["default"]).alpha(.25).css(),color:e.text.primary,willChange:"transform"},slideContainer:{overflow:"hidden",display:"block",width:"100%",height:"100%",position:"relative",touchAction:"pan-y !important"},slide:{display:"flex",width:"100%",height:"100%",willChange:"transform","& > ly-carousel-item":{width:"100%",flexShrink:0,position:"relative",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}},slideContent:{display:"flex"},slideAnim:{"& > div":{transition:"transform 750ms cubic-bezier(.1, 1, 0.5, 1)"}},slideNoEvent:{"&>div":{touchAction:"initial !important","-webkit-user-drag":"initial !important"}},carouselIndicators:{position:"absolute",bottom:0,left:0,right:0,margin:0,boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center",height:"48px","&>div":{display:"inline-block",borderRadius:"50%",cursor:"pointer",position:"relative",padding:".5em",outline:"none"},"&>div > span":{transition:"300ms cubic-bezier(0.65, 0.05, 0.36, 1)",width:"1em",height:"1em",transform:"scale(.5)",borderRadius:"50%",willChange:"transform",display:"block",opacity:.65},"&>div>span.active":{transform:"scale(1)",opacity:1}},barContainer:{background:c(e.background.primary["default"]).alpha(.25).css(),height:"4px",position:"absolute",bottom:0,width:"100%"},bar:{height:"4px",position:"absolute",bottom:0,width:"100%",animationName:"{interval}",animationTimingFunction:"linear",animationIterationCount:"infinite",background:e.text.primary},$keyframes:{interval:{0:{transform:"translateX(0%)"},100:{transform:"translateX("+("left"===t?"-":"")+"100%)"}}}}};(d=e.CarouselMode||(e.CarouselMode={}))[d["default"]=0]="default",d[d.inline=1]="inline";var u=function(){function i(t,n,i,s){this._el=t,this._cd=n,this._theme=i,this._renderer=s,this.classes=this._theme.addStyleSheet(p),this._intervalFn=null,this.mode=e.CarouselMode["default"],this.selectedIndex=0,this._interval=h,this._destroy=new r.Subject,this._renderer.addClass(t.nativeElement,this.classes.root)}return Object.defineProperty(i.prototype,"_isIntervalFn",{get:function(){return!!this._intervalFn},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"touch",{get:function(){return this._touch},set:function(e){var t=n.toBoolean(e);this._touch=t,t?this._renderer.removeClass(this._el.nativeElement,this.classes.slideNoEvent):this._renderer.addClass(this._el.nativeElement,this.classes.slideNoEvent)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"autoplay",{get:function(){return this._autoplay},set:function(e){var t=n.toBoolean(e);this._autoplay=t,t?this._resetInterval():this.stop()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hasProgressBar",{get:function(){return this._hasProgressBar},set:function(e){var t=n.toBoolean(e);this._hasProgressBar=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"interval",{get:function(){return this._interval},set:function(e){this._interval=e,this._resetInterval()},enumerable:!0,configurable:!0}),i.prototype.ngOnInit=function(){this.touch||(this.touch=!1),null==this.autoplay&&(this.autoplay=!0),null==this.hasProgressBar&&(this.hasProgressBar=!1)},i.prototype.ngAfterViewInit=function(){var e=this;this._renderer.addClass(this.slideContainer.nativeElement,this.classes.slideContainer),n.Platform.isBrowser&&this._renderer.addClass(this.slideContainer.nativeElement,this.classes.slideAnim),this.lyItems.changes.pipe(s.takeUntil(this._destroy)).subscribe(function(){return e._markForCheck()})},i.prototype.ngOnDestroy=function(){this._destroy.next(),this._destroy.complete(),n.Platform.isBrowser&&this.stop()},i.prototype._onDragStart=function(){var e=this;this.stop(),this._renderer.removeClass(this.slideContainer.nativeElement,this.classes.slideAnim),this._selectedElement=this.lyItems.find(function(t,n){return n===e.selectedIndex})._nativeElement},i.prototype._onDrag=function(e){var t=this._selectedElement.getBoundingClientRect();Math.abs(e.deltaX)<t.width?this._onPan(e.deltaX):this._onPan(t.width*Math.sign(e.deltaX))},i.prototype._onDragEnd=function(e){var t=this._selectedElement.getBoundingClientRect(),i=this._theme.variables.getDirection(n.DirAlias.before);if(this._renderer.addClass(this.slideContainer.nativeElement,this.classes.slideAnim),this._select(this.selectedIndex),Math.abs(e.deltaX)>t.width/2)0>e.deltaX?this.next():0<e.deltaX&&this.prev();else if(e.additionalEvent){var r=e.additionalEvent;Math.abs(e.velocity)>=.25&&("slideleft"===r?"left"===i?this.next():this.prev():"slideright"===r&&("right"===i?this.next():this.prev()))}this._renderer.removeStyle(this._slide.nativeElement,"transform"),this._resetInterval()},i.prototype._onDragCancel=function(){this._renderer.addClass(this.slideContainer.nativeElement,this.classes.slideAnim),this._select(this.selectedIndex),this._resetInterval()},i.prototype._select=function(t,i){this.selectedIndex=t,this.mode===e.CarouselMode["default"]&&(this._slideClass=this._theme.addStyle("lyCarousel.select:"+t.toString(32),function(e){var i="left"===e.getDirection(n.DirAlias.before)?-1:1;return{transform:"translateX("+100*t*i+"%)"}},this._slide.nativeElement,this._slideClass,-2)),i||this.autoplay&&this._resetInterval()},i.prototype.prev=function(){var e=this.lyItems.length-1,t=this.selectedIndex-1;this._select(t<0?e:t)},i.prototype.next=function(e){var t=this.lyItems.length-1,n=this.selectedIndex+1;this._select(n>t?0:n,e)},i.prototype.stop=function(){null!==this._intervalFn&&(clearInterval(this._intervalFn),this._intervalFn=null)},i.prototype._resetInterval=function(){var e=this;n.Platform.isBrowser&&(this.stop(),this._restartProgressBarAnimation(),this._markForCheck(),this._intervalFn=setInterval(function(){e.next(!0),e._restartProgressBarAnimation(),e._markForCheck()},this.interval))},i.prototype._restartProgressBarAnimation=function(){if(this.hasProgressBar&&this._progressBar){var e=this._progressBar.nativeElement;e.style.animationName="Ã¸fakeName",window.getComputedStyle(e).getPropertyValue("opacity"),e.style.animationName=""}},i.prototype._onPan=function(e){var t="left"===this._theme.variables.getDirection(n.DirAlias.before)?-1:1;this._renderer.setStyle(this._slide.nativeElement,"transform","translateX(calc("+100*t*this.selectedIndex+"% + "+e+"px))")},i.prototype._markForCheck=function(){this._cd.markForCheck()},a([t.ViewChild("slideContainer",{"static":!1}),l("design:type",t.ElementRef)],i.prototype,"slideContainer",void 0),a([t.ViewChild("_slide",{"static":!1}),l("design:type",t.ElementRef)],i.prototype,"_slide",void 0),a([t.ViewChild("_progressBar",{"static":!1}),l("design:type",t.ElementRef)],i.prototype,"_progressBar",void 0),a([t.ContentChildren(t.forwardRef(function(){return m})),l("design:type",t.QueryList)],i.prototype,"lyItems",void 0),a([t.Input(),l("design:type",Number)],i.prototype,"mode",void 0),a([t.Input(),l("design:type",Object)],i.prototype,"selectedIndex",void 0),a([t.Input(),l("design:type",Boolean),l("design:paramtypes",[Boolean])],i.prototype,"touch",null),a([t.Input(),l("design:type",Boolean),l("design:paramtypes",[Boolean])],i.prototype,"autoplay",null),a([t.Input(),l("design:type",Boolean),l("design:paramtypes",[Boolean])],i.prototype,"hasProgressBar",null),a([t.Input(),l("design:type",Number),l("design:paramtypes",[Number])],i.prototype,"interval",null),i=a([t.Component({selector:"ly-carousel",template:'<div\n(slidestart)="touch && _onDragStart()"\n(slideleft)="touch && _onDrag($event)"\n(slideright)="touch && _onDrag($event)"\n(slidecancel)="touch && _onDragCancel()"\n(slideend)="touch && _onDragEnd($event)"\n#slideContainer\n>\n  <div #_slide [className]="classes.slide">\n    <ng-content></ng-content>\n  </div>\n  <div [className]="classes.carouselIndicators" *ngIf="lyItems.length !== 1">\n    <div tabindex="0"\n      (click)="_select(i)"\n      role="button"\n      *ngFor="let item of lyItems; index as i"\n    >\n      <span ly-paper\n      color="#000"\n      bg="background:primary"\n      [class.active]="selectedIndex==i"\n      [elevation]="8"\n      [shadowColor]="\'text\'"></span>\n    </div>\n  </div>\n  <div [ngClass]="[classes.actions, \'left\']" (click)="prev()">\n    <svg viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path></svg>\n  </div>\n  <div [ngClass]="[classes.actions, \'right\']" (click)="next()">\n    <svg viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path></svg>\n  </div>\n  <div\n    [className]="classes.barContainer"\n    *ngIf="hasProgressBar && _isIntervalFn && interval && autoplay"\n  >\n    <div\n      [className]="classes.bar"\n      #_progressBar\n      [style.animation-duration]="interval + \'ms\'"\n    ></div>\n  </div>\n</div>',changeDetection:t.ChangeDetectionStrategy.OnPush,preserveWhitespaces:!1,encapsulation:t.ViewEncapsulation.None}),l("design:paramtypes",[t.ElementRef,t.ChangeDetectorRef,n.LyTheme2,t.Renderer2])],i)}(),m=function(){function e(e,t){this._theme=e,this._nativeElement=t.nativeElement}return Object.defineProperty(e.prototype,"srcImg",{set:function(e){this._className=this._theme.addStyle("ly-carousel-img:"+e,"background-image: url('"+e+"')",this._nativeElement,this._className,-2)},enumerable:!0,configurable:!0}),a([t.Input(),l("design:type",String),l("design:paramtypes",[String])],e.prototype,"srcImg",null),e=a([t.Directive({selector:"ly-carousel-item"}),l("design:paramtypes",[n.LyTheme2,t.ElementRef])],e)}(),f=function(){function e(){}return e=a([t.NgModule({imports:[o.CommonModule,n.LyCommonModule],exports:[m,u,n.LyCommonModule],declarations:[m,u]})],e)}();e.LyCarousel=u,e.LyCarouselItem=m,e.LyCarouselModule=f,e.STYLES=p,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=alyle-ui-carousel.umd.min.js.map