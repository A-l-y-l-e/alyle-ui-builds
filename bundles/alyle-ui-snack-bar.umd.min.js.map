{"version":3,"sources":["ng://@alyle/ui/snack-bar/snack-bar.service.ts","ng://@alyle/ui/snack-bar/snack-bar-ref.ts","ng://@alyle/ui/snack-bar/snack-bar.ts","ng://@alyle/ui/snack-bar/snack-bar.module.ts"],"names":["LySnackBarService","Injectable","args","providedIn","LySnackBarRef","_snackBarService","_overlay","_afterDismissedEventEmitter","duration","_theme","_this","this","_dismissedByAction","_afterDismissed","Subject","_timer","setTimeout","dismiss","prototype","afterDismissed","asObservable","snackBar","timer","emit","dismissedByAction","next","complete","clearTimeout","containerElement","classList","remove","addStyle","destroy","_currentSnackBar","dismissWithAction","DEFAULT_HORIZONTAL_POSITION","XPosition","after","DEFAULT_VERTICAL_POSITION","YPosition","below","STYLES","theme","$priority","root","_a","borderRadius","display","justifyContent","alignItems","margin","padding","minHeight","minWidth","maxWidth","opacity","transition","animations","curves","standard","deceleration","fontSize","pxToRem","typography","getBreakpoint","width","LySnackBar","_templateRef","classes","addStyleSheet","EventEmitter","ngOnDestroy","open","sbrPrev","horizontalPosition","verticalPosition","create","undefined","styles","hasBackdrop","__styles","above","transform","top","bottom","marginRight","marginLeft","left","right","getDirection","requestAnimationFrame","window","getComputedStyle","getPropertyValue","sbr","Directive","selector","exportAs","TemplateRef","LyTheme2","LyOverlay","Input","Output","LySnackBarModule","NgModule","imports","LyOverlayModule","declarations","exports"],"mappings":"sWAAA,IAAAA,EAAA,WAGA,SAAAA,gCAACC,EAAAA,WAAUC,KAAA,CAAC,CACVC,WAAY,gHAJd,GCQAC,EAAA,WAWE,SAAAA,EACUC,EACAC,EACAC,EACRC,EACQC,GALV,IAAAC,EAAAC,KACUA,KAAAN,iBAAAA,EACAM,KAAAL,SAAAA,EACAK,KAAAJ,4BAAAA,EAEAI,KAAAF,OAAAA,EAdFE,KAAAC,oBAAqB,EAGZD,KAAAE,gBAAkB,IAAIC,EAAAA,QAapB,aAAbN,IACFG,KAAKI,OAASC,WAAW,WACvBN,EAAKO,WACJT,GAvBgB,MAsDzB,OA5CEJ,EAAAc,UAAAC,eAAA,WACE,OAAOR,KAAKE,gBAAgBO,gBAgB9BhB,EAAAc,UAAAD,QAAA,eACQI,EAAWV,KAAKL,SAChBgB,EAAQX,KAAKI,OACnBJ,KAAKJ,4BAA4BgB,KAAK,CAACC,kBAAmBb,KAAKC,qBAC/DD,KAAKE,gBAAgBY,OACrBd,KAAKE,gBAAgBa,WACjBL,IACEC,GAEFK,aAAaL,GAGfD,EAASO,iBAAiBC,UAAUC,OAAOnB,KAAKF,OAAOsB,SAAS,gBAAiB,KAAM,KAAM,KAAM,OACnGf,WAAW,WACTK,EAASW,WACR,KACHrB,KAAKN,iBAAiB4B,iBAAmB,KACzCtB,KAAKL,SAAW,OAGpBF,EAAAc,UAAAgB,kBAAA,WACmBvB,KAAKL,WAEpBK,KAAKC,oBAAqB,EAC1BD,KAAKM,YAGXb,EApDA,GCFM+B,EAA8BC,EAAAA,UAAUC,MACxCC,EAA4BC,EAAAA,UAAUC,MAC/BC,EAAS,SAACC,SAA0B,MAAA,CAC/CC,WAJqB,EAKrBC,MAAIC,EAAA,CACFC,aAAc,MACdC,QAAS,OACTC,eAAgB,gBAChBC,WAAY,SACZC,OAAQ,MACRC,QAAS,SACTC,UAAW,OACXC,SAAU,QACVC,SAAU,QACVC,QAAS,EACTC,WAAY,WAAWd,EAAMe,WAAWC,OAAOC,SAAQ,qBAAqBjB,EAAMe,WAAWC,OAAOE,aAAY,SAChHC,SAAUnB,EAAMoB,QAAQpB,EAAMqB,WAAWF,WACzChB,EAACH,EAAMsB,cAAc,WAAY,CAC/BC,MAAO,oBACPZ,SAAU,qBAEZR,EAAA,KAAKH,EAAMrB,SAAWqB,EAAc,SAAEE,KAAO,uBAqB/C,SAAAsB,EACUC,EACA1D,EACAH,EACAD,GAHAM,KAAAwD,aAAAA,EACAxD,KAAAF,OAAAA,EACAE,KAAAL,SAAAA,EACAK,KAAAN,iBAAAA,EATDM,KAAAyD,QAAUzD,KAAKF,OAAO4D,cAAc5B,GAInC9B,KAAAQ,eAAiB,IAAImD,EAAAA,aAgFjC,OAxEEJ,EAAAhD,UAAAqD,YAAA,WACE5D,KAAKM,WAGPiD,EAAAhD,UAAAsD,KAAA,WAAA,IAAA9D,EAAAC,KAEQ8D,EAAU9D,KAAKN,iBAAiB4B,iBAClCwC,GACFA,EAAQxD,cAGJT,EAAWG,KAAKH,SAChBkE,EAAqB/D,KAAK+D,oBAAsBvC,EAChDwC,EAAmBhE,KAAKgE,kBAAoBrC,EAE5CjB,EAAWV,KAAKL,SAASsE,OAAOjE,KAAKwD,aAAcU,UAAW,CAClEC,OAAQ,CAEN9B,eAAgB,MAElB+B,aAAa,EACbX,QAAS,CACPzD,KAAKyD,QAAQxB,KACbjC,KAAKF,OAAOsB,SAAS,eAAe2C,EAAkB,OAAOC,EAAoB,SAACjC,OAC1EsC,EAQF,GAcJ,OAbIL,IAAqBpC,EAAAA,UAAU0C,QACjCD,EAASE,UAAY,oBACrBF,EAASG,IAAM,GACXR,IAAqBpC,EAAAA,UAAUC,QACnCwC,EAASE,UAAY,mBACrBF,EAASI,OAAS,GAEO,WAAvBV,GACFM,EAASK,YAAcL,EAASM,WAAa,OAC7CN,EAASO,KAAOP,EAASQ,MAAQ,GAEjCR,EAAStC,EAAM+C,aAAY,IAA+B,EAErDT,GACNH,UAAWA,WAjGC,MAqGnBlE,KAAKF,OAAOiF,sBAAsB,WAChChF,EAAKD,OAAOsB,SAAS,gBAAe,CAClCwB,QAAS,EACT2B,UAAW,iBACT7D,EAASO,iBAAkBiD,WAzGd,KA4GnBc,OAAOC,iBAAiBvE,EAASO,kBAAkBiE,iBAAiB,eAE9DC,EAAM,IAAI1F,EAAcO,KAAKN,iBAAkBgB,EAAUV,KAAKQ,eAAgBX,EAAUG,KAAKF,QAEnG,OADAE,KAAKN,iBAAiB4B,iBAAmB6D,GAK3C5B,EAAAhD,UAAAD,QAAA,eACQ6E,EAAMnF,KAAKN,iBAAiB4B,iBAC9B6D,GACFA,EAAI5D,yCAvFT6D,EAAAA,UAAS7F,KAAA,CAAC,CACT8F,SAAU,4BACVC,SAAU,0DAvCeC,EAAAA,mBAClBC,EAAAA,gBAAUC,EAAAA,iBACVpG,uCA0CNqG,EAAAA,kCACAA,EAAAA,gCACAA,EAAAA,8BACAC,EAAAA,UAgFHpC,KC/HAqC,EAAA,WAIA,SAAAA,KAK+B,2BAL9BC,EAAAA,SAAQtG,KAAA,CAAC,CACRuG,QAAS,CAACC,EAAAA,iBACVC,aAAc,CAACzC,GACf0C,QAAS,CAAC1C,OAEmBqC,EAT/B","sourcesContent":["import { Injectable } from '@angular/core';\nimport { LySnackBarRef } from './snack-bar-ref';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LySnackBarService {\n  /** @docs-private */\n  _currentSnackBar: LySnackBarRef | null;\n}\n","import { EventEmitter } from '@angular/core';\nimport { Subject, Observable } from 'rxjs';\nimport { OverlayFactory, LyTheme2 } from '@alyle/ui';\nimport { LySnackBarService } from './snack-bar.service';\nimport { LySnackBarDismiss } from './snack-bar';\n\nconst DEFAULT_DURATION = 6e3;\n\nexport class LySnackBarRef {\n  private _timer: any;\n  private _dismissedByAction = false;\n\n  /** Subject for notifying the user that the snack bar has been dismissed. */\n  private readonly _afterDismissed = new Subject<void>();\n\n  /** Gets an observable that is notified when the snack bar is finished closing. */\n  afterDismissed(): Observable<void> {\n    return this._afterDismissed.asObservable();\n  }\n  constructor(\n    private _snackBarService: LySnackBarService,\n    private _overlay: OverlayFactory | null,\n    private _afterDismissedEventEmitter: EventEmitter<LySnackBarDismiss>,\n    duration: number | 'Infinity',\n    private _theme: LyTheme2\n  ) {\n    if (duration !== 'Infinity') {\n      this._timer = setTimeout(() => {\n        this.dismiss();\n      }, duration || DEFAULT_DURATION);\n    }\n  }\n\n  dismiss() {\n    const snackBar = this._overlay;\n    const timer = this._timer;\n    this._afterDismissedEventEmitter.emit({dismissedByAction: this._dismissedByAction});\n    this._afterDismissed.next();\n    this._afterDismissed.complete();\n    if (snackBar) {\n      if (timer) {\n        // clear previous timer\n        clearTimeout(timer);\n      }\n\n      snackBar.containerElement.classList.remove(this._theme.addStyle('SnackBar:open', null, null, null, null));\n      setTimeout(() => {\n        snackBar.destroy();\n      }, 350);\n      this._snackBarService._currentSnackBar = null;\n      this._overlay = null;\n    }\n  }\n  dismissWithAction() {\n    const snackBar = this._overlay;\n    if (snackBar) {\n      this._dismissedByAction = true;\n      this.dismiss();\n    }\n  }\n}\n","import { Directive, Input, TemplateRef, Output, EventEmitter, OnDestroy } from '@angular/core';\nimport { LyTheme2, LyOverlay, ThemeVariables, XPosition, YPosition } from '@alyle/ui';\nimport { LySnackBarService } from './snack-bar.service';\nimport { LySnackBarRef } from './snack-bar-ref';\n\nconst STYLE_PRIORITY = -2;\nconst DEFAULT_HORIZONTAL_POSITION = XPosition.after;\nconst DEFAULT_VERTICAL_POSITION = YPosition.below;\nexport const STYLES = (theme: ThemeVariables) => ({\n  $priority: STYLE_PRIORITY,\n  root: {\n    borderRadius: '4px',\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    margin: '8px',\n    padding: '0 16px',\n    minHeight: '48px',\n    minWidth: '320px',\n    maxWidth: '320px',\n    opacity: 0,\n    transition: `opacity ${theme.animations.curves.standard} 350ms, transform ${theme.animations.curves.deceleration} 350ms`,\n    fontSize: theme.pxToRem(theme.typography.fontSize),\n    [theme.getBreakpoint('XSmall')]: {\n      width: 'calc(100% - 16px)',\n      minWidth: 'calc(100% - 16px)'\n    },\n    '&': theme.snackBar ? theme.snackBar!.root : null\n  }\n});\n\n/** Event that is emitted when a snack bar is dismissed. */\nexport interface LySnackBarDismiss {\n  /** Whether the snack bar was dismissed using the action fn. */\n  dismissedByAction: boolean;\n}\n\n@Directive({\n  selector: 'ng-template[ly-snack-bar]',\n  exportAs: 'lySnackBar'\n})\nexport class LySnackBar implements OnDestroy {\n\n  readonly classes = this._theme.addStyleSheet(STYLES);\n  @Input() duration: number | 'Infinity';\n  @Input() horizontalPosition: 'center' | XPosition;\n  @Input() verticalPosition: YPosition;\n  @Output() afterDismissed = new EventEmitter<LySnackBarDismiss>();\n  constructor(\n    private _templateRef: TemplateRef<any>,\n    private _theme: LyTheme2,\n    private _overlay: LyOverlay,\n    private _snackBarService: LySnackBarService\n  ) { }\n\n  ngOnDestroy() {\n    this.dismiss();\n  }\n\n  open() {\n    // close previous snackBar if exist\n    const sbrPrev = this._snackBarService._currentSnackBar;\n    if (sbrPrev) {\n      sbrPrev.dismiss();\n    }\n\n    const duration = this.duration;\n    const horizontalPosition = this.horizontalPosition || DEFAULT_HORIZONTAL_POSITION;\n    const verticalPosition = this.verticalPosition || DEFAULT_VERTICAL_POSITION;\n\n    const snackBar = this._overlay.create(this._templateRef, undefined, {\n      styles: {\n        // this remove previous style\n        justifyContent: null\n      },\n      hasBackdrop: false,\n      classes: [\n        this.classes.root,\n        this._theme.addStyle(`SnackBar.hp:${horizontalPosition}.vp:${verticalPosition}`, (theme: ThemeVariables) => {\n          const __styles: {\n            marginLeft?: 'auto'\n            left?: 0\n            marginRight?: 'auto'\n            right?: 0\n            transform?: string\n            top?: number\n            bottom?: number\n          } = { };\n          if (verticalPosition === YPosition.above) {\n            __styles.transform = 'translateY(-180%)';\n            __styles.top = 0;\n          } if (verticalPosition === YPosition.below) {\n            __styles.transform = 'translateY(180%)';\n            __styles.bottom = 0;\n          }\n          if (horizontalPosition === 'center') {\n            __styles.marginRight = __styles.marginLeft = 'auto';\n            __styles.left = __styles.right = 0;\n          } else {\n            __styles[theme.getDirection(horizontalPosition as any)] = 0;\n          }\n          return __styles;\n        }, undefined, undefined, STYLE_PRIORITY)\n      ]\n    });\n\n    this._theme.requestAnimationFrame(() => {\n      this._theme.addStyle('SnackBar:open', ({\n        opacity: 1,\n        transform: 'translateY(0)'\n      }), snackBar.containerElement, undefined, STYLE_PRIORITY);\n    });\n\n    window.getComputedStyle(snackBar.containerElement).getPropertyValue('opacity');\n\n    const sbr = new LySnackBarRef(this._snackBarService, snackBar, this.afterDismissed, duration, this._theme);\n    this._snackBarService._currentSnackBar = sbr;\n    return sbr;\n  }\n\n  /** Dismiss snackBar */\n  dismiss() {\n    const sbr = this._snackBarService._currentSnackBar;\n    if (sbr) {\n      sbr.dismissWithAction();\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { LyOverlayModule } from '@alyle/ui';\nimport { LySnackBar } from './snack-bar';\n\n@NgModule({\n  imports: [LyOverlayModule],\n  declarations: [LySnackBar],\n  exports: [LySnackBar]\n})\nexport class LySnackBarModule {}\n"]}