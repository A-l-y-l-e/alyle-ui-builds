!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@alyle/ui"),require("@angular/animations"),require("rxjs"),require("@angular/common")):"function"==typeof define&&define.amd?define("@alyle/ui/drawer",["exports","@angular/core","@alyle/ui","@angular/animations","rxjs","@angular/common"],t):t((e.alyle=e.alyle||{},e.alyle.ui=e.alyle.ui||{},e.alyle.ui.drawer={}),e.ng.core,e.alyle.ui,e.ng.animations,e.rxjs,e.ng.common)}(this,function(e,n,r,o,i,t){"use strict";function s(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}var a=function(){function e(e,t){this.elementRef=e,this.renderer=t,this.margin="0 0 0 0",this._lyAnimation=!0,this._el=e.nativeElement}return e.prototype.setContentStyle=function(e){var t=this.margin.split(" ");e.left&&(t[3]=e.left+"px"),e.right&&(t[1]=e.right+"px"),e.top&&(t[0]=e.top+"px"),e.bottom&&(t[2]=e.bottom+"px"),this.margin=t.join(" ")},e.decorators=[{type:n.Directive,args:[{selector:"ly-drawer-content"}]}],e.ctorParameters=function(){return[{type:n.ElementRef},{type:n.Renderer2}]},e.propDecorators={margin:[{type:n.HostBinding,args:["style.margin"]}],_lyAnimation:[{type:n.HostBinding,args:["class.ly--animation"]}]},e}(),l=function(){function e(e,t,n){this.renderer=e,this.elementRef=t,this.animationBuilder=n,this.isDrawerBg=new i.BehaviorSubject(!1)}return e.prototype._closeAllSideAndPush=function(){var t=this;this._drawers.forEach(function(e){"over"!==e.mode&&"push"!==e.mode||(e.close(),t.isDrawerBg.next("inactive"))})},e.prototype.closeAll=function(){this._drawers.forEach(function(e){e.open&&e.close()}),this.isDrawerBg.next("inactive")},e.decorators=[{type:n.Component,args:[{selector:"ly-drawer-container",styles:[":host{display:block;overflow:hidden;-webkit-overflow-scrolling:touch;box-sizing:border-box;position:relative}:host ::ng-deep>ly-drawer-content{height:100%;overflow:auto;display:block}:host ::ng-deep>ly-drawer-content.ly--animation{transition:375ms cubic-bezier(.45,0,.25,1)}.ly-drawer-bg{position:absolute;top:0;left:0;right:0;bottom:0;opacity:.6;z-index:10;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ly-drawer-bg-opened{display:block}.ly-drawer-bg-closed{display:none}"],animations:[o.trigger("in",[o.state("inactive, 0",o.style({opacity:"0",display:"none"})),o.state("active, 1",o.style({opacity:".6"})),o.transition("* => active",o.animate("375ms ease-in")),o.transition("* => inactive",o.animate("375ms ease-out"))])],template:'\n  <ng-content select="ly-drawer"></ng-content>\n  <ng-content select="ly-drawer-content"></ng-content>\n  <div\n  #bg\n  [class.ly-drawer-bg-opened]="isDrawerBg | async"\n  [class.ly-drawer-bg-closed]="!(isDrawerBg | async)"\n  [@in]="isDrawerBg | async" class="ly-drawer-bg"\n  bg="drawer:backdrop"\n  (click)="_closeAllSideAndPush()"\n  ></div>\n  ',changeDetection:n.ChangeDetectionStrategy.OnPush,preserveWhitespaces:!1,exportAs:"lyDrawerContainer"}]}],e.ctorParameters=function(){return[{type:n.Renderer2},{type:n.ElementRef},{type:o.AnimationBuilder}]},e.propDecorators={_drawers:[{type:n.ContentChildren,args:[n.forwardRef(function(){return p})]}],_drawerContent:[{type:n.ContentChild,args:[n.forwardRef(function(){return a})]}]},e}(),p=function(){function e(e,t){this.drawerContainer=e,this.elementRef=t,this._opened=!1,this.config={width:200,height:200},this.mode="side",this.position="left",this.isOpenDrawer=!1,this.isDrawerHidden=!0}return Object.defineProperty(e.prototype,"opened",{get:function(){return this._opened},set:function(e){this.isOpenDrawer=e,(this._opened=e)?this.open(!0):this.close(!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_elementRect",{get:function(){return this.elementRef.nativeElement.getBoundingClientRect()},enumerable:!0,configurable:!0}),e.prototype.updateDrawerMargin=function(){if("side"===this.mode||"push"===this.mode){var e,t=this.config.width,n=this.config.height;if(0!==t&&"left"===this.position||"right"===this.position)(e={})[this.position]=t,this.drawerContainer._drawerContent.setContentStyle(e);if(0!==n&&"top"===this.position||"bottom"===this.position)(e={})[this.position]=n,this.drawerContainer._drawerContent.setContentStyle(e)}},e.prototype.toBoolean=function(e){return!0===e||"open"===e},e.prototype.toggle=function(){this.toBoolean(this.isOpenDrawer)?this.close():this.open()},e.prototype.open=function(e){return this.toogleDrawer(e),this.isDrawerHidden=!1,this.isOpenDrawer=e||"open",this.drawerContainer._drawerContent._lyAnimation="open"===this.isOpenDrawer,this.updateDrawerMargin(),this.setBgState(e||"active"),this.isOpenDrawer},e.prototype.close=function(e){return this.toogleDrawer(e),this.resetMargin(),this.isOpenDrawer=!1!==e&&!0!==e&&"close",this.drawerContainer._drawerContent._lyAnimation="close"===this.isOpenDrawer,this.setBgState(!1!==e&&"inactive"),this.isOpenDrawer},e.prototype.toogleDrawer=function(e){this.isShowDrawer=this.toBoolean(e)},e.prototype.setBgState=function(e){"over"!==this.mode&&"push"!==this.mode||this.drawerContainer.isDrawerBg.next(e)},e.prototype.resetMargin=function(){var e={};e[this.position]="0",this.drawerContainer._drawerContent.setContentStyle(e)},e.prototype.ngOnChanges=function(t){var n=this;Object.keys(t).forEach(function(e){"position"===e&&"rtl"===t[e].currentValue&&(n.position="right"),t.mode&&!t[e].firstChange&&(n.toBoolean(n.isOpenDrawer)?n.open(!0):n.close(!1))})},e.decorators=[{type:n.Component,args:[{selector:"ly-nav, ly-drawer",styles:[":host{display:block;position:fixed;box-sizing:border-box;overflow:auto;z-index:11}:host[position=top]{top:0;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}:host[position=left]{left:0;-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}:host[position=right],:host[position=rtl]{right:0;-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}:host[position=bottom]{bottom:0;-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}:host.ly-show-drawer{-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}:host.ly-drawer-hidden{visibility:hidden}"],animations:[o.trigger("visibilityChanged",[o.state("true, open",o.style({transform:"translate3d(0, 0, 0)"})),o.transition("* => open, * => close",[o.animate("375ms cubic-bezier(.45, 0, .25, 1)")])])],template:"<ng-content></ng-content>",changeDetection:n.ChangeDetectionStrategy.OnPush,preserveWhitespaces:!1,exportAs:"lyDrawer"}]}],e.ctorParameters=function(){return[{type:l,decorators:[{type:n.Optional}]},{type:n.ElementRef}]},e.propDecorators={config:[{type:n.Input}],mode:[{type:n.HostBinding,args:["attr.mode"]},{type:n.Input}],position:[{type:n.HostBinding,args:["attr.position"]},{type:n.Input}],isShowDrawer:[{type:n.HostBinding,args:["class.ly-show-drawer"]}],isOpenDrawer:[{type:n.HostBinding,args:["@visibilityChanged"]}],isDrawerHidden:[{type:n.HostBinding,args:["class.ly-drawer-hidden"]}],opened:[{type:n.Input}]},function t(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(i<3?o(s):3<i?o(t,n,s):o(t,n))||s);return 3<i&&s&&Object.defineProperty(t,n,s),s}([r.IsBoolean(),s("design:type",Boolean),s("design:paramtypes",[Boolean])],e.prototype,"opened",null),e}(),c=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,r.LyCommonModule],exports:[p,l,a],declarations:[p,l,a]}]}],e}();e.LyDrawerContent=a,e.LyDrawerContainer=l,e.LyDrawer=p,e.LyDrawerModule=c,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=alyle-ui-drawer.umd.min.js.map