!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("rxjs")):"function"==typeof define&&define.amd?define("@alyle/ui/ls",["exports","@angular/core","@angular/common","rxjs"],t):t((e.alyle=e.alyle||{},e.alyle.ui=e.alyle.ui||{},e.alyle.ui.ls={}),e.ng.core,e.ng.common,e.rxjs)}(this,function(e,t,i,n){"use strict";var a=function r(e,t){localStorage.setItem(e,JSON.stringify(t))},o=function(){function e(e){var t=this;this.platformId=e,this.itemsSubject=new Map,this._prefix="*ls*",this.storage=new n.Subject,i.isPlatformBrowser(this.platformId)&&(this.storageEvent=n.fromEvent(window,"storage"),this.storageEvent.subscribe(function(e){t.storage.next({key:e.key,value:e.newValue})}),this.storageObservable=this.storage.asObservable())}return e.prototype.hasItem=function(e){var t=this._addPrefix(e);return i.isPlatformBrowser(this.platformId)?!!localStorage.getItem(t):!i.isPlatformServer(this.platformId)&&void 0},e.prototype.setItem=function(e,t,r){void 0===r&&(r=!0);var o=this._addPrefix(e);r&&i.isPlatformBrowser(this.platformId)&&new a(o,t),this.storage.next({key:o,value:this.item(e)})},e.prototype.getItem=function(e,t){var r=this,o=this._addPrefix(e);return new n.Observable(function(t){r.hasItem(e)&&t.next(r.item(e)),r.storageObservable.subscribe(function(e){o===e.key&&t.next(e.value)})})},e.prototype.item=function(e){var t=this._addPrefix(e);try{return JSON.parse(window.localStorage[t])}catch(r){return null}},e.prototype._addPrefix=function(e){return'{"'+this._prefix+'":"'+e+'"}'},e.prototype._removePrefix=function(e){try{return JSON.parse(e)[this._prefix]}catch(t){return null}},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:Object,decorators:[{type:t.Inject,args:[t.PLATFORM_ID]}]}]},e}(),s=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{providers:[o]}]}],e}();e.MinimalStorage=a,e.MinimalLS=o,e.MinimalLSModule=s,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=alyle-ui-ls.umd.min.js.map